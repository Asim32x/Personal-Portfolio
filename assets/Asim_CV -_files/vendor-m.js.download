"use strict";(self.webpackChunk_grammarly_denali_app=self.webpackChunk_grammarly_denali_app||[]).push([[7151],{68654:(e,n,t)=>{t.d(n,{e:()=>J});var r,o,a=t(7640),i=t(83531),c=t(19147),u=t(6922),s=t(23988),l=t(1059),d=t(58889),f=t(44297),g=t(57797),p=t(42543),v=t(24946),m=t(10334),h=t(17171),y=t(58413),_=t(83293),x=t(29052),b=t(30040),w=t(96797),S=t(54988),D=t(60269),B=t(58347),k=t(6987),I=t(69701),E=t(49984),q=t(49361),N=t(61586),A=t(48690);!function(e){var n,t,r=e.primaryKeyPath="key",o=e.expiresPath="expires",a=e.createdPath="created",i=e.maxAgeSecondsPath="maxAgeSeconds",c=e.maxAgeOriginPath="maxAgeOrigin";e.entryCodec=w.tB(w.NW((n={data:w.Yj},(0,s._)(n,r,w.Yj),(0,s._)(n,a,w.ai),(0,s._)(n,o,w.ai),(0,s._)(n,i,w.ai),(0,s._)(n,c,w.Yj),n))),e.v1EntryCodec=w.tB(w.E$([w.NW((t={},(0,s._)(t,r,w.Yj),(0,s._)(t,"blobs",w.QZ(w.Yj)),(0,s._)(t,o,w.ai),(0,s._)(t,i,w.ai),(0,s._)(t,c,w.Yj),t)),w.OH({tag:w.Yj})]))}(r||(r={}));var T,P=function(){var e,n,t,r,a,i;return null!==(o=null===(i=self)||void 0===i||null===(a=i.navigator)||void 0===a||null===(r=a.storage)||void 0===r||null===(t=r.estimate)||void 0===t||null===(n=t.call(r))||void 0===n||null===(e=n.then(d.right))||void 0===e?void 0:e.catch((0,b.flow)(d.toError,(0,E.JK)("unexepected navigator.storage.estimate() error"),d.left)))&&void 0!==o?o:Promise.resolve(d.left(new E.aq("navigator.storage.estimate() API not supported")))},C=function(){function e(n,t,o){var a,i,u,l,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:P,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return function(t){return(0,b.pipe)(e,_.map(d.fold((function(){return d.right(Math.max(n,t))}),(function(e){return d.right(Math.max(n,t,(null!==(T=e.quota)&&void 0!==T?T:0)/2))}))))}}(f),v=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(a=o,function(e,n){return function(){return new Promise((function(t){var o=e.transaction(a,"readwrite"),i=o.objectStore(a);M(o,{onError:function(e){return t(d.left(new E.aq("IndexedDBStorageImpl.putIndexedDBStorageEntry() save transaction error, objectStore.put()",e)))},onAbort:function(e){return t(d.left(new E.aq("IndexedDBStorageImpl.putIndexedDBStorageEntry() save transaction aborted, objectStore.put()",e)))},onComplete:function(){return t(d.right(void 0))}}),i.put(r.entryCodec.encode({key:n.key,data:n.data,created:Date.now(),expires:Date.now()+1e3*n.maxAgeSeconds,maxAgeSeconds:n.maxAgeSeconds,maxAgeOrigin:n.maxAgeOrigin}))})).catch((function(e){return d.left(new E.aq("IndexedDBStorageImpl.putIndexedDBStorageEntry() promise rejection",e))}))}}),m=this;(0,c._)(this,e),(0,s._)(this,"_idb",void 0),(0,s._)(this,"_dbName",void 0),(0,s._)(this,"_storeName",void 0),(0,s._)(this,"_storageStatsProvider",void 0),(0,s._)(this,"_minEvictionSizeInBytes",void 0),(0,s._)(this,"_putEntry",void 0),(0,s._)(this,"_requestExpiredDataCleanup",void 0),(0,s._)(this,"_lazyDB",void 0),this._idb=n,this._dbName=t,this._storeName=o,this._storageStatsProvider=f,this._minEvictionSizeInBytes=g,this._putEntry=v,this._requestExpiredDataCleanup=new p.B7,this._lazyDB=(i=function(){return new Promise((function(n){var t=m._idb.open(m._dbName,e._version);t.onerror=function(){return n(d.left(new E.aq("Error opening storage database (v".concat(e._version,")"),t.error)))},t.onsuccess=function(){var e=t.result;e.onversionchange=function(){e.close()},n(d.right(e))},t.onupgradeneeded=function(o){var a=t.result;if(a.objectStoreNames.contains(m._storeName)){if(1===o.oldVersion){var i=t.transaction;if(i){var c=i.objectStore(m._storeName),u=c.getAll();u.onerror=function(){n(d.left(new E.aq("objectStore.getAll() error during migration of database ".concat(m._dbName," from v1 to v").concat(e._version,")"),u.error)))},u.onsuccess=function(){var t=u.result,o=c.clear();o.onsuccess=function(){t.forEach((function(e){(0,b.pipe)(r.v1EntryCodec.decode(e),d.map((function(e){e.blobs.forEach((function(n,t){c.put(r.entryCodec.encode({key:"".concat(void 0!==e.tag?"".concat(e.tag,"/"):"").concat(e.key).concat(e.blobs.length>1?"/".concat(t):""),data:n,created:e.expires-1e3*e.maxAgeSeconds,expires:e.expires,maxAgeSeconds:e.maxAgeSeconds,maxAgeOrigin:e.maxAgeOrigin}))}))})))}))},o.onerror=function(){n(d.left(new E.aq("objectStore.clear() error during migration of database ".concat(m._dbName," from v1 to v").concat(e._version,")"),u.error)))}}}}}else a.createObjectStore(m._storeName,{keyPath:r.primaryKeyPath}).createIndex(e._expirationIndex,r.expiresPath,{unique:!1})}})).catch((function(e){return d.left(new E.aq("IndexedDBStorageImpl._lazyDB promise rejection",e))}))},l=!1,{get hasValue(){return l},get value(){return l||(u=i(),l=!0),u}})}return(0,u._)(e,[{key:"runCleanupRequests",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.w,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,r=this;return(0,D.h)(this._requestExpiredDataCleanup,n).pipe((0,B.B)(1e3),(0,k.n)((e=t,"requestIdleCallback"in self?function(n){return new N.c((function(t){var r=null,o=function(a){a.timeRemaining()>0||a.didTimeout?t.next(n):a.timeRemaining()<=0&&void 0===e&&(null!==r&&self.cancelIdleCallback(r),r=self.requestIdleCallback(o))};return r=self.requestIdleCallback(o,{timeout:e}),function(){null!==r&&self.cancelIdleCallback(r)}}))}:function(e){return new N.c((function(n){var t=self.requestAnimationFrame((function(){return n.next(e)}));return function(){return cancelAnimationFrame(t)}}))})),(0,I.p)((function(){return r.clearExpiredData()()})))}},{key:"get",value:function(e){var n=this;return 0===e.keyPrefixes.length?x.Mr(d.left(new E.aq("Invalid IndexedDBStorageImpl.get() request. No keyPrefixes provided"))):(0,b.pipe)((function(){return n._lazyDB.value}),x.cy((function(t){return function(){return new Promise((function(o){var a=t.transaction(n._storeName,"readonly"),i=a.objectStore(n._storeName),c={},u=!1;e.keyPrefixes.forEach((function(e){c[e]=[]})),M(a,{onError:function(e){return o(d.left(new E.aq("IndexedDBStorageImpl.get() readonly transaction error (openCursor)",e)))},onAbort:function(e){return o(d.left(new E.aq("IndexedDBStorageImpl.get() readonly transaction aborted (openCursor)",e)))},onComplete:function(){return o((0,b.pipe)(e.keyPrefixes,g.cy((function(n){return(0,b.pipe)(c[n],g.di("expiration-time"===e.orderBy?y.contramap((function(e){return e.expires}))(y.ordNumber):y.contramap((function(e){return e.created}))(y.ordNumber)),"ascending"===e.direction?b.identity:g.BE)})),(function(n){var t,r,o=function(e,n){try{var t=(0,A.d)("[]"),r=[],o=!0,a=!1,i=void 0;try{for(var c,u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value,l=(0,A.d)(JSON.stringify(s)),d=0===r.length?0:1;if(!(t+d+l<=n))break;t+=d+l,r.push(s)}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}return r}catch(e){return[]}}((0,b.pipe)(n,g.$M(null!==(t=e.maxEntries)&&void 0!==t?t:Number.MAX_SAFE_INTEGER),g.Tj((function(e){return{key:e.key,data:e.data}}))),null!==(r=e.maxResponseSize)&&void 0!==r?r:19e4).length;return{entries:(0,b.pipe)(n,g.$M(o)),entriesDropped:n.length-o}}),(function(e){var n=e.entries,r=e.entriesDropped;return d.right({hasExpiredEntries:u,expirationUpdates:n.filter((function(e){return e.maxAgeOrigin===q.q3.MaxAgeOrigin.ReadWrite})),entries:n.map((function(e){return{key:e.key,data:e.data}})),entriesDropped:r,db:t})})))}});var s=!0,l=!1,f=void 0;try{for(var p,v=function(){var e=p.value,n=i.openCursor(U(e));n.onsuccess=function(){var t=n.result;null!==t&&((0,b.pipe)(r.entryCodec.decode(t.value),d.bimap((function(e){o(d.left(new E.aq("IndexedDBStorageImpl.get() decoding error reading cursor value, aborting",d.toError(e)))),a.abort()}),(function(n){n.expires<=Date.now()?u=!0:c[e].push(n)}))),t.continue())}},m=e.keyPrefixes[Symbol.iterator]();!(s=(p=m.next()).done);s=!0)v()}catch(e){l=!0,f=e}finally{try{s||null==m.return||m.return()}finally{if(l)throw f}}})).catch((function(e){return d.left(new E.aq("IndexedDBStorageImpl.get() promise rejection during readonly transaction",e))}))}})),x.W6((function(e){var t=e.db,o=e.expirationUpdates;return o.length>0?function(){return new Promise((function(e){var a=t.transaction(n._storeName,"readwrite"),i=a.objectStore(n._storeName);M(a,{onError:function(n){return e(d.left(new E.aq("IndexedDBStorageImpl.get() readwrite transaction error (put/delete)",n)))},onAbort:function(n){return e(d.left(new E.aq("IndexedDBStorageImpl.get() readwrite transaction aborted (put/delete)",n)))},onComplete:function(){return e(d.right(void 0))}}),o.forEach((function(e){return i.put(r.entryCodec.encode((0,h._)((0,m._)({},e),{expires:Date.now()+1e3*e.maxAgeSeconds})))}))})).catch((function(e){return d.left(new E.aq("IndexedDBStorageImpl.get() promise rejection during readwrite transaction",e))}))}:x.of(void 0)})),x.Tj((function(e){return e.hasExpiredEntries&&n._requestExpiredDataCleanup.next(null),{entries:e.entries,entriesDropped:e.entriesDropped}})))}},{key:"save",value:function(e){var n=this;if(e.maxAgeSeconds<=0)return x.Mr(d.left(new E.aq("Invalid IndexedDBStorageImpl.save() request. Invalid parameter `maxAgeSeconds <= 0`")));var t=(0,b.pipe)((function(){return n._lazyDB.value}),x.cy((function(t){return n._putEntry(t,e)})));return(0,b.pipe)(t,_.chain((function(e){return L(e)?(0,b.pipe)(n.clearExpiredData(),x.cy((function(n){return n>0?t:_.of(e)}))):_.of(e)})),_.chain((function(r){return L(r)?(0,b.pipe)(n._minEvictionSizeInBytes(F({key:e.key,data:e.data,expires:Date.now(),created:Date.now(),maxAgeSeconds:e.maxAgeSeconds,maxAgeOrigin:e.maxAgeOrigin})),x.cy((function(e){return n._evictTTL(e)})),x.cy((function(){return t}))):_.of(r)})))}},{key:"clear",value:function(e){var n=this;return 0===e.keyPrefixes.length?x.Mr(d.left(new E.aq("Invalid IndexedDBStorageImpl.clear() request. No keyPrefixes provided"))):(0,b.pipe)((function(){return n._lazyDB.value}),x.cy((function(t){return function(){return new Promise((function(r){var o=t.transaction(n._storeName,"readwrite"),a=o.objectStore(n._storeName);M(o,{onError:function(e){return r(d.left(new E.aq("IndexedDBStorageImpl.clear() transaction error",e)))},onAbort:function(e){return r(d.left(new E.aq("IndexedDBStorageImpl.clear() transaction aborted",e)))},onComplete:function(){return r(d.right(void 0))}});var i=!0,c=!1,u=void 0;try{for(var s,l=function(){var e=s.value,n=a.openCursor(U(e));n.onsuccess=function(){var e=n.result;null!==e&&(e.delete(),e.continue())}},f=e.keyPrefixes[Symbol.iterator]();!(i=(s=f.next()).done);i=!0)l()}catch(e){c=!0,u=e}finally{try{i||null==f.return||f.return()}finally{if(c)throw u}}}))}})))}},{key:"clearExpiredData",value:function(){var n=this;return(0,b.pipe)((function(){return n._lazyDB.value}),x.cy((function(t){return function(){return new Promise((function(r){var o=t.transaction(n._storeName,"readwrite"),a=o.objectStore(n._storeName),i=0;M(o,{onError:function(e){return r(d.left(new E.aq("IndexedDBStorageImpl.clearExpiredData() transaction error",e)))},onAbort:function(e){return r(d.left(new E.aq("IndexedDBStorageImpl.clearExpiredData() transaction aborted",e)))},onComplete:function(){return r(d.right(i))}});var c=a.index(e._expirationIndex).openKeyCursor(IDBKeyRange.upperBound(Date.now()));c.onsuccess=function(){var e=c.result;null!==e&&(a.delete(e.primaryKey).onsuccess=function(){return++i},e.continue())}})).catch((function(e){return d.left(new E.aq("IndexedDBStorageImpl.clearExpiredData() promise rejection",e))}))}})))}},{key:"statsEstimate",value:function(){return this._storageStatsProvider}},{key:"close",value:function(){var e=this;return this._lazyDB.hasValue?(0,b.pipe)((function(){return e._lazyDB.value}),x.wu((0,E.JK)("IndexedDBStorageImpl.close() error while accessing DB connection"),(function(e){return e.close()}))):x.of(void 0)}},{key:"dispose",value:function(){this.close()}},{key:"_evictTTL",value:function(n){var t=this;return(0,b.pipe)((function(){return t._lazyDB.value}),x.cy((function(o){return function(){return new Promise((function(a){var i=o.transaction(t._storeName,"readwrite"),c=i.objectStore(t._storeName),u=0;M(i,{onError:function(e){return a(d.left(new E.aq("IndexedDBStorageImpl._evictTTL() transaction error",e)))},onAbort:function(e){return a(d.left(new E.aq("IndexedDBStorageImpl._evictTTL() transaction aborted",e)))},onComplete:function(){return a(d.right(u))}});var s=c.index(e._expirationIndex).openCursor(null,"next");s.onsuccess=function(){var e=s.result;null!==e&&u<n&&((0,b.pipe)(r.entryCodec.decode(e.value),d.map((function(n){e.delete(),u+=F(n)}))),e.continue())}})).catch((function(e){return d.left(new E.aq("IndexedDBStorageImpl._evictTTL() promise rejection",e))}))}})))}}]),e}();function j(e){var n,t;return null!==(t=null===(n=e.target)||void 0===n?void 0:n.error)&&void 0!==t?t:void 0}function M(e,n){var t=function(){e.removeEventListener("abort",r),e.removeEventListener("error",o),e.removeEventListener("complete",a)},r=function(e){n.onAbort(j(e)),t()},o=function(e){n.onError(j(e)),t()},a=function(){n.onComplete(),t()};e.addEventListener("abort",r),e.addEventListener("error",o),e.addEventListener("complete",a)}function L(e){return d.isLeft(e)&&!0===(0,E.dQ)(e.left)}(0,s._)(C,"_version",2),(0,s._)(C,"_expirationIndex","expiration");var O=16;function F(e){return e.key.length+e.data.length+e.maxAgeOrigin.length+3*O}function U(e){return IDBKeyRange.bound(e,e+"ï¿¿",!1,!0)}var z="GrCAPIStorage:",K="".concat(z,"Tracking"),R="".concat(z,"__support__"),W="Tables",Y=function(){function e(n,t){(0,c._)(this,e),(0,s._)(this,"_idbFactory",void 0),(0,s._)(this,"_hashUserEmail",void 0),(0,s._)(this,"_dbNameToStorageInstanceMap",void 0),this._idbFactory=n,this._hashUserEmail=t,this._dbNameToStorageInstanceMap=new Map}return(0,u._)(e,[{key:"getStorageInstanceForUser",value:function(e){var n,t,r=this._getUserStorageDBName(e),o=new p.B7,a={instance:null!==(t=null===(n=this._dbNameToStorageInstanceMap.get(r))||void 0===n?void 0:n.instance)&&void 0!==t?t:new C(this._idbFactory,r,"CAPI Storage"),setupErrors:new p.B7,canSaveToStorage:o.pipe((0,v.s)(1)).toPromise()};return this._dbNameToStorageInstanceMap.set(r,a),H(this._idbFactory)?o.next(!0):this._storeUserDBNameForTracking(r).then(d.fold((function(e){o.next(!1),a.setupErrors.next(new E.aq("Unexpected storeUserDBNameForTracking() error",e))}),(function(){return o.next(!0)}))).catch((function(e){o.next(!1),a.setupErrors.next(new E.aq("Unexpected storeUserDBNameForTracking() promise rejection",e))})),a}},{key:"clearAllStorage",value:function(){var e=this;return(0,i._)((function(){var n,t,r,o;return(0,l.YH)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),e._dbNameToStorageInstanceMap.forEach((function(e){return e.instance.dispose()})),e._dbNameToStorageInstanceMap.clear(),[4,e._collectAllBackendManagedDBNames()];case 1:return n=a.sent(),d.isLeft(n)?[2,n]:[4,Promise.all(n.right.map((function(n){return(t=n,r=e._idbFactory,new Promise((function(e){var n=r.deleteDatabase(t);n.onerror=function(){return e(d.left(new E.aq("Unexpected deleteIndexedDBDatabase error",n.error)))},n.onsuccess=function(){return e(d.right(void 0))}}))).catch((function(e){return d.left(new E.aq("Unexpected error while clearing backend-managed client storage",e))}));var t,r})))];case 2:return t=a.sent(),[2,(r=g.sj(t)).left.length>0?d.left(new E.aq("Unexpected error(s) while clearing backend-managed client storage",r.left)):d.right(void 0)];case 3:return o=a.sent(),[2,d.left(new E.aq("Unexpected error while clearing backend-managed client storage: "+String(o),o))];case 4:return[2]}}))}))()}},{key:"dispose",value:function(){this._dbNameToStorageInstanceMap.forEach((function(e){return e.instance.dispose()})),this._dbNameToStorageInstanceMap.clear()}},{key:"_getUserStorageDBName",value:function(e){return"".concat(z).concat(this._hashUserEmail(e))}},{key:"_collectAllBackendManagedDBNames",value:function(){var e=this;return(0,i._)((function(){var n,t;return(0,l.YH)(this,(function(r){switch(r.label){case 0:return H(e._idbFactory)?(t=d.right,[4,e._idbFactory.databases()]):[3,2];case 1:return[2,t.apply(d,[(null!==(n=r.sent())&&void 0!==n?n:[]).map((function(e){return e.name})).filter((function(e){return void 0!==e&&e.startsWith(z)}))])];case 2:return[2,e._enumerateUserDBNamesFromTrackingDB().then(d.map((function(e){return e.concat(R)})))];case 3:return[2]}}))}))()}},{key:"_enumerateUserDBNamesFromTrackingDB",value:function(){return this._openOrCreateTrackingDatabase().then(d.fold((function(e){return Promise.resolve(d.left(e))}),(function(e){return new Promise((function(n){var t=e.transaction(W,"readonly"),r=t.objectStore(W),o=[];M(t,{onError:function(e){return n(d.left(new E.aq("TrackingDB._enumerateUserDBNamesFromTrackingDB() transaction error",e)))},onAbort:function(e){return n(d.left(new E.aq("TrackingDB._enumerateUserDBNamesFromTrackingDB() transaction aborted",e)))},onComplete:function(){n(d.right(o)),e.close()}});var a=r.getAllKeys();a.onsuccess=function(){o=a.result.map((function(e){return e.toString()}))}}))})))}},{key:"_storeUserDBNameForTracking",value:function(e){return this._openOrCreateTrackingDatabase().then(d.fold((function(e){return Promise.resolve(d.left(e))}),(function(n){return new Promise((function(t){var r=n.transaction(W,"readwrite"),o=r.objectStore(W);M(r,{onError:function(e){return t(d.left(new E.aq("TrackingDB._storeUserDBNameForTracking() transaction error",e)))},onAbort:function(e){return t(d.left(new E.aq("TrackingDB._storeUserDBNameForTracking() transaction aborted",e)))},onComplete:function(){t(d.right(void 0)),n.close()}}),o.put({key:e})}))})))}},{key:"_openOrCreateTrackingDatabase",value:function(){var e=this;return new Promise((function(n,t){var r=e._idbFactory.open(K,1);r.onerror=function(){return t(d.left(new E.aq("Error creating DB ".concat(K),r.error)))},r.onsuccess=function(){var e=r.result;e.onversionchange=function(){e.close()},n(d.right(r.result))},r.onupgradeneeded=function(){var e=r.result;e.objectStoreNames.contains(W)||e.createObjectStore(W,{keyPath:"key"})}}))}}]),e}();function H(e){return"databases"in e&&"function"==typeof e.databases}function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.indexedDB;return function(e,n){return n?function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Promise.race([new Promise((function(n){var t=e.open(R);t.onerror=function(){return n(!1)},t.onsuccess=function(){n(!0),t.result.close()}})).catch((function(){return!1})),new Promise((function(e){return setTimeout((function(){return e(t)}),n)}))]).catch((function(){return!1}))}(n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,!(arguments.length>3&&void 0!==arguments[3])||arguments[3]).then((function(t){return t?f.some(new Y(n,e)):f.none})).catch((function(){return f.none})):Promise.resolve(f.none)}(a.q("base64"),e)}},49984:(e,n,t)=>{t.d(n,{aq:()=>p,dQ:()=>m,JK:()=>v});var r=t(39695),o=t(19147),a=t(6922),i=t(23988),c=t(29573),u=t(8235),s=t(44988),l=t(79310),d=t(24586);function f(e){var n="function"==typeof Map?new Map:void 0;return f=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,r)}function r(){return(0,s.t)(e,arguments,(0,l.r)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,d.Z)(r,e)},f(e)}var g=t(32557),p=function(e){(0,c._)(t,e);var n=(0,g._)(t);function t(e,a){var c;return(0,o._)(this,t),c=n.call(this,e),(0,i._)((0,r._)(c),"reason",void 0),c.reason=a,c.name="StorageError","captureStackTrace"in Error?Error.captureStackTrace((0,r._)(c),c.constructor):c.stack=(new Error).stack,c}return(0,a._)(t,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message).concat(Boolean(this.reason)?" - ".concat(String(this.reason)):"")}}],[{key:"is",value:function(e){return(0,u._)(e,t)}}]),t}(f(Error));function v(e){return function(n){return new p(e,n)}}function m(e){var n;return Boolean(null===(n=function(e){var n,t=e.reason;return null==t?null:"string"==typeof t?t:"object"==typeof t&&"string"==typeof(null===(n=t)||void 0===n?void 0:n.name)?String(t.name):null}(e))||void 0===n?void 0:n.startsWith("QuotaExceeded"))}},49361:(e,n,t)=>{t.d(n,{Hi:()=>q,q3:()=>N,FA:()=>A});var r={};t.r(r),t.d(r,{Direction:()=>a,MaxAgeOrigin:()=>i,OrderBy:()=>c});var o={};t.r(o),t.d(o,{ClientMessage:()=>f,ClientMessageImplementations:()=>B,Direction:()=>m,Entry:()=>h,MaxAgeOrigin:()=>y,Message:()=>_,MessageClear:()=>b,MessageEntries:()=>S,MessageGet:()=>x,MessageSave:()=>w,OrderBy:()=>D,ProtocolMessage:()=>g,Root:()=>v,ServerMessage:()=>p,ServerMessageImplementations:()=>k,interpreter:()=>d.n});var a,i,c,u=t(96797);!function(e){e.Ascending="ascending",e.Descending="descending"}(a||(a={})),function(e){e.ReadWrite="read-write",e.Write="write"}(i||(i={})),function(e){e.CreationTime="creation-time",e.ExpirationTime="expiration-time"}(c||(c={}));var s=t(57055),l=t(1059),d=t(87626),f=(0,d.L)((function(e){return E(g(e),e.struct({}))(e)})),g=(0,d.L)((function(e){return e.struct({id:e.number})})),p=(0,d.L)((function(e){return E(g(e),e.struct({}))(e)})),v=(0,d.L)((function(e){return _(e)})),m=I(a),h=(0,d.L)((function(e){return e.struct({key:e.string,data:e.string})})),y=I(i),_=(0,d.L)((function(e){var n;return E(g(e),e.sum("action")(((n={})["storage:get"]=x(e),n["storage:clear"]=b(e),n["storage:save"]=w(e),n["storage:entries"]=S(e),n)))(e)})),x=(0,d.L)((function(e){return E(p(e),e.intersect(e.partial({maxEntries:e.number}))(e.intersect(e.partial({orderBy:D(e)}))(e.intersect(e.partial({direction:m(e)}))(e.struct({action:e.literal("storage:get"),keyPrefixes:e.readonly(e.array(e.string))})))))(e)})),b=(0,d.L)((function(e){return E(p(e),e.struct({action:e.literal("storage:clear"),keyPrefixes:e.readonly(e.array(e.string))}))(e)})),w=(0,d.L)((function(e){return E(p(e),e.struct({action:e.literal("storage:save"),key:e.string,data:e.string,maxAgeSeconds:e.number,maxAgeOrigin:y(e)}))(e)})),S=(0,d.L)((function(e){return E(f(e),e.struct({action:e.literal("storage:entries"),data:e.readonly(e.array(h(e)))}))(e)})),D=I(c),B=(0,d.L)((function(e){var n;return e.sum("action")(((n={})["storage:entries"]=S(e),n))})),k=(0,d.L)((function(e){var n;return e.sum("action")(((n={})["storage:get"]=x(e),n["storage:clear"]=b(e),n["storage:save"]=w(e),n))}));function I(e){var n=Object.keys(e).map((function(n){return e[n]})),t=n[0],r=n.slice(1);return(0,d.L)((function(e){return e.literal.apply(e,(0,l.fX)([t],r,!1))}))}function E(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,d.L)((function(n){return e.reduce((function(e,t){return n.intersect(t)(e)}))}))}var q,N=r,A=o;"storage:".concat(s.version),function(e){var n=e.Codec=u.tB(u.NW({action:u.tB(u.eu("storage")),id:u.tB(u.ai)}));e.is=n.is}(q||(q={}))},48690:(e,n,t)=>{function r(e){return new Blob([e]).size}t.d(n,{d:()=>r})},57055:(e,n,t)=>{t.r(n),t.d(n,{version:()=>r});var r="3.0.0"}}]);