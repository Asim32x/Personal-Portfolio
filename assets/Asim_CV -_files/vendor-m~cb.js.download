"use strict";(self.webpackChunk_grammarly_denali_app=self.webpackChunk_grammarly_denali_app||[]).push([[7348],{61198:(e,t,s)=>{s.d(t,{f_:()=>i,jM:()=>f,ug:()=>o});var i,o,r,n=s(23988),h=s(80074),a=s(44297),l=s(36840),d=s(6987),c=s(35413),_=s(68745),u=s(21216),p=s(95168),y=s(54988);!function(e){e.SetGoals="SetGoals",e.Performance="Performance"}(i||(i={})),function(e){e.setGoals=e=>({type:i.SetGoals,source:e}),e.performance={type:i.Performance}}(o||(o={}));class f{show(e){return this.preload(e).pipe(d.n((e=>this.showPreloaded(e))))}showPreloaded(e){return c.v((()=>{const t=new _.t("opened");return this.state.set(a.some(e({onClose:()=>{this.state.set(a.none),t.next("closed"),t.complete()}}))),t}))}preload(e){const t=JSON.stringify(e);if(this._modalFactoryCache.has(t)){const e=this._modalFactoryCache.get(t);return u.of(e)}return c.v((()=>this._modalViews.load(e))).pipe(p.M((e=>{this._modalFactoryCache.set(t,e)})))}hideAll(){this.state.set(a.none)}constructor(e){(0,n._)(this,"_modalViews",void 0),(0,n._)(this,"state",void 0),(0,n._)(this,"_modalFactoryCache",void 0),this._modalViews=e,this.state=h.s.create(a.none),this._modalFactoryCache=new Map}}!function(e){e.Mock=class{show(e){return y.w}showPreloaded(e){return y.w}preload(e){return y.w}constructor(){(0,n._)(this,"state",h.s.create(a.none)),(0,n._)(this,"hideAll",l.Yi)}}}(r||(r={}))},11924:(e,t,s)=>{var i,o;s.d(t,{_:()=>i,l:()=>o}),function(e){e.Keydown="keydown",e.Input="input"}(i||(i={})),function(e){e.alt="alt",e.shift="shift",e.short="short"}(o||(o={}))},52267:(e,t,s)=>{s.d(t,{ai:()=>K});var i=s(23988),o=s(57797),r=s(30040),n=s(47370),h=s(36840),a=s(69063),l=s(11924),d=s(6987),c=s(36094),_=s(62822),u=s(60269),p=s(42543),y=s(80837),f=s(68745),v=s(83541),m=s(35413),k=s(78339),b=s(88423),g=s(65141),w=s(15491),G=s(95168),S=s(54988),C=s(22013);class K{dispose(){this._subs.dispose()}_bindSources(e){const t=(0,r.pipe)(this._createHotkey,C.L.combineProviders(e),o.Tj((e=>e.isActive.pipe(d.n(c.vh(e.bind(this._bindHotkey(e.hotkey).pipe(_.u(e.action)))))))));this._subs.push(u.h(...t).subscribe())}constructor(e,t,s){(0,i._)(this,"bindingSources",void 0),(0,i._)(this,"_isAppleSystem",void 0),(0,i._)(this,"_registeredHotkeys",void 0),(0,i._)(this,"_hotkeyEvents",void 0),(0,i._)(this,"_subs",void 0),(0,i._)(this,"_logger",void 0),(0,i._)(this,"_modifiers",void 0),(0,i._)(this,"modifiersPressed",void 0),(0,i._)(this,"_createHotkey",void 0),(0,i._)(this,"_bindHotkey",void 0),(0,i._)(this,"_handleGlobalEvent",void 0),(0,i._)(this,"_listenGlobalInput",void 0),(0,i._)(this,"_listenGlobalKeyUp",void 0),(0,i._)(this,"_listenGlobalKeydown",void 0),this.bindingSources=e,this._isAppleSystem=t,this._registeredHotkeys=new Map,this._hotkeyEvents=new p.B7,this._subs=new y.y.Keeper,this._logger=a.Bx.Logging.getLogger("hotkeyManager"),this._modifiers=new f.t(new Set),this.modifiersPressed=this._modifiers.pipe(v.skipBy(n.ee(h._3))),this._createHotkey=e=>{const{key:t,modifiers:s,source:i=l._.Keydown,preventDefault:o=!0}=e;return{id:H(),key:t.toLowerCase(),modifiers:s,source:i,preventDefault:o,toString:()=>C.L.HotkeyOptions.toString(this._isAppleSystem)(e)}},this._bindHotkey=e=>m.v((()=>(this._registeredHotkeys.set(e.id,e),this._hotkeyEvents.pipe(k.p((t=>t===e.id)),_.u(c.q6))))).pipe(b.j((()=>{this._registeredHotkeys.delete(e.id)}))),this._handleGlobalEvent=(e,t)=>{const s=Array.from(this._registeredHotkeys.values()).filter(t);if(0===s.length)return;if(s.length>1)return void this._logger.error(`Multiple hotkeys registered in the same context: ${s}`);const i=s[0];this._hotkeyEvents.next(i.id),i.preventDefault&&e.preventDefault()},this._listenGlobalInput=()=>g.R(document,"input").subscribe((e=>{const t=e;if("historyUndo"===t.inputType){const t=e=>"UNDO"===e.key;this._handleGlobalEvent(e,t)}else if("historyRedo"===t.inputType){const t=e=>"REDO"===e.key;this._handleGlobalEvent(e,t)}})),this._listenGlobalKeyUp=e=>g.R(document,"keyup").pipe(w.T(e),G.M(this._modifiers)).subscribe(),this._listenGlobalKeydown=e=>g.R(document,"keydown").subscribe((t=>{const s=e(t),i=(o={short:s.has(l.l.short),alt:s.has(l.l.alt),shift:s.has(l.l.shift),key:t.key.toLowerCase(),keyCode:t.which||t.keyCode},e=>e.modifiers.has(l.l.short)===o.short&&e.modifiers.has(l.l.alt)===o.alt&&e.modifiers.has(l.l.shift)===o.shift&&(e.key===o.key||e.modifiers.size>0&&e.key===String.fromCharCode(o.keyCode)));var o;this._modifiers.next(s),this._handleGlobalEvent(t,i)})),this._bindSources(e);const o=(r=t,e=>{const t=new Set;return(r?e.metaKey&&!e.ctrlKey:e.ctrlKey&&!e.metaKey)&&t.add(l.l.short),e.altKey&&t.add(l.l.alt),e.shiftKey&&t.add(l.l.shift),t});var r;this._subs.push(this._listenGlobalKeydown(o),this._listenGlobalKeyUp(o)),s&&this._subs.push(this._listenGlobalInput())}}const H=(()=>{let e=1;return()=>e++})();var P;!function(e){e.Mock=class{constructor(){(0,i._)(this,"modifiersPressed",S.w),(0,i._)(this,"dispose",h.Yi)}}}(P||(P={}))},22013:(e,t,s)=>{s.d(t,{L:()=>i});var i,o=s(67947),r=s(57797),n=s(30040),h=s(86562),a=s(11924);!function(e){let t;!function(e){e.toString=e=>t=>Array.from(t.modifiers).reduce(((t,s)=>t+function(e,t){switch(e){case a.l.alt:return t?"Option+":"Alt+";case a.l.shift:return"Shift+";case a.l.short:return t?"âŒ˜+":"Ctrl+";default:return(0,h.xb)(e)}}(s,e)),"")+t.key}(t=e.HotkeyOptions||(e.HotkeyOptions={})),e.combineProviders=e=>(0,n.pipe)(e,r.Tj((e=>e.getBindings)),o.Pz,o.Tj(r.Bq))}(i||(i={}))},41831:(e,t,s)=>{var i;s.d(t,{th:()=>i}),function(e){var t=e.from=function(e){return e};e.of=function(){for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];return t(s)}}(i||(i={}))}}]);