/*! For license information please see vendor-m~dt~cb.js.LICENSE.txt */
(self.webpackChunk_grammarly_denali_app=self.webpackChunk_grammarly_denali_app||[]).push([[1800],{93915:(e,t,n)=>{"use strict";n.d(t,{Y_:()=>a,i5:()=>u,lN:()=>s,zj:()=>c});var r=n(44297),i=n(57797),o=n(30040);const a=()=>e=>e;function s(e){return(0,o.pipe)(e,i.Ts,r.getOrElse((()=>[])))}function u(e){return(0,o.flow)(i.pb(e),i.HV)}function c(e,t,n){const r=[...e];return t.forEach((e=>{const t=function(e,t,n){let r=0,i=e.length-1;for(;r<=i;){const o=r+i>>1;n.compare(t,e[o])<0?i=o-1:r=o+1}return r>=e.length?-1:r}(r,e,n);r.splice(-1===t?r.length:t,0,e)})),r}},56621:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});var r,i=n(58889),o=n(44297),a=n(57797),s=n(30040),u=n(96797),c=n(93915);!function(e){const t=(0,c.Y_)()(["initial","initialBTS","prompts","review","rewrite","knowledgeHub","references","history"]),n=(0,c.Y_)()(["extension","editor","llamaMac","llamaWin"]);function r(e,t){return`${e}|${t}`}function l(e,t,n){return`${e}|${t}|${n}`}function d(e){return o.isSome(y(e))}function p(e){return o.isSome(b(e))}const h=new u.ZU("CompletedStepName",(e=>"string"==typeof e&&d(e)),((e,t)=>"string"==typeof e&&d(e)?u.kX(e):u.V2(e,t)),u.D_),f=new u.ZU("LastSeenStepName",(e=>"string"==typeof e&&p(e)),((e,t)=>"string"==typeof e&&p(e)?u.kX(e):u.V2(e,t)),u.D_),g=u.tB(u.OH({completed:u.QZ(h),lastSeen:u.QZ(f)}));let m,_,v;function y(e){return(0,s.pipe)(o.some(e.split("|")),o.filter((e=>2===e.length)),o.filter((e=>t.includes(e[0])&&n.includes(e[1]))))}function b(e){return(0,s.pipe)(o.some(e.split("|")),o.filter((e=>3===e.length)),o.filter((e=>t.includes(e[0])&&n.includes(e[1]))),o.filterMap((e=>(0,s.pipe)(parseInt(e[2],10),(t=>Number.isNaN(t)?o.none:o.some([e[0],e[1],t]))))))}function C(e,t,n){var r,i,o,a;return{extension:{completed:t.some((t=>t[0]===e&&"extension"===t[1])),lastSeen:null===(r=n.find((t=>t[0]===e&&"extension"===t[1])))||void 0===r?void 0:r[2]},editor:{completed:t.some((t=>t[0]===e&&"editor"===t[1])),lastSeen:null===(i=n.find((t=>t[0]===e&&"editor"===t[1])))||void 0===i?void 0:i[2]},llamaMac:{completed:t.some((t=>t[0]===e&&"llamaMac"===t[1])),lastSeen:null===(o=n.find((t=>t[0]===e&&"llamaMac"===t[1])))||void 0===o?void 0:o[2]},llamaWin:{completed:t.some((t=>t[0]===e&&"llamaWin"===t[1])),lastSeen:null===(a=n.find((t=>t[0]===e&&"llamaWin"===t[1])))||void 0===a?void 0:a[2]}}}e.emptyClientStep={completed:!1,lastSeen:void 0},function(e){function t(e){return t=>e(t.extension)||e(t.editor)||e(t.llamaMac)||e(t.llamaWin)}e.anyClient=t,e.anyClientCompleted=t((e=>e.completed))}(m=e.Step||(e.Step={})),e.emptyStep={extension:e.emptyClientStep,llamaMac:e.emptyClientStep,llamaWin:e.emptyClientStep,editor:e.emptyClientStep},e.codec=new u.ZU("UpstreamOnboarding",(e=>g.is(e)),((e,t)=>(0,s.pipe)(g.validate(e,t),i.map((e=>{const t=(0,s.pipe)(e.completed||[],a.Tj(y),a.oE),n=(0,s.pipe)(e.lastSeen||[],a.Tj(b),a.oE);return{initial:C("initial",t,n),initialBTS:C("initialBTS",t,n),prompts:C("prompts",t,n),review:C("review",t,n),rewrite:C("rewrite",t,n),knowledgeHub:C("knowledgeHub",t,n),references:C("references",t,n),history:C("history",t,n)}})))),(e=>({completed:(0,s.pipe)(Object.entries(e),a.cy((([e,t])=>function(e,t){return(0,s.pipe)(Object.entries(t),a.cy((([t,n])=>n.completed?[r(e,t)]:[])))}(e,t)))),lastSeen:(0,s.pipe)(Object.entries(e),a.cy((([e,t])=>function(e,t){return(0,s.pipe)(Object.entries(t),a.cy((([t,n])=>n.lastSeen?[l(e,t,n.lastSeen)]:[])))}(e,t))))}))),e.decode=function(t){return(0,s.pipe)(decodeURIComponent(t),(n=>{try{const t=JSON.parse(n);return e.codec.decode(t)}catch(e){return i.left(`Cannot decode raw onboarding state: ${t}.`)}}),i.getOrElse((()=>e.State.empty)))},e.encode=function(t){return encodeURIComponent(JSON.stringify(e.codec.encode(t)))},function(t){t.empty={initial:e.emptyStep,initialBTS:e.emptyStep,prompts:e.emptyStep,review:e.emptyStep,rewrite:e.emptyStep,knowledgeHub:e.emptyStep,references:e.emptyStep,history:e.emptyStep},t.toClientState=function(e,t){return{initial:e.initial[t],initialBTS:e.initialBTS[t],prompts:e.prompts[t],review:e.review[t],rewrite:e.rewrite[t],knowledgeHub:e.knowledgeHub[t],references:e.references[t],history:e.history[t]}},t.patch=function(e,t){return n=>({initial:Object.assign(Object.assign({},n.initial),{[t]:e.initial}),initialBTS:Object.assign(Object.assign({},n.initialBTS),{[t]:e.initialBTS}),prompts:Object.assign(Object.assign({},n.prompts),{[t]:e.prompts}),review:Object.assign(Object.assign({},n.review),{[t]:e.review}),rewrite:Object.assign(Object.assign({},n.rewrite),{[t]:e.rewrite}),knowledgeHub:Object.assign(Object.assign({},n.knowledgeHub),{[t]:e.knowledgeHub}),references:Object.assign(Object.assign({},n.references),{[t]:e.references}),history:Object.assign(Object.assign({},n.history),{[t]:e.history})})}}(_=e.State||(e.State={})),function(t){t.empty={initial:e.emptyClientStep,initialBTS:e.emptyClientStep,prompts:e.emptyClientStep,review:e.emptyClientStep,rewrite:e.emptyClientStep,knowledgeHub:e.emptyClientStep,references:e.emptyClientStep,history:e.emptyClientStep}}(v=e.ClientState||(e.ClientState={}))}(r||(r={}))},65772:(e,t,n)=>{"use strict";n.d(t,{G:()=>s});var r=n(83531),i=n(19147),o=n(23988),a=n(1059),s=function e(t,n){var s=this;(0,i._)(this,e),(0,o._)(this,"_innerWSHandler",void 0),(0,o._)(this,"accessToken",void 0),(0,o._)(this,"onConnecting",void 0),(0,o._)(this,"onConnect",void 0),(0,o._)(this,"onDisconnect",void 0),(0,o._)(this,"onMessage",void 0),(0,o._)(this,"connect",void 0),(0,o._)(this,"isDisconnected",void 0),this._innerWSHandler=t,this.accessToken=n,this.onConnecting=function(e){return s._innerWSHandler.onConnecting(e),s},this.onConnect=function(e){return s._innerWSHandler.onConnect(e),s},this.onDisconnect=function(e){return s._innerWSHandler.onDisconnect(e),s},this.onMessage=function(e){return s._innerWSHandler.onMessage(e),s};var u,c=this;this.connect=(u=(0,r._)((function(e){var t,n,r;return(0,a.YH)(this,(function(i){switch(i.label){case 0:return"function"!=typeof c.accessToken?[3,2]:[4,c.accessToken()];case 1:return n=i.sent(),[3,3];case 2:n=void 0,i.label=3;case 3:return void 0!==(t=n)&&((r=new URL(e)).searchParams.append("accessToken",t),e=r.toString()),[2,c._innerWSHandler.connect(e)]}}))})),function(e){return u.apply(this,arguments)}),this.isDisconnected=function(){return s._innerWSHandler.isDisconnected()}}},33060:(e,t,n)=>{"use strict";var r;n.d(t,{b:()=>r}),function(e){e.paypal="paypal",e.creditCard="creditCard"}(r||(r={}))},34110:(e,t,n)=>{"use strict";n.d(t,{w:()=>r});var r=4194304},36465:(e,t,n)=>{"use strict";n.d(t,{h:()=>r});var r,i=n(39695),o=n(19147),a=n(23988),s=n(29573),u=n(32557),c=n(5574),l=n(86562),d=n(34110),p=n(52138),h=n(58526);!function(e){var t;!function(e){e[e.NOT_FOUND=404]="NOT_FOUND",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS"}(t=e.HttpCodes||(e.HttpCodes={})),e.CLOSED_ERROR=new h.v0({status:"closed",message:"client was closed from client side"});var n=function(e){(0,s._)(r,e);var n=(0,u._)(r);function r(e){var s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"too_big",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Document is too big",l=arguments.length>3?arguments[3]:void 0;return(0,o._)(this,r),s=n.call(this,{code:t.BAD_REQUEST,message:c,url:l,status:u}),(0,a._)((0,i._)(s),"maxSizeLimit",void 0),(0,a._)((0,i._)(s),"name",void 0),s.maxSizeLimit=e,s.name="FileSizeOutOfRangeError",s}return r}(c.Hl);e.FileSizeOutOfRangeError=n;var r=function(e){(0,s._)(r,e);var n=(0,u._)(r);function r(){var e,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"empty_file",u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Document is empty",c=arguments.length>2?arguments[2]:void 0;return(0,o._)(this,r),e=n.call(this,{code:t.BAD_REQUEST,message:u,url:c,status:s}),(0,a._)((0,i._)(e),"name","EmptyFileError"),e}return r}(c.Hl);e.EmptyFileError=r;var f=function(e){(0,s._)(r,e);var n=(0,u._)(r);function r(){var e,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not_found",u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Document doesn't exist",c=arguments.length>2?arguments[2]:void 0;return(0,o._)(this,r),e=n.call(this,{code:t.NOT_FOUND,message:u,url:c,status:s}),(0,a._)((0,i._)(e),"name","DocumentNotFoundError"),e}return r}(c.Hl);e.DocumentNotFoundError=f;var g=function(e){(0,s._)(r,e);var n=(0,u._)(r);function r(){var e,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error",u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user not found",c=arguments.length>2?arguments[2]:void 0;return(0,o._)(this,r),e=n.call(this,{code:t.UNAUTHORIZED,message:u,url:c,status:s}),(0,a._)((0,i._)(e),"name","UnauthorizedError"),e}return r}(c.Hl);e.UnauthorizedError=g;var m=function(e){(0,s._)(r,e);var n=(0,u._)(r);function r(e){var s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bad_type",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Unsupported file type",l=arguments.length>3?arguments[3]:void 0;return(0,o._)(this,r),s=n.call(this,{code:t.BAD_REQUEST,message:c,url:l,status:u}),(0,a._)((0,i._)(s),"originalFilename",void 0),(0,a._)((0,i._)(s),"name",void 0),s.originalFilename=e,s.name="UnsupportedFileTypeError",s}return r}(c.Hl);e.UnsupportedFileTypeError=m;var _=function(e){(0,s._)(r,e);var n=(0,u._)(r);function r(){var e,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error",u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Document with tracked changes is not supported",c=arguments.length>2?arguments[2]:void 0;return(0,o._)(this,r),e=n.call(this,{code:t.BAD_REQUEST,message:u,url:c,status:s}),(0,a._)((0,i._)(e),"name","TrackedChangesIsUnsupported"),e}return r}(c.Hl);e.TrackedChangesIsUnsupported=_;var v=function(e){(0,s._)(r,e);var n=(0,u._)(r);function r(e){var s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Text extracion failed",l=arguments.length>3?arguments[3]:void 0;return(0,o._)(this,r),s=n.call(this,{code:t.BAD_REQUEST,message:c,url:l,status:u}),(0,a._)((0,i._)(s),"originalFilename",void 0),(0,a._)((0,i._)(s),"name",void 0),s.originalFilename=e,s.name="TextExtractionError",s}return r}(c.Hl);e.TextExtractionError=v;var y=function(e){(0,s._)(r,e);var n=(0,u._)(r);function r(){var e,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error",u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Too many requests",c=arguments.length>2?arguments[2]:void 0;return(0,o._)(this,r),e=n.call(this,{code:t.TOO_MANY_REQUESTS,message:u,url:c,status:s}),(0,a._)((0,i._)(e),"name","TooManyRequestsError"),e}return r}(c.Hl);e.TooManyRequestsError=y;var b=function(e){(0,s._)(n,e);var t=(0,u._)(n);function n(e){var r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"connect_error",c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Cannot connect";return(0,o._)(this,n),r=t.call(this,{code:s,message:c,url:e,status:u}),(0,a._)((0,i._)(r),"name","ConnectionError"),r}return n}(c.Hl);e.ConnectionError=b;var C=function(e){(0,s._)(n,e);var t=(0,u._)(n);function n(e){var r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"disconnected",u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Cannot connect to DOX",c=arguments.length>3?arguments[3]:void 0;return(0,o._)(this,n),r=t.call(this,{status:s,message:u,code:e,url:c}),(0,a._)((0,i._)(r),"name","WSDisconnectedOnInitError"),r}return n}(h.v0);e.WSDisconnectedOnInitError=C;var S=function(e){(0,s._)(n,e);var t=(0,u._)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"too_big",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Message is too big, server rejected it",u=arguments.length>2?arguments[2]:void 0;return(0,o._)(this,n),e=t.call(this,{status:r,message:s,code:p.C.WsCodes.TOO_BIG,url:u}),(0,a._)((0,i._)(e),"name","WSMessageIsTooBigError"),e}return n}(h.v0);e.WSMessageIsTooBigError=S;var E=function(e){(0,s._)(n,e);var t=(0,u._)(n);function n(e,r,s){var u,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Disconnected after multiple retries",l=arguments.length>4?arguments[4]:void 0;return(0,o._)(this,n),u=t.call(this,{status:s,message:c,code:r,url:l}),(0,a._)((0,i._)(u),"retriesMade",void 0),u.retriesMade=e,u}return n}(h.v0);e.WSDisconnectedAfterMultipleRetries=E;var T=function(e){(0,s._)(n,e);var t=(0,u._)(n);function n(e){return(0,o._)(this,n),t.call(this,{code:p.C.WsCodes.GOING_AWAY,status:"closed",message:"timeout",url:e})}return n}(h.v0);e.WSGoingAway=T;var O=function(e){(0,s._)(n,e);var t=(0,u._)(n);function n(e,r){var s;return(0,o._)(this,n),s=t.call(this,{status:"closed",message:r,code:e}),(0,a._)((0,i._)(s),"name","WSNotRetryableError"),s}return n}(h.v0);e.WSNotRetryableError=O,e.doxErrorMapper=function(e,t,i){var o={};try{o=JSON.parse(e)}catch(e){o=(0,l.Cb)(e)?{info:"unknown",status:e.message}:{info:"unknown",status:""}}switch(o.info){case"too_big":return new n(d.w,o.status,o.info,t.url);case"empty_file":return new r(o.status,o.info,t.url);case"document not found":return new f(o.status,o.info,t.url);case"user not found":return new g(o.status,o.info,t.url);case"tracked":return new _(o.status,o.info,t.url);case"too many requests":return new y(o.status,o.info,t.url);default:return c.dj.mapToHTTPError(e,t,i)}}}(r||(r={}))},71937:(e,t,n)=>{"use strict";n.d(t,{DG:()=>r,V$:()=>f,sV:()=>i});var r,i,o=n(83531),a=n(19147),s=n(6922),u=n(23988),c=n(1059),l=n(69063),d=n(12486),p=n(69545),h=n(52138);!function(e){e[e.DISCONNECTED=0]="DISCONNECTED",e[e.IDLE=1]="IDLE",e[e.CONNECTING=2]="CONNECTING",e[e.INITIALIZING=3]="INITIALIZING",e[e.CONNECTED=4]="CONNECTED",e[e.READY=5]="READY",e[e.WAIT_ACK=6]="WAIT_ACK",e[e.CLOSED=7]="CLOSED"}(r||(r={})),function(e){e[e.CONNECT=0]="CONNECT",e[e.CONNECTED=1]="CONNECTED",e[e.SCHEDULE_RECONNECT=2]="SCHEDULE_RECONNECT",e[e.DISCONNECT=3]="DISCONNECT",e[e.IDLE_DISCONNECT=4]="IDLE_DISCONNECT",e[e.CLOSE=5]="CLOSE",e[e.INITIALIZE=6]="INITIALIZE",e[e.INITIALIZED=7]="INITIALIZED",e[e.SEND=8]="SEND",e[e.ACK=9]="ACK",e[e.RESET=10]="RESET"}(i||(i={}));var f=function(){function e(t,n){var o=this;(0,a._)(this,e),(0,u._)(this,"_originalUrl",void 0),(0,u._)(this,"_log",void 0),(0,u._)(this,"_fsm",void 0),(0,u._)(this,"_conn",void 0),(0,u._)(this,"_timeout",void 0),(0,u._)(this,"_error",void 0),(0,u._)(this,"_msgCount",void 0),(0,u._)(this,"_initHandler",void 0),(0,u._)(this,"_initFailHandler",void 0),this._originalUrl=t,this._log=l.Bx.Logging.getLogger("coreclients.remote",d.$.DEBUG),this._msgCount=0,n.onConnecting((function(){return o._handleConnecting()})).onConnect((function(e){return o._handleConnect(e)})).onDisconnect((function(e){return o._msgCount=0,o._handleDisconnect(e)})).onMessage((function(e,t){o._msgCount++,o._handleMessage(t)})),this._fsm=new p.Z3("remote",r.DISCONNECTED,r.CLOSED).from(r.DISCONNECTED,r.IDLE).to(r.CONNECTING).on(i.CONNECT).from(r.CONNECTING).to(r.CONNECTED).on(i.CONNECTED).from(r.CONNECTED).to(r.INITIALIZING).on(i.INITIALIZE).from(r.INITIALIZING).to(r.READY).on(i.INITIALIZED).from(r.CONNECTED,r.CONNECTING,r.INITIALIZING,r.READY).to(r.DISCONNECTED).on(i.DISCONNECT).from(r.CONNECTED,r.CONNECTING,r.INITIALIZING,r.READY,r.DISCONNECTED).to(r.CLOSED).on(i.CLOSE),this._log.isEnabled(d.$.TRACE)&&this._fsm.verbose(r,i)}return(0,s._)(e,[{key:"getWsUrl",value:function(){return this._originalUrl}},{key:"init",value:function(e,t){this._log.debug("init"),this._initHandler=e,this._initFailHandler=t}},{key:"close",value:function(e,t){var n=this;return this._log.debug("close(".concat(r[this._fsm.current],")"),{code:e,reason:t}),this._fsm.event(i.CLOSE,{code:e,reason:t}).then((function(e){e&&clearTimeout(n._timeout)}))}},{key:"isClosed",value:function(){return this._fsm.is(r.CLOSED)}},{key:"_handleConnecting",value:function(){var e=this;return(0,o._)((function(){return(0,c.YH)(this,(function(t){switch(t.label){case 0:return e._log.debug("Connecting"),[4,e._fsm.event(i.CONNECT)];case 1:return t.sent()||e._log.error("Can not enter CONNECTING state",{fsmState:r[e._fsm.current]}),[2]}}))}))()}},{key:"_handleConnect",value:function(e){var t=this;return(0,o._)((function(){return(0,c.YH)(this,(function(n){switch(n.label){case 0:return t._log.debug("Connected"),[4,t._fsm.event(i.CONNECTED,e)];case 1:return n.sent()?(t._conn=e,[3,4]):[3,2];case 2:return t._log.error("Can not enter CONNECTED state",{fsmState:r[t._fsm.current]}),[4,e.close({reason:"Can not enter CONNECTED state",code:h.C.WsCodes.NORMAL_CLOSURE})];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))()}},{key:"_handleDisconnect",value:function(e){var t=this;return(0,o._)((function(){var n;return(0,c.YH)(this,(function(o){switch(o.label){case 0:return t._log.debug("Disconnected",e.reason),t._disconnectHandler(e),n=t.isClosed()?d.$.WARN:d.$.ERROR,[4,t._fsm.event(i.DISCONNECT,e)];case 1:return o.sent()||t._log.log(n,"Can not enter DISCONNECTED state",{reason:e,fsmState:r[t._fsm.current]}),[2]}}))}))()}},{key:"_canSend",value:function(){return!this._fsm.is(r.DISCONNECTED,r.CONNECTING,r.CLOSED)}}]),e}()},92422:(e,t,n)=>{"use strict";n.d(t,{b:()=>L,N:()=>G});var r,i=n(39695),o=n(83531),a=n(19147),s=n(6922),u=n(23988),c=n(29573),l=n(10334),d=n(17171),p=n(32557),h=n(1059),f=n(83293),g=n(30040),m=n(63336),_=n(10821),v=n(36840),y=n(29052),b=n(44297),C=n(86562),S=n(58889),E=n(55172),T=n(34717),O=n(12486),w=n(33060),I=n(88105),x=n(28986),P=n(49004),R=n(52138),N=n(91242),k=n(58526),M=n(36465);!function(e){var t=function e(t){(0,a._)(this,e),(0,u._)(this,"id",void 0),(0,u._)(this,"action",void 0),this.id=t};e.Base=t;var n=function(e){(0,c._)(n,e);var t=(0,p._)(n);function n(e,r,o,s,c,l){var d;return(0,a._)(this,n),d=t.call(this,e),(0,u._)((0,i._)(d),"id",void 0),(0,u._)((0,i._)(d),"cl",void 0),(0,u._)((0,i._)(d),"rev",void 0),(0,u._)((0,i._)(d),"doc_len",void 0),(0,u._)((0,i._)(d),"deltas",void 0),(0,u._)((0,i._)(d),"revAfterApply",void 0),(0,u._)((0,i._)(d),"op",void 0),d.id=e,d.cl=r,d.rev=o,d.doc_len=s,d.deltas=c,d.revAfterApply=l,d.op="patch",d}return n}(t);e.PatchMessage=n;var r=function(e){(0,c._)(n,e);var t=(0,p._)(n);function n(e,r){var o;return(0,a._)(this,n),o=t.call(this,e),(0,u._)((0,i._)(o),"id",void 0),(0,u._)((0,i._)(o),"vsn",void 0),(0,u._)((0,i._)(o),"op",void 0),o.id=e,o.vsn=r,o.op="vsn",o}return n}(t);e.VersionMessage=r;var o=function(e){(0,c._)(n,e);var t=(0,p._)(n);function n(e,r,o,s){var c;return(0,a._)(this,n),c=t.call(this,e),(0,u._)((0,i._)(c),"id",void 0),(0,u._)((0,i._)(c),"title",void 0),(0,u._)((0,i._)(c),"errors",void 0),(0,u._)((0,i._)(c),"extra_params",void 0),(0,u._)((0,i._)(c),"op",void 0),c.id=e,c.title=r,c.errors=o,c.extra_params=s,c.op="update_document_metadata",c}return n}(t);e.UpdateDocumentMetadata=o;var s=function(e){(0,c._)(n,e);var t=(0,p._)(n);function n(e){var r;return(0,a._)(this,n),r=t.call(this,e),(0,u._)((0,i._)(r),"id",void 0),(0,u._)((0,i._)(r),"op",void 0),r.id=e,r.op="proofit_turnaround_options",r}return n}(t);e.ProofitOptionsMessage=s;var l=function(e){(0,c._)(n,e);var t=(0,p._)(n);function n(e,r,o,s,c){var l,d=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return(0,a._)(this,n),l=t.call(this,e),(0,u._)((0,i._)(l),"id",void 0),(0,u._)((0,i._)(l),"turnaround",void 0),(0,u._)((0,i._)(l),"clarity",void 0),(0,u._)((0,i._)(l),"userInputs",void 0),(0,u._)((0,i._)(l),"priceOfferId",void 0),(0,u._)((0,i._)(l),"payWithCredits",void 0),(0,u._)((0,i._)(l),"op",void 0),l.id=e,l.turnaround=r,l.clarity=o,l.userInputs=s,l.priceOfferId=c,l.payWithCredits=d,l.op="proofit_create_job",l}return n}(t);e.ProofitPlaceOrderMessage=l;var d=function(e){(0,c._)(n,e);var t=(0,p._)(n);function n(e,r,o,s,c){var l,d=arguments.length>5&&void 0!==arguments[5]&&arguments[5],p=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0;return(0,a._)(this,n),l=t.call(this,e),(0,u._)((0,i._)(l),"id",void 0),(0,u._)((0,i._)(l),"turnaround",void 0),(0,u._)((0,i._)(l),"clarity",void 0),(0,u._)((0,i._)(l),"userInputs",void 0),(0,u._)((0,i._)(l),"priceOfferId",void 0),(0,u._)((0,i._)(l),"payWithCredits",void 0),(0,u._)((0,i._)(l),"nonce",void 0),(0,u._)((0,i._)(l),"billingZip",void 0),(0,u._)((0,i._)(l),"op",void 0),l.id=e,l.turnaround=r,l.clarity=o,l.userInputs=s,l.priceOfferId=c,l.payWithCredits=d,l.nonce=p,l.billingZip=h,l.op="proofit_create_job",l}return n}(t);e.ProofitPlacePaymentOrderMessage=d;var h=function(e){(0,c._)(n,e);var t=(0,p._)(n);function n(e){var r;return(0,a._)(this,n),r=t.call(this,e),(0,u._)((0,i._)(r),"id",void 0),(0,u._)((0,i._)(r),"op",void 0),r.id=e,r.op="proofit_statistics",r}return n}(t);e.ProofitStatisticsMessage=h;var f=function(e){(0,c._)(n,e);var t=(0,p._)(n);function n(e,r){var o;return(0,a._)(this,n),o=t.call(this,e),(0,u._)((0,i._)(o),"id",void 0),(0,u._)((0,i._)(o),"token",void 0),(0,u._)((0,i._)(o),"op",void 0),o.id=e,o.token=r,o.op="token_response",o}return n}(t);e.TokenResponse=f}(r||(r={}));var j,A=n(91817),D=n(56610);!function(e){e.isChange=function(e){return"change"===e.kind},e.isCmd=function(e){return"cmd"===e.kind},e.isMeta=function(e){return"meta"===e.kind}}(j||(j={}));var L,U=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];(0,a._)(this,e),(0,u._)(this,"_acceptHandler",void 0),(0,u._)(this,"_dropHandler",void 0),(0,u._)(this,"_changes",void 0),(0,u._)(this,"_staging",void 0),(0,u._)(this,"_queuedId",void 0),this._acceptHandler=t,this._dropHandler=n,this._changes=r,this._staging=!1,this._queuedId=0}return(0,s._)(e,[{key:"pushChanges",value:function(e){var t=this,n=this.isEmpty||this._staging&&1===this._changes.length?b.none:(0,m.pipe)(this._tail(),b.filter(j.isChange));return(0,m.pipe)(n,b.fold((function(){return t._enqueueChanges(P.zV.split(e,5e3))}),(function(n){var r=n.change.compose(e),i=(0,D._)(P.zV.split(r,5e3)),o=i[0],a=i.slice(1);if(t._replaceChange(t._changes.length-1,o),o.isEmpty){var s=t._changes.pop();setTimeout((function(){return t._acceptHandler(s)}),0)}return[n.id].concat(t._enqueueChanges(a))})))}},{key:"pushMeta",value:function(e){var t=this,n=this.isEmpty||this._staging&&1===this._changes.length?b.none:(0,m.pipe)(this._tail(),b.filter(j.isMeta));return(0,m.pipe)(n,b.fold((function(){var n=t._queuedId++;return t._changes.push({kind:"meta",meta:e,id:n}),n}),(function(t){return Object.assign(t.meta,e),t.id})))}},{key:"pushCommand",value:function(e){var t=this._queuedId++;return this._changes.push({kind:"cmd",cmd:e,id:t}),t}},{key:"isStaging",get:function(){return this._staging}},{key:"isEmpty",get:function(){return 0===this._changes.length}},{key:"size",get:function(){return this._changes.length}},{key:"poll",value:function(){var e=this;(0,C.V1)(!this._staging,"Should not be in staging mode");var t=b.fromNullable(this._changes[0]);return(0,m.pipe)(t,b.fold(v.Yi,(function(){return e._staging=!0}))),t}},{key:"pop",value:function(){(0,C.V1)(!this._staging,"Should not be in staging mode");var e=b.fromNullable(this._changes.shift());return(0,m.pipe)(e,b.fold(v.Yi,this._acceptHandler)),e}},{key:"unstage",value:function(){(0,C.V1)(this._staging,"Should be in staging mode"),(0,C.V1)(void 0!==this._changes[0],"Staging change should exist"),this._staging=!1}},{key:"ack",value:function(){this.unstage(),this.pop()}},{key:"transformChangeAgainstQueue",value:function(e){var t=this;return this._changes.reduce((function(e,n,r){if(j.isChange(n)){var i=n.change,o=i.transform(e,!1);return t._replaceChange(r,o),e.transform(i)}return e}),e)}},{key:"drop",value:function(e,t){if(!this.isEmpty){var n=(0,A._)(void 0===t?[this._changes,[]]:E.jB(this._changes,(function(e){return e.kind===t})),2),r=n[0],i=n[1];this._changes=i,r.length>0&&this._dropHandler({messages:r,reason:e})}}},{key:"toJSON",value:function(){return{changes:this._changes}}},{key:"_tail",value:function(){return b.fromNullable(this._changes[this._changes.length-1])}},{key:"_enqueueChanges",value:function(e){var t=this;return e.map((function(e){var n=t._queuedId++;return t._changes.push({kind:"change",change:e,id:n}),n}))}},{key:"_replaceChange",value:function(e,t){var n=this._changes[e];(0,C.V1)(j.isChange(n),"queued change should exist"),n.change=t}}]),e}(),H=n(71937),B=n(32062),G=function(e){(0,c._)(n,e);var t=(0,p._)(n);function n(e,o,s){var c,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:L.Queue.create({}),d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:500,p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:15e3;return(0,a._)(this,n),c=t.call(this,e,o),(0,u._)((0,i._)(c),"_changesQueue",void 0),(0,u._)((0,i._)(c),"_sendDelay",void 0),(0,u._)((0,i._)(c),"_requestTimeout",void 0),(0,u._)((0,i._)(c),"_nextId",void 0),(0,u._)((0,i._)(c),"_revision",void 0),(0,u._)((0,i._)(c),"_clientId",void 0),(0,u._)((0,i._)(c),"_forceSend",void 0),(0,u._)((0,i._)(c),"_handler",void 0),(0,u._)((0,i._)(c),"_proofitPlansRequester",void 0),(0,u._)((0,i._)(c),"_proofitStatisticsRequester",void 0),(0,u._)((0,i._)(c),"_proofitCreateJobRequester",void 0),(0,u._)((0,i._)(c),"getProofitPlans",void 0),(0,u._)((0,i._)(c),"getProofitStatistics",void 0),(0,u._)((0,i._)(c),"_disconnectHandler",void 0),(0,u._)((0,i._)(c),"_resolvePendingFlushPromise",void 0),(0,u._)((0,i._)(c),"_flushPromise",void 0),c._changesQueue=l,c._sendDelay=d,c._requestTimeout=p,c._nextId=1,c._revision=-1,c._clientId=-1,c._forceSend=!1,c._proofitPlansRequester=new N.Wo(c._requestTimeout,"DOX.ProofitPlans"),c._proofitStatisticsRequester=new N.Wo(c._requestTimeout,"DOX.ProofitStatistics"),c._proofitCreateJobRequester=new N.Wo(c._requestTimeout,"DOX.ProofitCreateJob"),c.getProofitPlans=c._startRequestWatch(c._proofitPlansRequester,c._sendInbandCommand((function(e){return new r.ProofitOptionsMessage(e)}))),c.getProofitStatistics=c._startRequestWatch(c._proofitStatisticsRequester,c._sendInbandCommand((function(e){return new r.ProofitStatisticsMessage(e)}))),c._disconnectHandler=function(){c._changesQueue.isStaging&&(c._log.warn("Got disconnect while trying send changes"),c._changesQueue.unstage()),[c._proofitCreateJobRequester,c._proofitPlansRequester,c._proofitStatisticsRequester].forEach((function(e){return e.clear("disconnect")}))},c._resolvePendingFlushPromise=function(e){return(0,g.constVoid)()},c._handler=new L.DefaultHandler(s),c._fsm.from(H.DG.READY).to(H.DG.WAIT_ACK).on(H.sV.SEND).from(H.DG.WAIT_ACK).to(H.DG.READY).on(H.sV.ACK,H.sV.RESET).from(H.DG.WAIT_ACK).to(H.DG.DISCONNECTED).on(H.sV.DISCONNECT).from(H.DG.WAIT_ACK).to(H.DG.CLOSED).on(H.sV.CLOSE).on(H.DG.READY,(function(e){return c._trySendAfterTimeout()})).on(H.DG.CLOSED,(function(e){var t=Boolean(e.args)?e.args:null,n=t?new k.v0({code:t.code,status:M.h.CLOSED_ERROR.status,message:Boolean(t.reason)?t.reason:M.h.CLOSED_ERROR.message}):M.h.CLOSED_ERROR;c._failInit(n),c._changesQueue.drop("close")})).on(H.DG.DISCONNECTED,(function(){c._changesQueue.drop("disconnect","cmd")})),(0,v.hJ)("doxReset",(function(e){if(void 0===e)throw new Error("provide text!");c._handleResetMessage({op:"reset",id:c._nextId++,doc:(new x.R).insert(e),vsn:c._revision+10,clientId:c._clientId})})),(0,v.hJ)("doxState",(0,i._)(c)),(0,v.hJ)("closeDoxSocket",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1?arguments[1]:void 0;c._conn._ws.close(e,t)})),c}return(0,s._)(n,[{key:"_startRequestWatch",value:function(e,t){return(0,m.pipe)(t,y.AU((function(e){return y.kb(e)}),(function(t){return function(){return e.watchRequest(t)}})))}},{key:"isInitialRevision",get:function(){return 1===this._revision}},{key:"fsmState",get:function(){return H.DG[this._fsm.current]}},{key:"placeProofitOrder",value:function(e,t){var n=_.c.PlanType[e.turnaround],i=e.tier===_.c.PlanTier.Clarity,o={dialect:b.toUndefined(e.userInputs.dialect),quotationType:b.toUndefined(e.userInputs.quotationType),spaceType:b.toUndefined(e.userInputs.spaceType),noteToEditor:b.toUndefined(e.userInputs.noteToEditor)},a=e.priceOfferId,s=e.payWithCredits,u=(0,m.pipe)(t,b.fold((function(){return function(e){return new r.ProofitPlaceOrderMessage(e,n,i,o,a,s)}}),(function(e){if(e.kind===w.b.creditCard){var t=e;return function(e){return new r.ProofitPlacePaymentOrderMessage(e,n,i,o,a,s,t.nonce,t.postalCode)}}if(e.kind===w.b.paypal){var u=e;return function(e){return new r.ProofitPlacePaymentOrderMessage(e,n,i,o,a,s,u.nonce)}}return(0,C.xb)(e)})));return this._startRequestWatch(this._proofitCreateJobRequester,this._sendInbandCommand(u))}},{key:"pushChanges",value:function(e){var t=this;return y.oF((function(){return t._pushChanges(e)}))}},{key:"updateMetadata",value:function(e){var t=this;return y.oF((function(){return t._updateMetadata(e)}))}},{key:"getWsUrl",value:function(){if(-1===this._revision)return this._originalUrl;var e=new URL(this._originalUrl);return e.searchParams.append("sinceVersion",String(this._revision)),e.toString()}},{key:"_handleMessage",value:function(e){var t=this;return(0,o._)((function(){var n;return(0,h.YH)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t._messageHandler(e)];case 1:return r.sent(),[3,3];case 2:return n=r.sent(),t._log.warn("Fail on processing incoming message",n),t._failInit(n),t._conn.close({code:R.C.WsCodes.CLIENT_MALFUNCTION,reason:"Unexpected failure on: ".concat((0,C.Cb)(n)?n.message:"")}),[3,3];case 3:return[2]}}))}))()}},{key:"_messageHandler",value:function(e){var t=this;return(0,o._)((function(){return(0,h.YH)(this,(function(n){switch(n.label){case 0:switch(t._log.isEnabled(O.$.TRACE)&&t._log.trace("Message <<<",{message:JSON.stringify(e)}),e.op){case"init":return[3,1];case"patch":return[3,3];case"reset":return[3,9];case"vsn":return[3,11];case"mongodb_change":return[3,12];case"document_metadata_changed":return[3,13];case"proofit_turnaround_options":return[3,14];case"proofit_create_job":return[3,15];case"proofit_statistics":return[3,16];case"token_request":return[3,17]}return[3,19];case 1:return[4,t._handleInitMessage(e)];case 2:return n.sent(),[3,20];case 3:return t._fsm.is(H.DG.READY)||t._fsm.is(H.DG.WAIT_ACK)&&t._clientId===e.cl?[4,t._handlePatchMessage(e)]:[3,5];case 4:return n.sent(),[3,8];case 5:return t._fsm.is(H.DG.WAIT_ACK)?(t._log.warn("got change while waiting ack for other change"),[4,t._handlePatchMessage(e)]):[3,7];case 6:return n.sent(),[3,8];case 7:t._log.warn("got unexpected patch message",{fsmState:H.DG[t._fsm.current]}),n.label=8;case 8:return[3,20];case 9:return[4,t._handleResetMessage(e)];case 10:return n.sent(),[3,20];case 11:case 12:return[3,20];case 13:return t._handleMetaChangeMessage(e),[3,20];case 14:return(0,m.pipe)(_.c.processOptions((0,g.unsafeCoerce)(e)),S.fold((function(n){return t._proofitPlansRequester.onError(e.id,n)}),(function(n){return t._proofitPlansRequester.onValue(e.id,n)}))),[3,20];case 15:return t._proofitCreateJobRequester.onValue(e.id,_.c.parseCreateJobResult(e)),[3,20];case 16:return t._proofitStatisticsRequester.onValue(e.id,_.c.processStatistics(e)),[3,20];case 17:return[4,t._handleUpdateTokenRequest()];case 18:return n.sent(),[3,20];case 19:e.error||(t._log.warn("Unexpected message",{message:e}),t._failInit(e)),n.label=20;case 20:return[2]}}))}))()}},{key:"_handleInitMessage",value:function(e){var t=this;return(0,o._)((function(){var n,i,o,a,s;return(0,h.YH)(this,(function(u){switch(u.label){case 0:return[4,t._fsm.event(H.sV.INITIALIZE)];case 1:return u.sent()?(n=void 0!==e.deltas?e.deltas:[]).length>0?(t._log.debug("Got changes on init. Skipping reset"),i=E.qI(n.map((function(e){return e.deltas}))),o=n[0].doc_len,a=n[0].rev,[4,t._handlePatchMessage(new r.PatchMessage(-1,-1,a,o,i,e.vsn),e.doc_len)]):[3,3]:[3,5];case 2:u.sent(),u.label=3;case 3:return s=new x.R(e.doc),t._initHandler?(t._log.trace("calling _initHandler"),t._initHandler({initialDelta:P.lY.unsafeRes(s),remoteDocument:t,meta:L.Meta.parse(e)}),t._initHandler=null,t._initFailHandler=null,t._clear(e)):0===n.length&&e.vsn!==t._revision?(t._log.debug("Remote has unknown revision, goto reset"),t._handleResetMessage({id:-1,op:"reset",clientId:e.clientId,vsn:e.vsn,doc:s})):t._clear(e),t._log.trace("Init complete, going to INITIALIZED"),[4,t._fsm.event(H.sV.INITIALIZED)];case 4:return u.sent(),[3,5];case 5:return[2]}}))}))()}},{key:"inSync",get:function(){return this._changesQueue.isEmpty&&!this._changesQueue.isStaging}},{key:"isStable",value:function(e){return void 0!==e&&void 0===e.error&&this._msgCount>5}},{key:"_handlePatchMessage",value:function(e,t){var n=this;return(0,o._)((function(){var i,o,a,s,u;return(0,h.YH)(this,(function(c){switch(c.label){case 0:return(i=e.cl===n._clientId)?(n._log.trace("got patch from same client"),[4,n._fsm.event(H.sV.ACK)]):[3,2];case 1:return c.sent()?(n._log.trace("got ack for patch"),n._changesQueue.ack()):n._log.debug("got patch message from same client, but we are in unexpected state",{state:H.DG[n._fsm.current]}),[3,3];case 2:n._log.trace("got patch from other client"),(0,N.vA)(n._revision,e.rev,"incoming patch should be on known revision"),n._handler.changeHandler(n,P.lY.flush()),o=I.E.squash(e.deltas),a=P.lY.delta(new x.R(o),e.doc_len),void 0!==t&&(0,N.vA)(t,a.length+a.prevLen,"validated doc_len should match"),n._log.isEnabled(O.$.TRACE)&&!n._changesQueue.isEmpty&&n._log.trace("received incoming change, while has outgoing changes",JSON.stringify(a)),s=n._changesQueue.transformChangeAgainstQueue(a),a.prevLen!==s.prevLen&&(n._log.debug("incoming delta changed prev_len after transform on queue",{was:a.prevLen,now:s.prevLen}),n._log.trace("incoming delta transformed to",s)),n._handler.changeHandler(n,s),c.label=3;case 3:n._revision=i?e.rev:void 0===e.revAfterApply?e.rev+1:e.revAfterApply,c.label=4;case 4:return c.trys.push([4,6,,7]),[4,n._conn.send(new r.VersionMessage(n._nextId++,e.rev))];case 5:return c.sent(),[3,7];case 6:return u=c.sent(),n._log.debug("fail onsend vsn ack",u),[3,7];case 7:return[2]}}))}))()}},{key:"_handleResetMessage",value:function(e){var t=this;return(0,o._)((function(){var n;return(0,h.YH)(this,(function(r){switch(r.label){case 0:return t._log.warn("Got RESET message. currently in ".concat(H.DG[t._fsm.current])),(n=t._fsm.is(H.DG.READY))?[3,2]:[4,t._fsm.event(H.sV.RESET)];case 1:n=r.sent(),r.label=2;case 2:return n?(t._changesQueue.isStaging&&(t._log.debug("We got reset while trying send changed"),t._changesQueue.unstage()),t._changesQueue.drop("got reset"),t._clear(e),t._handler.changeHandler(t,P.lY.unsafeRes(new x.R(e.doc)))):t._log.warn("Can not enter reset state, currently in ".concat(H.DG[t._fsm.current])),[2]}}))}))()}},{key:"_handleMetaChangeMessage",value:function(e){this._changesQueue.drop("got incoming meta","meta");var t=L.Meta.parse(e);this._handler.metadataChangeHandler(this,t)}},{key:"_handleUpdateTokenRequest",value:function(){var e=this;this._log.debug("_handleUpdateTokenRequest");var t=f.of((0,g.constVoid)());return(0,m.pipe)(this._handler.updateTokenHandler,y.cy(b.fold((function(){return y.pG("Token is missing")}),(function(t){return(0,m.pipe)(e._sendInbandCommand((function(e){return new r.TokenResponse(e,t)})),y.Tj((function(){return"Token updated"})))}))),y.AU((function(n){return e._log.warn("Fail on update token request",n),t}),(function(n){return e._log.debug(n),t})))()}},{key:"_failInit",value:function(e){this._initFailHandler&&(this._log.trace("_failInit(".concat(H.DG[this._fsm.current],")")),this._initFailHandler(e),this._initHandler=null,this._initFailHandler=null)}},{key:"_clear",value:function(e){var t=e.vsn,n=e.clientId;this._log.trace("_clear: resetting client id ".concat(this._clientId," -> ").concat(n,", revision ").concat(this._revision," -> ").concat(t)),this._nextId=1,this._clientId=n,this._revision=t}},{key:"flush",value:function(){var e=this;if(this._log.trace("flush(".concat(H.DG[this._fsm.current],")")),this._changesQueue.isEmpty)return this._resolvePendingFlushPromise(),Promise.resolve();if(!this._flushPromise){var t,n=function(){e._flushPromise=void 0,e._forceSend=!1,e._resolvePendingFlushPromise=g.constVoid,t&&clearTimeout(t)};this._flushPromise=new Promise((function(n,r){e._forceSend=!0,e._resolvePendingFlushPromise=n,t=window.setTimeout((function(){return r(new N.MU("flush takes too long"))}),4e3)})).then(n,(function(e){throw n(),e})),Boolean(this._timeout)&&(clearTimeout(this._timeout),this._timeout=void 0,this._trySendAfterTimeout())}return this._flushPromise}},{key:"_trySendAfterTimeout",value:function(){var e=this;Boolean(this._timeout)||(this._timeout=window.setTimeout((function(){e._timeout=void 0,e._fsm.is(H.DG.READY)?e._changesQueue.isEmpty||e._changesQueue.isStaging?(e._changesQueue.isEmpty&&e._resolvePendingFlushPromise(),e._trySendAfterTimeout()):e._send().catch((function(t){return e._log.warn("unexpected error onsend",t)})):e._log.trace("_trySendAfterTimeout: not in READY, stopping send loop")}),this._changesQueue.size>1||this._forceSend?this._changesQueue.isStaging?250:0:this._sendDelay))}},{key:"_send",value:function(){var e=this;return(0,o._)((function(){var t;return(0,h.YH)(this,(function(n){switch(n.label){case 0:return[4,e._fsm.event(H.sV.SEND)];case 1:return n.sent()?(t=e._changesQueue.poll(),[4,(0,m.pipe)(t,b.map((r=(0,o._)((function(t){var n,r,i;return(0,h.YH)(this,(function(o){switch(o.label){case 0:n=j.isChange(t),r=e._createMessage(t),e._log.isEnabled(O.$.TRACE)&&e._log.trace("Message >>>",{message:JSON.stringify(r)}),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,e._conn.send(r)];case 2:return o.sent(),n?[3,4]:[4,e._fsm.event(H.sV.ACK)];case 3:o.sent()?e._changesQueue.ack():e._log.debug("can not do ack for non change msg because we are in unexpected state",{state:H.DG[e._fsm.current]}),o.label=4;case 4:return[3,6];case 5:return i=o.sent(),e._log.error("Got error on ws send: ".concat(JSON.stringify({error:i,connectionState:e._conn.state,fsmState:H.DG[e._fsm.current],queueSize:e._changesQueue.size,messageKind:t.kind},void 0,2))),[3,6];case 6:return[2]}}))})),function(e){return r.apply(this,arguments)})),b.getOrElse((function(){return Promise.resolve()})))]):[3,3];case 2:return n.sent(),[3,4];case 3:e._log.warn("we can not send"),n.label=4;case 4:return[2]}var r}))}))()}},{key:"_updateMetadata",value:function(e){return this._log.trace("_updateMetadata"),this._canSend()?S.right(this._changesQueue.pushMeta(e)):(this._log.debug("updateMetadata: cannot send, rejecting changes"),S.left(new N.Xb("Cannot send commands as WS connection is down")))}},{key:"_pushChanges",value:function(e){return this._log.trace("pushChanges: ".concat(e.kind)),P.lY.isDelta(e)?this._canSend()?S.right(this._changesQueue.pushChanges(e)):(this._log.debug("pushChanges: cannot send, rejecting changes"),S.left(new N.Xb("Cannot send commands as WS connection is down"))):P.lY.isReset(e)?S.left(new Error("Invalid change. Reset changes are not supported by dox")):S.right([])}},{key:"_sendInbandCommand",value:function(e){var t=this;return y.oF((function(){var n=e(t._nextId++);if(t._log.trace("_sendInbandCommand:",n.op),!t._canSend())return t._log.warn("_sendInbandCommand: cannot send, rejecting command",n.op),S.left(new N.Xb("Cannot send commands as WS connection is down"));var r=t._changesQueue.isEmpty;return t._changesQueue.pushCommand(n),r&&t._fsm.is(H.DG.READY)&&(t._log.trace("Q.isEmpty, sending command immidiately",n),t._send()),S.right(n.id)}))}},{key:"_createMessage",value:function(e){switch(e.kind){case"change":return this._createPatchMessage(e.change);case"meta":return this._createUpdateMetaMessage(e.meta);case"cmd":return e.cmd;default:return(0,C.xb)(e)}}},{key:"_createPatchMessage",value:function(e){return new r.PatchMessage(this._nextId++,this._clientId,this._revision,e.prevLen,[e.delta])}},{key:"_createUpdateMetaMessage",value:function(e){var t=e.title,n=e.errors,i=e.settings;return new r.UpdateDocumentMetadata(this._nextId++,t,n,void 0!==i?i.toJSON():void 0)}}],[{key:"getWsDocumentUrl",value:function(e,t){var n=void 0===t?"/documents/ws":"/documents/".concat(t,"/ws");return"".concat(e).concat(n)}}]),n}(H.V$);!function(e){var t,n;(e.Meta||(e.Meta={})).parse=function(e){var t=e.title,n=e.errors,r=e.extra_params,i=e.proofit,o={title:t,errors:n,settings:B.O.Holder.fromJSON(r),proofit:_.c.fromRaw(i)};return"init"===e.op?(0,d._)((0,l._)({},o),{isDemoDocument:Boolean(e.demo),createdAt:(0,m.pipe)(T.Local.parseDate(e.created_at),S.getOrElse((function(){return null}))),originalFilename:e.orig_filename}):o},e.DefaultHandler=function e(t){(0,a._)(this,e),(0,u._)(this,"_handler",void 0),(0,u._)(this,"changeHandler",void 0),(0,u._)(this,"metadataChangeHandler",void 0),(0,u._)(this,"connectHandler",void 0),(0,u._)(this,"disconnectHandler",void 0),(0,u._)(this,"updateTokenHandler",void 0),this._handler=t,this.changeHandler=this._handler.changeHandler||g.constVoid,this.metadataChangeHandler=this._handler.metadataChangeHandler||g.constVoid,this.connectHandler=this._handler.connectHandler||g.constVoid,this.disconnectHandler=this._handler.disconnectHandler||g.constVoid,this.updateTokenHandler=this._handler.updateTokenHandler||y.pG(b.none)},t=e.Queue||(e.Queue={}),n=function e(t){(0,a._)(this,e),(0,u._)(this,"_handler",void 0),(0,u._)(this,"acceptedMsgHandler",void 0),(0,u._)(this,"droppedMsgsHandler",void 0),this._handler=t,this.acceptedMsgHandler=this._handler.acceptedMsgHandler||function(){},this.droppedMsgsHandler=this._handler.droppedMsgsHandler||function(){}},t.DefaultHandler=n,t.create=function(e){var t=new n(e),r=t.acceptedMsgHandler,i=t.droppedMsgsHandler;return new U(r,i)}}(L||(L={}))},32062:(e,t,n)=>{"use strict";n.d(t,{O:()=>r});var r,i=n(19147),o=n(6922),a=n(23988),s=n(10334),u=n(63336),c=n(96797),l=n(44297),d=n(23121),p=n(58889),h=n(58193),f=n(36840),g=n(47370),m=n(22835),_=n(45887),v=n(30720);!function(e){var t=function(e){return e?{ContextualSpelling:{active:e.contextualSpelling},Enhancement:{active:e.enhancement},Grammar:{active:e.grammar},Plagiarism:{active:e.plagiarism},Punctuation:{active:e.punctuation},SentenceStructure:{active:e.sentenceStructure},Style:{active:e.style}}:null},n=function(e){return e&&r(e)?{contextualSpelling:e.ContextualSpelling.active,grammar:e.Grammar.active,sentenceStructure:e.SentenceStructure.active,punctuation:e.Punctuation.active,style:e.Style.active,enhancement:e.Enhancement.active,plagiarism:e.Plagiarism.active}:null},r=function(e){return!!Boolean(e)&&![e.ContextualSpelling,e.Enhancement,e.Grammar,e.Plagiarism,e.Punctuation,e.SentenceStructure,e.Style].map((function(e){return Boolean(e)&&"object"==typeof e&&"boolean"==typeof e.active})).some((function(e){return!e}))};e.update=function(e,t){return{checks:e.checks,extraSettings:E.merge(e.extraSettings,t.extraSettings),genre:(0,u.pipe)(l.fromNullable(t.genre),h.NW(e.genre)),context:(0,u.pipe)(l.fromNullable(t.context),h.NW(e.context))}},e.contextOrGenre=function(e){return(0,u.pipe)(e.context,h.NW((0,u.pipe)(e.genre,l.map(v.FV))),l.getOrElse((function(){return v.T0.unset})))};var y,b,C=e.empty={checks:l.none,genre:l.none,context:l.none,extraSettings:l.none},S=function(){function e(t){(0,i._)(this,e),(0,a._)(this,"_settings",void 0),this._settings=t}return(0,o._)(e,[{key:"genre",get:function(){var e=this;return(0,u.pipe)(this._settings.genre,l.alt((function(){return(0,u.pipe)(e._settings.context,l.chain((function(e){return e.domain})),l.map(v.lV))})))}},{key:"changeGenre",value:function(e){var t={genre:l.some(e)};return(0,u.pipe)(this._settings.context,l.fold(f.Yi,(function(){t.context=l.some(v.T0.fromDomain((0,v.DB)(e)))}))),this._update(t)}},{key:"checks",get:function(){return this._settings.checks}},{key:"changeChecks",value:function(e){var t={checks:l.some(e)};return this._update(t)}},{key:"context",get:function(){var e=this;return(0,u.pipe)(this._settings.context,l.alt((function(){return(0,u.pipe)(e._settings.genre,l.map(v.FV))})))}},{key:"changeContext",value:function(e){var t={context:l.some(e)};return(0,u.pipe)(this._settings.genre,l.fold(f.Yi,(function(){t.genre=(0,u.pipe)(e.domain,l.map(v.lV))}))),this._update(t)}},{key:"extraSettings",get:function(){return this._settings.extraSettings}},{key:"changeExtra",value:function(e){var t={extraSettings:l.some(e)};return this._update(t)}},{key:"toJSON",value:function(){return n=(e=this._settings).checks,r=e.genre,i=e.context,o=e.extraSettings,{apps:(0,u.pipe)(n,l.map(t),l.toUndefined),genre:(0,u.pipe)(r,l.toUndefined),context:(0,u.pipe)(i,l.map(v.T0.serialize),l.toUndefined),extraSettings:(0,u.pipe)(o,l.map(T.encode),l.toUndefined)};var e,n,r,i,o}},{key:"_update",value:function(t){return new e((0,s._)({},this._settings,t))}}],[{key:"fromJSON",value:function(t){return new e(function(e){return e?(0,u.pipe)(d.zb((function(){return{checks:l.fromNullable(n(e.apps)),genre:l.fromNullable(e.genre),context:v.T0.parse(e.context),extraSettings:(t=e.extraSettings,t?(0,u.pipe)(T.decode(t),l.fromEither):l.none)};var t})),p.getOrElse((function(){return C}))):C}(t))}}]),e}();e.Holder=S,function(e){(e.Kind||(e.Kind={})).draft_ai="draft_ai"}(y=e.Template||(e.Template={})),function(e){var t,n;!function(e){e.students="students"}(t=e.Kind||(e.Kind={})),function(e){var t;(t=e.TextGrade||(e.TextGrade={})).excellent="excellent",t.okay="okay",t.notGreat="notGreat",(e.Grade||(e.Grade={})).eq=g.ee((function(e,t){return Array.isArray(e)&&Array.isArray(t)&&e[0]===t[0]&&e[1]===t[1]||e===t}))}(n=e.Students||(e.Students={})),e.outcomesType=c.qO({kind:c.eu(t.students),grade:_.Z.option(c.KC([c.PV([c.ai,c.ai]),_.Z.createStringEnum(n.TextGrade,"textGrades")])),askedTimestamp:_.Z.option(c.ai),rejected:c.zM})}(b=e.Outcomes||(e.Outcomes={}));var E,T=c.qO({checkedPlagiarism:_.Z.withDefault(c.zM,!1),template:_.Z.option(c.qO({kind:_.Z.createStringEnum(y.Kind,"templateName"),state:c.L5})),outcomes:_.Z.option(b.outcomesType)});!function(e){e.empty={checkedPlagiarism:!1,template:l.none,outcomes:l.none},e.merge=function(e,t){return(0,u.pipe)(e,l.map((function(e){return t?m.yo(e,t):e})),h.NW(l.fromNullable(t)))}}(E=e.Extra||(e.Extra={})),e.fromCheckingSettings=t,e.toCheckingSettings=n}(r||(r={}))},78793:(e,t,n)=>{"use strict";n.d(t,{y:()=>s});var r=n(19147),i=n(6922),o=n(23988),a=n(91817),s=function(){function e(t){(0,r._)(this,e),(0,o._)(this,"_wsBaseUrl",void 0),this._wsBaseUrl=this._getWsBaseUrl(t)}return(0,i._)(e,[{key:"_getWsBaseUrl",value:function(e){var t=new RegExp("(http(s?)|ws(s?))://([^/]+)/?.*$").exec(e);if(null===t)throw new Error("Cannot parse ws url");var n=(0,a._)(t,5),r=n[3],i=n[4];return"ws".concat(r,"://").concat(i)}},{key:"getDocsListWsUrl",value:function(){return"".concat(this._wsBaseUrl,"/documents/ws")}},{key:"getDocWsUrl",value:function(e){return"".concat(this._wsBaseUrl,"/documents/").concat(e,"/ws")}}]),e}()},69545:(e,t,n)=>{"use strict";n.d(t,{Z3:()=>p});var r=n(83531),i=n(19147),o=n(44988),a=n(6922),s=n(23988),u=n(9899),c=n(1059),l=n(69063),d=function(){function e(t,n,r,o){(0,i._)(this,e),(0,s._)(this,"from",void 0),(0,s._)(this,"to",void 0),(0,s._)(this,"event",void 0),(0,s._)(this,"args",void 0),this.from=t,this.to=n,this.event=r,this.args=o}return(0,a._)(e,[{key:"toString",value:function(){return"Transition: From: "+this.from+" to: "+this.to+" (Args: "+this.args+")"}}]),e}(),p=function(){function e(t,n,r){(0,i._)(this,e),(0,s._)(this,"_name",void 0),(0,s._)(this,"_log",void 0),(0,s._)(this,"_parents",void 0),(0,s._)(this,"_transitions",void 0),(0,s._)(this,"_scheduled",void 0),(0,s._)(this,"_listeners",void 0),(0,s._)(this,"_inTransition",void 0),(0,s._)(this,"_current",void 0),(0,s._)(this,"_final",void 0),(0,s._)(this,"_verbose",void 0),(0,s._)(this,"_states",void 0),(0,s._)(this,"_events",void 0),(0,s._)(this,"_id",void 0),this._name=t,this._log=l.Bx.Logging.getLogger("coreclients.fsm"),this._parents={},this._transitions={},this._scheduled=[],this._listeners={},this._inTransition=!1,this._verbose=!1,this._id=++e._ids,this._current=n,this._final=null!=r?r:null}return(0,a._)(e,[{key:"current",get:function(){return this._current}},{key:"isFinal",get:function(){return this._final===this._current}},{key:"transition",value:function(e,t,n){this._transitions[e<<11|n]=t}},{key:"parent",value:function(e,t){this._parents[e]=t}},{key:"is",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this;return t.findIndex((function(e){return e===r._current}))>=0}},{key:"from",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o._)(f,[this].concat((0,u._)(t)))}},{key:"with",value:function(e){return new h(this,e)}},{key:"verbose",value:function(e,t){return this._verbose=!0,this._states=e,this._events=t,this}},{key:"on",value:function(e,t){return this._addCallback(this._listeners,e,t),this}},{key:"event",value:function(e,t){var n=this;return(0,r._)((function(){return(0,c.YH)(this,(function(i){return[2,new Promise((o=(0,r._)((function(r,i){var o,a,s;return(0,c.YH)(this,(function(u){switch(u.label){case 0:if(o=function(){var i,o,u,l,p,h,f;return(0,c.YH)(this,(function(g){switch(g.label){case 0:if(void 0===(i=n._transitions[a<<11|e]))return[3,10];n._inTransition=!0,o=Boolean(n._listeners[i])?n._listeners[i]:[],u=new d(n._current,i,e,t),g.label=1;case 1:g.trys.push([1,7,8,9]),l=function(e){return(0,c.YH)(this,(function(t){switch(t.label){case 0:return[4,n.event(e.event,e.args).then((function(t){return e.done(t)})).catch((function(t){return e.fail(t)}))];case 1:return t.sent(),[2]}}))},n._verbose&&n._trace("Transition from ".concat(n._stateName(u.from)," to ").concat(n._stateName(u.to)," on ").concat(n._eventName(e)," ")+"Arguments: "+t),n._current=i,p=o.map((function(e){return Promise.resolve(e(u))})),n._inTransition=!1,h=n._scheduled.shift(),g.label=2;case 2:return void 0===h?[3,5]:[5,(0,c.Ju)(l(h))];case 3:g.sent(),g.label=4;case 4:return h=n._scheduled.shift(),[3,2];case 5:return[4,Promise.all(p).then((function(e){return r(!0)}))];case 6:return g.sent(),[3,9];case 7:return f=g.sent(),s=f,[3,9];case 8:return n._inTransition=!1,[7];case 9:return[2,"break"];case 10:return a=n._parents[a],[2]}}))},n._verbose&&n._trace("Handling event ".concat(n._eventName(e),", currently in ").concat(n._stateName(n._current))),n._current===n._final)return n._trace("Cannot handle event ".concat(e,": FSM is in it's final state ").concat(n._current)),[2,r(!1)];if(n._inTransition)return n._scheduled.push(new m(e,t,r,i)),[2];a=n._current,s=null,u.label=1;case 1:return void 0===a?[3,3]:[5,(0,c.Ju)(o())];case 2:return"break"===u.sent()?[3,3]:[3,1];case 3:return Boolean(s)?i(s):r(!1),[2]}}))})),function(e,t){return o.apply(this,arguments)}))];var o}))}))()}},{key:"_addCallback",value:function(e,t,n){var r=e[t];return Boolean(r)||(r=[],e[t]=r),r.push(n),this}},{key:"_eventName",value:function(e){return void 0===this._events?e:this._events[e]}},{key:"_stateName",value:function(e){return void 0===this._states?e:this._states[e]}},{key:"_trace",value:function(e){this._log.trace("FSM#".concat(this._id).concat(this._name&&"_"+this._name," [VERBOSE]: ")+e)}}]),e}();(0,s._)(p,"_ids",0);var h=function(){function e(t,n){(0,i._)(this,e),(0,s._)(this,"hsm",void 0),(0,s._)(this,"state",void 0),this.hsm=t,this.state=n}return(0,a._)(e,[{key:"childrenOf",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this;return t.forEach((function(e){return r.hsm.parent(r.state,e)})),this.hsm}},{key:"parentOf",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this;return t.forEach((function(e){return r.hsm.parent(e,r.state)})),this.hsm}}]),e}(),f=function(){function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(0,i._)(this,e),(0,s._)(this,"hsm",void 0),(0,s._)(this,"_states",void 0),this.hsm=t,this._states=r}return(0,a._)(e,[{key:"to",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new g(this.hsm,this._states,t)}}]),e}(),g=function(){function e(t,n,r){(0,i._)(this,e),(0,s._)(this,"hsm",void 0),(0,s._)(this,"from",void 0),(0,s._)(this,"to",void 0),this.hsm=t,this.from=n,this.to=r}return(0,a._)(e,[{key:"on",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this;return t.forEach((function(e){return r.from.forEach((function(t){return r.to.forEach((function(n){return r.hsm.transition(t,n,e)}))}))})),this.hsm}}]),e}(),m=function e(t,n,r,o){(0,i._)(this,e),(0,s._)(this,"event",void 0),(0,s._)(this,"args",void 0),(0,s._)(this,"done",void 0),(0,s._)(this,"fail",void 0),this.event=t,this.args=n,this.done=r,this.fail=o}},52138:(e,t,n)=>{"use strict";n.d(t,{C:()=>r});var r,i=n(83531),o=n(19147),a=n(6922),s=n(23988),u=n(1059),c=n(69082),l=n(63336),d=n(21296),p=n(34717),h=n(58889),f=n(44297),g=n(58193),m=n(36840),_=n(69063),v=n(12486),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5*p.mZ;(0,o._)(this,e),(0,s._)(this,"_windowTime",void 0),(0,s._)(this,"_count",void 0),(0,s._)(this,"_timer",void 0),this._windowTime=t,this._count=0}return(0,a._)(e,[{key:"inc",value:function(){this._count++,this._startCounter()}},{key:"count",get:function(){return this._count}},{key:"_startCounter",value:function(){var e=this;this._timer=this._timer||setTimeout((function(){e._timer=void 0,e._count-- >0&&e._startCounter()}),this._windowTime)}}]),e}();!function(e){var t,n;!function(e){e[e.NORMAL_CLOSURE=1e3]="NORMAL_CLOSURE",e[e.GOING_AWAY=1001]="GOING_AWAY",e[e.CLOSED_ABNORMALLY=1006]="CLOSED_ABNORMALLY",e[e.NOT_CONSISTENT=1007]="NOT_CONSISTENT",e[e.VIOLATED_POLICY=1008]="VIOLATED_POLICY",e[e.TOO_BIG=1009]="TOO_BIG",e[e.UNEXPECTED_CONDITION=1011]="UNEXPECTED_CONDITION",e[e.SERVICE_RESTART=1012]="SERVICE_RESTART",e[e.CLIENT_MALFUNCTION=3e3]="CLIENT_MALFUNCTION",e[e.BLOCKED_BY_CLIENT=4e3]="BLOCKED_BY_CLIENT",e[e.UNAUTHORIZED=4001]="UNAUTHORIZED",e[e.SERVER_SHUTDOWN=4002]="SERVER_SHUTDOWN",e[e.NOT_FOUND=4004]="NOT_FOUND",e[e.PRECONDITION_FAILED=4012]="PRECONDITION_FAILED",e[e.TOO_MANY_REQUESTS=4029]="TOO_MANY_REQUESTS",e[e.UNKNOWN_WS_ERROR=-1]="UNKNOWN_WS_ERROR"}(t=e.WsCodes||(e.WsCodes={})),function(e){e.capi="capi",e.dox="dox"}(n=e.ClientType||(e.ClientType={}));var r=p.mZ;e.getIdleReconnect=function(e){var t=_.Bx.Logging.getLogger("coreclients.".concat(n[e],".reconnect"),v.$.TRACE);return function(n,r){var i={client:e,code:n.code,reason:n.reason,reconnectCounter:r.retryStatus.iterNumber};return t.info("skipping reconnect ",i),h.right({kind:"idle"})}},e.getDefaultReconnect=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,o=_.Bx.Logging.getLogger("coreclients.".concat(n[e],".reconnect"),v.$.TRACE),a=new y;return function(n,s,c){return function(e){return"RUNTIME_ERROR"===e.error.status}(n)&&(o.debug("disconnected because of runtime error"),a.inc()),(0,l.pipe)(function(e,n,r,i,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"backOffReconnect";if(n.iterNumber>10)return h.left(new Error("Maximum number (".concat(10,") of reconnect attempts reached")));switch(e.code){case t.NORMAL_CLOSURE:case t.GOING_AWAY:return(0,l.pipe)(o.canGoIdle?"idle":"backOffReconnect",h.right);case t.TOO_BIG:return h.left(new Error("WS closed because message was too big"));case t.UNEXPECTED_CONDITION:return(0,l.pipe)(r>i?"idle":"backOffReconnect",h.right);case t.CLOSED_ABNORMALLY:case t.VIOLATED_POLICY:case t.SERVICE_RESTART:case t.SERVER_SHUTDOWN:case t.TOO_MANY_REQUESTS:return h.right("backOffReconnect");case t.NOT_FOUND:return h.left(new Error("WS closed due to not found error"));case t.UNAUTHORIZED:return h.left(new Error("WS closed due to unauthorized error"));case t.CLIENT_MALFUNCTION:case t.BLOCKED_BY_CLIENT:return!o.isStable&&n.iterNumber>1?h.left(new Error("Failed to init connection for the second time")):h.right("backOffReconnect");case t.NOT_CONSISTENT:return n.iterNumber>1?h.left(new Error("Tried to send invalid message for the second time in a row")):h.right("backOffReconnect");case t.PRECONDITION_FAILED:return h.left(new Error("Precondition failed"));default:return h.right(a)}}(n,s.retryStatus,a.count,r,c),h.chain((function(t){var r,a={client:e,code:n.code,reason:n.reason,reconnectDecision:t,reconnectStatus:s.retryStatus},c=(r=(0,i._)((function(e){var t;return(0,u.YH)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.scheduleReconnect(e)];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),o.warn("Reconnect failed due to error ",t),[3,3];case 3:return[2]}}))})),function(e){return r.apply(this,arguments)});switch(t){case"idle":return o.debug("Skip reconnect, going idle",a),h.right({kind:"idle"});case"backOffReconnect":return o.debug("Trying to reconnect",a),h.right({kind:"scheduledReconnect",reconnect:c(s.retryStatus)});default:return h.left(new Error("unsupported reconnect decision: "+t))}})))}};var b=e.defaultRetryPolicy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.Vn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.mZ;return(0,d.capDelay)(t,(0,d.exponentialBackoff)(e))},C=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[b()],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;(0,o._)(this,e),(0,s._)(this,"_reconnect",void 0),(0,s._)(this,"retryPolicies",void 0),(0,s._)(this,"_resetTimeout",void 0),(0,s._)(this,"_log",void 0),(0,s._)(this,"_policy",void 0),(0,s._)(this,"_resetTimeoutHandle",void 0),(0,s._)(this,"retryStatus",void 0),this._reconnect=t,this.retryPolicies=n,this._resetTimeout=i,this._log=_.Bx.Logging.getLogger("coreclients.reconnect.scheduler"),this._resetTimeoutHandle=f.none,this._policy=c.fold(d.monoidRetryPolicy)(n),this.retryStatus=d.defaultRetryStatus}return(0,a._)(e,[{key:"reset",value:function(){this.retryStatus=d.defaultRetryStatus,this._resetTimeoutHandle=f.none}},{key:"scheduleReconnect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.retryStatus,t=this;return this.retryStatus=(0,d.applyPolicy)(this._policy,e),this._abortReset(),(0,l.pipe)(this.retryStatus.previousDelay,g.Mi((function(e){return t._log.debug("Reconnecting after timeout ".concat(e))})),f.fold(this._reconnect,(function(e){return(0,m.cb)(e).then(t._reconnect)})),(function(e){return e.then((function(e){return t._scheduleReset(),e}))}))}},{key:"_scheduleReset",value:function(){var e=this;this._resetTimeoutHandle=f.some(+setTimeout((function(){e._log.debug("Resetting reconnect scheduler due to a timeout"),e.reset()}),this._resetTimeout))}},{key:"_abortReset",value:function(){var e=this;(0,l.pipe)(this._resetTimeoutHandle,g.Mi((function(t){e._resetTimeoutHandle=f.none,clearTimeout(t)})))}}]),e}();e.ReconnectSchedulerImpl=C}(r||(r={}))},58526:(e,t,n)=>{"use strict";n.d(t,{O2:()=>I,WS:()=>w,v0:()=>N});var r,i=n(39695),o=n(83531),a=n(19147),s=n(6922),u=n(23988),c=n(29573),l=n(32557),d=n(1059),p=n(63336),h=n(86562),f=n(44297),g=n(58193),m=n(69063),_=n(12486),v=n(69545);try{r=null!==WebSocket&&void 0!==WebSocket?WebSocket:window.MozWebSocket}catch(e){}function y(e,t){return Boolean(t)?new r(e,t):new r(e)}Boolean(r)&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(y,e,{get:function(){return r[e]}})}));var b,C,S=Boolean(r)?y:null,E=n(52138);!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECTED=2]="DISCONNECTED",e[e.CLOSED=3]="CLOSED",e[e.ANY=4]="ANY"}(b||(b={})),function(e){e[e.CONNECT=0]="CONNECT",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECT=2]="DISCONNECT",e[e.SEND=3]="SEND",e[e.CLOSE=4]="CLOSE"}(C||(C={}));var T,O=function(e){m.Bx.Logging.getLogger("coreclients.errPrintln").error("WebSocket Error",e)},w=function(){function e(t){var n=this;(0,a._)(this,e),(0,u._)(this,"_createWSInstance",void 0),(0,u._)(this,"_fsm",void 0),(0,u._)(this,"_log",void 0),(0,u._)(this,"_ondisconnect",void 0),(0,u._)(this,"_onconnecting",void 0),(0,u._)(this,"_onconnect",void 0),(0,u._)(this,"_onerror",void 0),(0,u._)(this,"_onmessage",void 0),(0,u._)(this,"_read",void 0),(0,u._)(this,"_write",void 0),(0,u._)(this,"_createConnection",void 0),this._createWSInstance=t,this._log=m.Bx.Logging.getLogger("coreclients.ws"),this._ondisconnect=[],this._onconnecting=[],this._onconnect=[],this._onerror=[O],this._onmessage=[],this._read=function(e){try{var t=JSON.parse(e);if(Boolean(t)&&"object"==typeof t&&null!==t)return t}catch(e){}return e},this._write=function(e){return"string"==typeof e?e:JSON.stringify(e)},this._createConnection=function(e){return new I(e,n._write)};var r,i=this;this._fsm=new v.Z3("ws",b.DISCONNECTED,b.CLOSED).with(b.ANY).parentOf(b.CLOSED,b.CONNECTED,b.CONNECTING,b.DISCONNECTED).from(b.CONNECTING).to(b.CONNECTED).on(C.CONNECTED).from(b.CONNECTED,b.CONNECTING).to(b.DISCONNECTED).on(C.DISCONNECT).from(b.DISCONNECTED).to(b.CONNECTING).on(C.CONNECT).from(b.ANY).to(b.CLOSED).on(C.CLOSE).from(b.CONNECTED).to(b.CONNECTED).on(C.SEND).on(b.CONNECTED,(r=(0,o._)((function(e){return(0,d.YH)(this,(function(t){switch(t.label){case 0:return e.from===b.CONNECTED?[3,2]:[4,Promise.all(i._onconnect.map((function(t){return Promise.resolve(t(e.args))})))];case 1:t.sent(),t.label=2;case 2:return[2]}}))})),function(e){return r.apply(this,arguments)})).on(b.DISCONNECTED,(function(e){return n._ondisconnect.forEach((function(t){return t(e.args)}))})),this._log.isEnabled(_.$.TRACE)&&this._fsm.verbose(b,C)}return(0,s._)(e,[{key:"reader",value:function(e){return this._read=e,this}},{key:"writer",value:function(e){return this._write=e,this}},{key:"withConnection",value:function(e){return this._createConnection=e,this}},{key:"onConnecting",value:function(e){return this._onconnecting.push(e),this}},{key:"onConnect",value:function(e){return this._onconnect.push(e),this}},{key:"onDisconnect",value:function(e){return this._ondisconnect.push(e),this}},{key:"onMessage",value:function(e){return this._onmessage.push(e),this}},{key:"onError",value:function(e){return this._onerror.push(e),this}},{key:"connect",value:function(e){var t=this;return(0,o._)((function(){return(0,d.YH)(this,(function(n){return(0,h.V1)(t.isDisconnected(),"can only connect WS that is currently disconnected, was ".concat(b[t._fsm.current])),[2,t._createWebSocket(e,t._fsm)]}))}))()}},{key:"isDisconnected",value:function(){return this._fsm.is(b.DISCONNECTED)}},{key:"isConnecting",value:function(){return this._fsm.is(b.CONNECTING)}},{key:"isConnected",value:function(){return this._fsm.is(b.CONNECTED)}},{key:"_createWebSocket",value:function(e,t){var n=this;return this._log.trace("_createWebSocket(".concat(b[t.current],")")),t.event(C.CONNECT).then((function(r){return new Promise((function(i,a){var s=function(e){var n=t.is(b.CONNECTING);t.event(C.DISCONNECT,e),n&&a(e.error)};if(!r){var u=new N({status:"Unknown",message:"Cannot connect",code:E.C.WsCodes.UNKNOWN_WS_ERROR,url:e});return t.event(C.DISCONNECT,new R(u)),void a(new Error("\n            WebSocket [ERROR] FSM cannot be switched to CONNECTING state from ".concat(b[t.current],"\n          ")))}n._log.debug("Connecting to "+e),n._onconnecting.forEach((function(e){return e()}));var c,l,h=n._createWSInstance(e),m=(1e3,c=g.Ie(),{scheduleIO:function(e){(0,p.pipe)(c,f.map(window.clearTimeout)),c=(0,p.pipe)(e,f.map((function(e){return window.setTimeout(e,1e3)})))}}),_=n;h.onopen=(l=(0,o._)((function(n){var o,s,u;return(0,d.YH)(this,(function(n){switch(n.label){case 0:_._log.debug("Connection to ".concat(e," opened")),o=new x(t,_._createConnection(h,_._write)),s=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,t.event(C.CONNECTED,o)];case 2:return(r=n.sent())||(s=new Error("WebSocket [ERROR] FSM cannot be switched to CONNECTED state from ".concat(b[t.current]))),[3,4];case 3:return u=n.sent(),_._log.warn("WebSocket [ERROR] FSM cannot be switched to CONNECTED state due to error in event handler",u),s=u,[3,4];case 4:return Boolean(s)?(a(s),h.close(E.C.WsCodes.BLOCKED_BY_CLIENT,"WebSocket lib initialized"),[2]):(h.onmessage=function(e){var t=_._read(e.data);_._onmessage.forEach((function(e){return e(o,t)}))},i(o),[2])}}))})),function(e){return l.apply(this,arguments)}),h.onclose=function(r){n._log.debug("Connection to ".concat(e," closed"),{code:r.code,reason:r.reason,fsmState:b[t.current]}),m.scheduleIO(f.none);var i=new N({status:r.reason,message:"Connection closed: "+r.reason,code:r.code,url:e}),o=new R(i);s(o)},h.onerror=function(){n._log.debug("Connection to ".concat(e," errored"));var t=new N({status:"ws_error",message:"WebSocket error",url:e}),r=new R(t);m.scheduleIO(f.some((function(){try{n._onerror.forEach((function(e){return e(t)}))}catch(e){n._log.error("OnError handler thrown an error",e)}s(r)})))}}))}))}}],[{key:"create",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return new S(e)})}}]),e}(),I=function(){function e(t,n){(0,a._)(this,e),(0,u._)(this,"_ws",void 0),(0,u._)(this,"_serializer",void 0),this._ws=t,this._serializer=n}return(0,s._)(e,[{key:"send",value:function(e){var t=this;return(0,o._)((function(){return(0,d.YH)(this,(function(n){return[2,t._ws.send(t._serializer(e))]}))}))()}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.code,n=void 0===t?E.C.WsCodes.NORMAL_CLOSURE:t,r=e.reason,i=this;return new Promise((function(e){i._ws.close(n,r),e()}))}},{key:"state",get:function(){return this._ws.readyState}}]),e}(),x=function(){function e(t,n){(0,a._)(this,e),(0,u._)(this,"_fsm",void 0),(0,u._)(this,"_inner",void 0),(0,u._)(this,"_log",void 0),this._fsm=t,this._inner=n,this._log=m.Bx.Logging.getLogger("coreclients.ws.connection")}return(0,s._)(e,[{key:"_ws",get:function(){return this._inner._ws}},{key:"send",value:function(e){var t=this;return this._fsm.event(C.SEND).then((function(n){if(!n)throw new Error("WebSocket [ERROR]: Trying to send on invalid connection state: "+b[t._fsm.current]);if(t.state!==T.State.OPEN)throw new Error("WebSocket [ERROR]: Trying to send on invalid websocket state: "+T.State[t.state]);return t._inner.send(e)}))}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.code,n=void 0===t?E.C.WsCodes.NORMAL_CLOSURE:t,r=e.reason,i=this;return this._fsm.event(C.CLOSE).then((function(e){return e?(i._log.debug("Closing connection",{code:n,reason:r,fsmState:b[i._fsm.current]}),i._inner.close({code:n,reason:r})):(i._log.warn("Tried to close connection which is already closed or closing",{fsmState:b[i._fsm.current]}),Promise.resolve())}))}},{key:"state",get:function(){return this._inner.state}}]),e}();!function(e){var t;(t=e.State||(e.State={}))[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSING=2]="CLOSING",t[t.CLOSED=3]="CLOSED"}(T||(T={}));var P,R=function(){function e(t){(0,a._)(this,e),(0,u._)(this,"_error",void 0),this._error=t}return(0,s._)(e,[{key:"toString",value:function(){return this._error.message}},{key:"code",get:function(){return this._error.code}},{key:"error",get:function(){return this._error}},{key:"reason",get:function(){return"WebSocket [CLOSE]: statusCode="+this._error.code+" reason: "+this._error.status}}]),e}();!function(e){e.is=function(e){return null!=e&&(void 0!==e.code||void 0!==e.reason)}}(P||(P={}));var N=function(e){(0,c._)(n,e);var t=(0,l._)(n);function n(e){var r,o=e.code,s=void 0===o?-1:o,c=e.status,l=e.url,d=e.message,p=e.body;return(0,a._)(this,n),r=t.call(this,d),(0,u._)((0,i._)(r),"name","WSError"),(0,u._)((0,i._)(r),"code",void 0),(0,u._)((0,i._)(r),"status",void 0),(0,u._)((0,i._)(r),"url",void 0),(0,u._)((0,i._)(r),"body",void 0),(0,u._)((0,i._)(r),"event",void 0),r.url=void 0===l?void 0:l.split("?")[0],r.code=function(e,t){if(1005===e&&Boolean(t)){var n=t.toLowerCase();return n.indexOf("user not found")>=0?E.C.WsCodes.UNAUTHORIZED:n.indexOf("cannot find document")>=0?E.C.WsCodes.NOT_FOUND:n.indexOf("SERVER_SHUTDOWN")>=0?E.C.WsCodes.SERVER_SHUTDOWN:e}return e}(s,d),r.body=p,r.status=c,r}return(0,s._)(n,[{key:"toString",value:function(){return"Websocket Error\n      Message: ".concat(this.message,"\n      Status: ").concat(this.status,"\n      Code: ").concat(this.code,"\n      Url: ").concat(this.url)}}]),n}(h.eo)},78126:(e,t,n)=>{"use strict";n.d(t,{S:()=>r});var r,i=n(42543);!function(e){e.createBuilder=function(){return{build:(e,n)=>{const r=t();return{make:(t,o)=>({metadata:e,data:n,args:o,id:r,type:t,actions:new i.B7})}}}};const t=(()=>{let e=1;return()=>e++})()}(r||(r={}))},2061:(e,t,n)=>{"use strict";n.d(t,{H:()=>r});var r,i=n(55101);!function(e){e.isHighPriority=function(e){return e.metadata.priority>i.E.Priority.average},e.isCloseAction=function(e){return"timeout"===e||"closedByUser"===e||"closedByNotificationWithMorePriority"===e||"closedByMaxNotificationOnScreen"===e}}(r||(r={}))},13435:(e,t,n)=>{"use strict";n.d(t,{i:()=>C});var r=n(23988),i=n(36840),o=n(12486),a=n(69063),s=n(35413),u=n(83541),c=n(62822),l=n(54988),d=n(68533),p=n(28600),h=n(78339),f=n(68101),g=n(19711),m=n(95168),_=n(88423),v=n(11298),y=n(2061),b=n(55101);class C{enqueue(e,t){const n=this._factory[e].make(e,t);return s.v((()=>{const t=n.metadata.timeout!==b.E.TimeoutDisabled?u.timer(n.metadata.timeout===b.E.DefaultTimeout?this._defaultTimeout:n.metadata.timeout).pipe(c.u("timeout")):l.w;this.state.modify((e=>{const t=e.filter(((t,r)=>t.metadata.priority<n.metadata.priority?(this._log.debug(`closing ${t.type} notification, ${n.type} have higher priority`),t.actions.next("closedByNotificationWithMorePriority"),!1):!(t.id===n.id||0===r&&e.length>=this._maxNotificationsOnScreen&&(this._log.debug(`closing ${t.type} notification, more than ${this._maxNotificationsOnScreen} notification on the screen`),t.actions.next("closedByMaxNotificationOnScreen"),1))));return t.push(n),t}));const r=n.actions.pipe(d.h(t.pipe(p.Q(n.actions.pipe(h.p(y.H.isCloseAction))))));return r.pipe(f.v((0,i.AU)(y.H.isCloseAction)),d.h(r.pipe(g.$(y.H.isCloseAction))),m.M((t=>{this._log.log(y.H.isHighPriority(n)?o.$.WARN:o.$.DEBUG,`Notification ${String(e)} is ${t}`)})),_.j((()=>{this.state.modify((e=>e.filter((e=>e.id!==n.id))))})),v.u())}))}constructor(e,t,n,i){(0,r._)(this,"state",void 0),(0,r._)(this,"_factory",void 0),(0,r._)(this,"_maxNotificationsOnScreen",void 0),(0,r._)(this,"_defaultTimeout",void 0),(0,r._)(this,"_log",void 0),this.state=e,this._factory=t,this._maxNotificationsOnScreen=n,this._defaultTimeout=i,this._log=a.Bx.Logging.getLogger("notificationsManager")}}},75363:(e,t,n)=>{"use strict";n.d(t,{p:()=>r});var r,i=n(80074),o=n(45887),a=n(44297);!function(e){var t=e.possibleDialects=o.n(["american","british","canadian","australian","indian"]),n=e.dialectType=o.Z.literalUnion("dialect",t);e.isDialectString=function(e){return n.is(e)},e.createInMemoryDialectSettingsModel=function(e="american"){const t=i.s.create(a.some(e)),n=i.s.create(e);return{dialect:t.view(),dialectOrDefault:n.view(),setDialect:e=>(t.set(a.some(e)),n.set(e),Promise.resolve(e)),setDialectWeak:e=>(n.set(e),Promise.resolve(e))}}}(r||(r={}))},42491:(e,t,n)=>{"use strict";n.d(t,{r:()=>U});var r,i=n(23988),o=n(10334),a=n(17171),s=n(83531),u=n(19147),c=n(6922),l=n(1059),d=n(63336),p=n(58889),h=n(34717),f=n(86562),g=n(69063),m=n(52138),_=n(36465),v=function(){function e(t,n,r){var o=r.handler,a=r.maxReconnectDelay,s=r.baseReconnectDelay,c=r.reconnectHandler,l=void 0===c?m.C.getDefaultReconnect(m.C.ClientType.dox):c,f=this;(0,u._)(this,e),(0,i._)(this,"_ws",void 0),(0,i._)(this,"_log",void 0),(0,i._)(this,"_client",void 0),(0,i._)(this,"_conn",void 0),(0,i._)(this,"_handler",void 0),(0,i._)(this,"_isIdle",void 0),(0,i._)(this,"isIdle",void 0),(0,i._)(this,"isDisconnected",void 0),this._ws=n,this._log=g.Bx.Logging.getLogger("coreclients.remote.connection"),this._isIdle=!1,this.isIdle=function(){return f._isIdle},this.isDisconnected=function(){return f._ws.isDisconnected()},this._handler=o,this._ws.onMessage((function(e,t){f._client.isStable(t)&&_.reset()})).onConnecting((function(){f._isIdle=!1})).onConnect((function(){f._handler.connectHandler&&f._handler.connectHandler()})).onDisconnect((function(e){if(!f._client.isClosed()){var t={canGoIdle:f._client.inSync,isStable:f._client.isStable()};f._log.debug("calling reconnect handler",t),(0,d.pipe)(l(e,_,t),(function(t){return f._handler.disconnectHandler&&f._handler.disconnectHandler(e,_.retryStatus,t),t}),p.fold((function(t){f._log.warn("Error reconnecting",t),f._client.close(e.code,e.reason)}),(function(e){"idle"===e.kind&&(f._isIdle=!0)})))}}));var _=new m.C.ReconnectSchedulerImpl((function(){return f.connect(f._client.getWsUrl())}),[m.C.defaultRetryPolicy(Boolean(s)?s:3*h.Vn,Boolean(a)?a:h.mZ)]);this._client=t(this,this._ws)}return(0,c._)(e,[{key:"create",value:function(e){var t=this;return(0,s._)((function(){var n;return(0,l.YH)(this,(function(r){switch(r.label){case 0:return n=new Promise((function(e,n){t._client.init(e,n)})),[4,t.connect(e)];case 1:return r.sent(),[2,n]}}))}))()}},{key:"connect",value:function(e){var t=this;return(0,s._)((function(){var n;return(0,l.YH)(this,(function(r){switch(r.label){case 0:(0,f.V1)(!t._client.isClosed(),"cannot connect when closed"),t._log.debug("connect: connecting to ".concat(e)),t._isIdle=!1,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t._ws.connect(e)];case 2:return t._conn=r.sent(),[3,4];case 3:throw n=r.sent(),t._log.warn("could not connect",n),new _.h.ConnectionError(e);case 4:return[2,t._conn]}}))}))()}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.C.WsCodes.NORMAL_CLOSURE,t=arguments.length>1?arguments[1]:void 0,n=this;return(0,s._)((function(){var r;return(0,l.YH)(this,(function(i){switch(i.label){case 0:return r=Boolean(t)?t:"DOX WS Close called",n._log.debug("close: closing client",{closeReason:r}),[4,n._client.close(e,t)];case 1:return i.sent(),n._conn?(n._log.debug("close: closing connection",{closeReason:r}),[4,n._conn.close({code:e,reason:r})]):[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))()}},{key:"client",get:function(){return this._client}}]),e}(),y=n(39695),b=n(80120),C=n(79310),S=n(29573),E=n(32557),T=n(36840),O=n(29052),w=n(44297),I=n(71937),x=n(92422),P=function(e){(0,S._)(n,e);var t=(0,E._)(n);function n(e,o,a){var s;return(0,u._)(this,n),s=t.call(this,e,o),(0,i._)((0,y._)(s),"_handler",void 0),(0,i._)((0,y._)(s),"_disconnectHandler",T.Yi),s._handler=new r.DefaultHandler(a),s._disconnectHandler=function(){return s._handler.disconnectHandler},s._fsm.on(I.DG.CLOSED,(function(e){var t=Boolean(e.args)?e.args:_.h.CLOSED_ERROR;s._initFailHandler&&(s._initFailHandler(t),s._initFailHandler=null)})),(0,T.hJ)("closeDoxListSocket",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1?arguments[1]:void 0;s._conn._ws.close(e,t)})),s}return(0,c._)(n,[{key:"_handleConnect",value:function(e){var t=this,r=this;return(0,s._)((function(){return(0,l.YH)(this,(function(i){switch(i.label){case 0:return[4,(0,b._)((0,C._)(n.prototype),"_handleConnect",t).call(r,e)];case 1:return i.sent(),r._initHandler&&(r._log.debug("calling init handler"),r._initHandler(r),r._initHandler=null,r._initFailHandler=null),[2]}}))}))()}},{key:"isStable",value:function(){return!0}},{key:"inSync",get:function(){return!0}},{key:"_handleMessage",value:function(e){var t=this;return(0,s._)((function(){var n;return(0,l.YH)(this,(function(r){switch(t._log.trace("<<< ",{message:e}),e.op){case"document_metadata_changed":t._handleMetaChangeMessage(e);break;case"mongodb_change":break;default:n=e,t._log.warn("Never",{message:n})}return[2]}))}))()}},{key:"_handleMetaChangeMessage",value:function(e){var t=x.b.Meta.parse(e);this._handler.metadataChangeHandler(String(e.id),t)}}]),n}(I.V$);!function(e){e.DefaultHandler=function e(t){(0,u._)(this,e),(0,i._)(this,"_handler",void 0),(0,i._)(this,"metadataChangeHandler",void 0),(0,i._)(this,"connectHandler",void 0),(0,i._)(this,"disconnectHandler",void 0),(0,i._)(this,"updateTokenHandler",void 0),this._handler=t,this.metadataChangeHandler=this._handler.metadataChangeHandler||T.Yi,this.connectHandler=this._handler.connectHandler||T.Yi,this.disconnectHandler=this._handler.disconnectHandler||T.Yi,this.updateTokenHandler=this._handler.updateTokenHandler||O.pG(w.none)}}(r||(r={}));var R=function(){function e(t,n){var r=this;(0,u._)(this,e),(0,i._)(this,"_connection",void 0),(0,i._)(this,"_doc",void 0),(0,i._)(this,"_log",void 0),(0,i._)(this,"getProofitPlans",void 0),(0,i._)(this,"getProofitStatistics",void 0),(0,i._)(this,"flush",void 0),(0,i._)(this,"getWsUrl",void 0),(0,i._)(this,"init",void 0),(0,i._)(this,"isStable",void 0),(0,i._)(this,"close",void 0),(0,i._)(this,"isClosed",void 0),this._connection=t,this._doc=n,this._log=g.Bx.Logging.getLogger("coreclients.remote.autoconnect"),this.getProofitPlans=(0,d.pipe)(O.BK((function(){return r._checkConnected()})),O.cy((function(){return r._doc.getProofitPlans}))),this.getProofitStatistics=(0,d.pipe)(O.BK((function(){return r._checkConnected()})),O.cy((function(){return r._doc.getProofitStatistics}))),this.flush=function(){return r._doc.flush()},this.getWsUrl=function(){return r._doc.getWsUrl()},this.init=function(e,t){return r._doc.init((function(t){return e((0,a._)((0,o._)({},t),{remoteDocument:r}))}),t)},this.isStable=function(e){return r._doc.isStable(e)},this.close=function(e,t){return r._doc.close(e,t)},this.isClosed=function(){return r._doc.isClosed()}}return(0,c._)(e,[{key:"isInitialRevision",get:function(){return this._doc.isInitialRevision}},{key:"inSync",get:function(){return this._doc.inSync}},{key:"pushChanges",value:function(e){return this._checkConnected(),this._doc.pushChanges(e)}},{key:"updateMetadata",value:function(e){return this._checkConnected(),this._doc.updateMetadata(e)}},{key:"placeProofitOrder",value:function(e,t){return this._doc.placeProofitOrder(e,t)}},{key:"_checkConnected",value:function(){this._connection.isIdle()?(this._log.debug("connection is idle, triggering new connection"),this._connection.connect(this.getWsUrl())):this._log.trace("already connected or cannot connect, skipping")}}]),e}(),N=n(42543),k=n(91242),M=n(77396),j=n(19711),A=n(15491),D=n(36094);class L{get isInitialRevision(){return this._inner.isInitialRevision}get inSync(){return this._inner.inSync}pushChanges(e){return M.NQ(this._inner.pushChanges(e),(e=>this._untilConnected(e)),1e4)}updateMetadata(e){return M.NQ(this._inner.updateMetadata(e),(e=>this._untilConnected(e)),1e4)}placeProofitOrder(e,t){return this._inner.placeProofitOrder(e,t)}_untilConnected(e){return k.Xb.isNotConnectedError(e)?(0,d.pipe)(this._events,j.$((e=>"connect"===e.kind)),A.T(T.Yi),D.FM,w.some):w.none}constructor(e,t){(0,i._)(this,"_events",void 0),(0,i._)(this,"_inner",void 0),(0,i._)(this,"flush",void 0),(0,i._)(this,"getWsUrl",void 0),(0,i._)(this,"init",void 0),(0,i._)(this,"isStable",void 0),(0,i._)(this,"close",void 0),(0,i._)(this,"isClosed",void 0),(0,i._)(this,"getProofitPlans",void 0),(0,i._)(this,"getProofitStatistics",void 0),this._events=e,this._inner=t,this.flush=()=>this._inner.flush(),this.getWsUrl=()=>this._inner.getWsUrl(),this.init=(e,t)=>this._inner.init((t=>e((0,a._)((0,o._)({},t),{remoteDocument:this}))),t),this.isStable=e=>this._inner.isStable(e),this.close=(e,t)=>this._inner.close(e,t),this.isClosed=()=>this._inner.isClosed(),this.getProofitPlans=this._inner.getProofitPlans,this.getProofitStatistics=this._inner.getProofitStatistics}}class U{openDocumentsList(e){const t=this.urls.getDocsListWsUrl(),n=new v(((n,r)=>new P(t,r,e)),this._wsHandler(),{handler:e,baseReconnectDelay:h.Vn});return n.create(t).then((e=>({remoteList:e,remoteConnection:n})))}openDocumentById(e,t,n,r=500){const i=this.urls.getDocWsUrl(e),s=new N.B7,u=function(e,t){const n=g.Bx.Logging.getLogger("DoxWSClient.Connectivity");return{connectHandler:()=>{n.debug("WS DOX connectivity online"),t.next({kind:"connect"}),e.connectHandler&&e.connectHandler()},disconnectHandler:(r,i,o)=>{n.debug("Disconnected from dox",r),t.next({kind:"disconnect",reason:r,reconnectCounter:i.iterNumber,reconnectResult:o}),e.disconnectHandler&&e.disconnectHandler(r,i,o)}}}(t,s),c=new v(((e,o)=>new L(s,new R(e,new x.N(i,o,t,n,r)))),this._wsHandler(),{handler:u,baseReconnectDelay:h.Vn});return c.create(i).then((e=>(0,a._)((0,o._)({},e),{remoteConnection:c})))}constructor(e,t){(0,i._)(this,"urls",void 0),(0,i._)(this,"_wsHandler",void 0),this.urls=e,this._wsHandler=t}}},83194:(e,t,n)=>{"use strict";n.d(t,{Qh:()=>u,V_:()=>c,hQ:()=>l,ls:()=>s});var r=n(63724),i=n(36840),o=n(44297),a=n(69063);const s=function(){const e=Object.create({getItem:e=>null,setItem:(e,t)=>i.Yi,removeItem:e=>null});try{return Boolean(window.localStorage)?window.localStorage:e}catch(t){return e}}();function u(...e){return 0===e.length?r.OA.of(s):r.OA.of(...e.map((e=>({[e]:s.getItem(e)}))))}function c(e){for(const[t,n]of e.entries())try{const e=n.getStr();Boolean(e)&&s.setItem(t,e)}catch(e){return void a.Bx.Logging.getLogger("model.settings.localStorage").warn("Cannot save data to local storage",e)}}var l;!function(e){e.fromLocalStorage=function(e){return{getItem:t=>o.fromNullable(e.getItem(t)),setItem:(t,n)=>e.setItem(t,n),safeRemoveItem:t=>{try{e.removeItem(t)}catch(e){}},getKeys:()=>Object.keys(e),removeItem:t=>e.removeItem(t)}}}(l||(l={}))},39032:(e,t,n)=>{"use strict";n.d(t,{E:()=>i});var r,i,o=n(23988),a=n(80074),s=n(13435),u=n(54988),c=n(78126),l=n(55101);function d(){return{unauthorizedError:c.S.createBuilder().build(r.fatal),offline:c.S.createBuilder().build(r.fatal),serverError:c.S.createBuilder().build(r.fatal),connectionWSError:c.S.createBuilder().build(r.fatal),clientConnectionError:c.S.createBuilder().build(r.fatal),documentNotFoundError:c.S.createBuilder().build(r.fatal),selfUpdate:c.S.createBuilder().build(r.error),slowNetwork:c.S.createBuilder().build({priority:l.E.Priority.average,timeout:l.E.DefaultTimeout,position:l.E.Position.bottomRight,viewType:l.E.ViewType.standard}),checkingIsDown:c.S.createBuilder().build(r.warning),error:c.S.createBuilder().build(r.warning),paymentSuccess:c.S.createBuilder().build(r.info),paymentError:c.S.createBuilder().build({priority:l.E.Priority.average,timeout:l.E.DefaultTimeout,position:l.E.Position.bottomRight,viewType:l.E.ViewType.standard}),proofitPaymentDeclinedError:c.S.createBuilder().build(r.warning),proofitEmptyDocumentError:c.S.createBuilder().build(r.warning),proofitDocumentProofreadError:c.S.createBuilder().build(r.warning),proofitComplexInternalStructureError:c.S.createBuilder().build(r.warning),copyToClipboardFailed:c.S.createBuilder().build({priority:l.E.Priority.average,timeout:l.E.DefaultTimeout,position:l.E.Position.bottomRight,viewType:l.E.ViewType.standard}),proofitCancelled:c.S.createBuilder().build(r.warning),proofitCompleted:c.S.createBuilder().build({priority:l.E.Priority.low,timeout:l.E.TimeoutDisabled,position:l.E.Position.bottomRight,viewType:l.E.ViewType.standard}),denaliDocumentUploaded:c.S.createBuilder().build({priority:l.E.Priority.low,timeout:15e3,position:l.E.Position.bottomRight,viewType:l.E.ViewType.standard}),denaliFormattingCompatibility:c.S.createBuilder().build({priority:l.E.Priority.low,timeout:15e3,position:l.E.Position.bottomLeft,viewType:l.E.ViewType.standard}),alertsNothingFound:c.S.createBuilder().build(r.info),switchToDenali:c.S.createBuilder().build(r.info),feedbackSend:c.S.createBuilder().build(r.info),statisticsError:c.S.createBuilder().build(r.warning),copySuccess:c.S.createBuilder().build(r.info),downloadDocumentNotFoundError:c.S.createBuilder().build(r.warning),isTemporaryDownloadError:c.S.createBuilder().build(r.warning),clipboardNotSupported:c.S.createBuilder().build({priority:l.E.Priority.average,timeout:l.E.DefaultTimeout,position:l.E.Position.bottomRight,viewType:l.E.ViewType.standard}),documentSizeExceeded:c.S.createBuilder().build(r.warning),documentUploaded:c.S.createBuilder().build({priority:l.E.Priority.low,timeout:l.E.TimeoutDisabled,position:l.E.Position.bottomRight,viewType:l.E.ViewType.standard}),documentTypeUnsupported:c.S.createBuilder().build(r.warning),trackedChangesIsUnsupported:c.S.createBuilder().build({priority:l.E.Priority.average,timeout:3e4,position:l.E.Position.bottomRight,viewType:l.E.ViewType.standard}),documentUploadGeneralError:c.S.createBuilder().build(r.warning),documentIsEmpty:c.S.createBuilder().build(r.warning),noFileToUpload:c.S.createBuilder().build(r.info),oneDocumentIsAllowed:c.S.createBuilder().build(r.info)}}!function(e){e.fatal={priority:l.E.Priority.highest,timeout:l.E.TimeoutDisabled,position:l.E.Position.top,viewType:l.E.ViewType.standard},e.error={priority:l.E.Priority.high,timeout:l.E.TimeoutDisabled,position:l.E.Position.top,viewType:l.E.ViewType.standard},e.warning={priority:l.E.Priority.average,timeout:l.E.TimeoutDisabled,position:l.E.Position.bottomRight,viewType:l.E.ViewType.standard},e.info={priority:l.E.Priority.low,timeout:l.E.DefaultTimeout,position:l.E.Position.bottomRight,viewType:l.E.ViewType.standard}}(r||(r={})),function(e){e.createFactory=d,e.createManager=(e,t)=>new s.i(e,d(),t.maxNotificationsOnTheScreen,t.notificationShowTimeMs),e.ManagerMock=class{enqueue(e){return u.w}constructor(){(0,o._)(this,"state",a.s.create([]))}}}(i||(i={}))},63403:(e,t,n)=>{"use strict";n.d(t,{vL:()=>i});var r=n(42109);function i(e){var t;t={domain:e,path:"/",expires:new Date(Date.now()+36e5)},(0,r.A)("grInstallSource","editor",t)}},59592:(e,t,n)=>{"use strict";var r,i,o;n.d(t,{u:()=>r}),i=r||(r={}),o=function(e){return"left"===e.kind},i.left=function(e){return{kind:"left",value:e}},i.right=function(e){return{kind:"right",value:e}},i.isLeft=o,i.isRight=function(e){return"right"===e.kind},i.flatMap=function(e,t){return o(e)?e:t(e.value)},i.fromPromise=function(e){return e.then((function(e){return r.right(e)})).catch((function(e){return r.left(e)}))}},10117:(e,t,n)=>{"use strict";n.d(t,{AU:()=>d,Vw:()=>s,h2:()=>l,kX:()=>u,qE:()=>f,z3:()=>c});var r=n(30040),i=n(63336),o=n(86562),a=n(28421),s={type:a.ZU.InProgress};function u(e){return{type:a.ZU.Success,value:e}}function c(e,t){return{type:a.ZU.Error,error:e,status:t}}function l(e){return{type:a.ZU.Fatal,error:e}}function d(e){return function(t){switch(t.type){case a.ZU.InProgress:return e.onInProgress();case a.ZU.Success:return e.onSuccess(t.value);case a.ZU.Error:return e.onError(t.error);case a.ZU.Fatal:return e.onFatal(t.error);default:return(0,o.xb)(t)}}}var p={URI:"RemoteData",of:u,ap:function(e,t){return(0,a.oJ)(e)?(0,a.oJ)(t)?u(e.value(t.value)):t:e},map:function(e,t){return(0,a.oJ)(e)?u(t(e.value)):e},chain:function(e,t){return(0,a.oJ)(e)?t(e.value):e},bimap:function(e,t,n){return(0,a.LT)(e)?e:(0,a.oJ)(e)?u(n(e.value)):(0,a.bJ)(e)?c(t(e.error),e.status):l(t(e.error))},mapLeft:function(e,t){return p.bimap(e,t,r.identity)}},h=(0,i.pipeable)(p),f=(h.map,h.mapLeft);h.chain,h.chainFirst,h.ap,h.apFirst,h.apSecond,h.bimap,h.flatten},77396:(e,t,n)=>{"use strict";n.d(t,{NQ:()=>d,h8:()=>l,hq:()=>u,qI:()=>c});var r=n(83293),i=n(29052),o=n(63336),a=n(23121),s=n(44297);function u(e){return e().then(a.$v)}var c=i.cy,l=function(e){return r.map(a.qI(e))};function d(e,t,n){return(0,o.pipe)(e,(0,i.AU)((function(a){var u=(0,o.pipe)((0,i.kb)(a),r.delay(n));return(0,o.pipe)(t(a),s.fold((function(){return(0,i.kb)(a)}),(function(t){var n=(0,o.pipe)(t,r.chain((function(){return(0,i.pG)(void 0)}))),a=r.getRaceMonoid().concat(u,n);return(0,o.pipe)(a,(0,i.cy)((function(){return e})))})))}),(function(e){return(0,i.pG)(e)})))}},27788:(e,t,n)=>{"use strict";n.d(t,{K:()=>s});var r=n(10334),i=n(73872);function o(e,t){return{map:function(n,r){return e.map(n,(function(e){return t.map(e,r)}))}}}var a=n(44297);var s,u=n(63336);!function(e){var t,n,s,c,l,d,p=e.URI="IOOption",h=e.ioOption=(0,r._)({URI:p},(n=i.io,s=n,c=a.Applicative,l={map:o(s,c).map,of:function(e){return s.of(c.of(e))},ap:function(e,t){return s.ap(s.map(e,(function(e){return function(t){return c.ap(e,t)}})),t)}},d=n.of(a.none),{map:l.map,ap:l.ap,of:l.of,chain:function(e,t){return n.chain(e,(0,a.fold)((function(){return d}),t))},alt:function(e,t){return n.chain(e,(0,a.fold)(t,(function(e){return n.of((0,a.some)(e))})))},fold:function(e,t,r){return n.chain(e,(0,a.fold)(t,r))},getOrElse:function(e,t){return n.chain(e,(0,a.fold)(t,n.of))},fromM:function(e){return n.map(e,a.some)},none:function(){return d}}));t=(0,u.pipeable)(h),e.map=t.map,e.chain=t.chain,e.ap=t.ap,e.alt=t.alt,e.apFirst=t.apFirst,e.apSecond=t.apSecond,e.of=h.of,e.fold=function(e,t){return function(n){return h.fold(n,e,t)}},e.fromM=h.fromM}(s||(s={}))},97772:(e,t,n)=>{"use strict";n.d(t,{Wm:()=>Pi,fW:()=>mi,oQ:()=>Ri});var r,i,o,a,s,u,c,l,d,p,h,f,g,m,_,v,y,b,C,S,E,T,O,w=n(19147),I=n(23988),x=n(10334),P=n(17171),R=n(91817),N=n(9899),k=n(30040),M=n(57797),j=n(59697),A=n(31679),D=n(87626),L=n(86562),U=n(44297),H=n(36840),B=n(22835),G=n(10047),q=n(58193),Y=n(58889),F=n(93629);!function(e){e.Click="click",e.SelectSliderChoice="selectSliderChoice",e.Focus="focus",e.CloseAssistant="closeAssistant"}(r||(r={})),function(e){e.Dismiss="dismiss",e.Fulfill="fulfill"}(i||(i={})),function(e){e.Ideation="ideation",e.QuickReply="quickReply",e.QuickRewrite="quickRewrite",e.Rewrite="rewrite",e.PushRewrite="pushRewrite"}(o||(o={})),function(e){e.FadeIn="fadeIn",e.FadeOut="fadeOut",e.SlideLeft="slideLeft",e.SlideRight="slideRight"}(a||(a={})),function(e){e.Primary="primary",e.Secondary="secondary",e.Toggle="toggle",e.Yellow="yellow",e.Outlined="outlined",e.Link="link",e.DarkPrimary="darkPrimary",e.DarkSecondary="darkSecondary",e.GgoPrimary="ggoPrimary"}(s||(s={})),function(e){e.Round="round",e.Square="square"}(u||(u={})),function(e){e.Enabled="enabled",e.Disabled="disabled",e.Deselected="deselected",e.Selected="selected",e.Hidden="hidden"}(c||(c={})),function(e){e.CoreNeutral90="CoreNeutral90",e.CoreNeutral80="CoreNeutral80",e.CoreNeutral70="CoreNeutral70",e.CoreNeutral60="CoreNeutral60",e.CoreNeutral50="CoreNeutral50",e.CoreNeutral40="CoreNeutral40",e.CoreNeutral30="CoreNeutral30",e.CoreNeutral20="CoreNeutral20",e.CoreNeutral10="CoreNeutral10",e.CoreNeutral1="CoreNeutral1",e.CoreNeutral0="CoreNeutral0",e.CoreGreen70="CoreGreen70",e.CoreGreen60="CoreGreen60",e.CoreGreen50="CoreGreen50",e.CoreGreen40="CoreGreen40",e.CoreGreen30="CoreGreen30",e.CoreGreen20="CoreGreen20",e.CoreGreen10="CoreGreen10",e.CoreGreen1="CoreGreen1",e.CoreBlue70="CoreBlue70",e.CoreBlue60="CoreBlue60",e.CoreBlue50="CoreBlue50",e.CoreBlue40="CoreBlue40",e.CoreBlue30="CoreBlue30",e.CoreBlue20="CoreBlue20",e.CoreBlue10="CoreBlue10",e.CoreBlue1="CoreBlue1",e.CoreRed70="CoreRed70",e.CoreRed60="CoreRed60",e.CoreRed50="CoreRed50",e.CoreRed40="CoreRed40",e.CoreRed30="CoreRed30",e.CoreRed20="CoreRed20",e.CoreRed10="CoreRed10",e.CoreRed1="CoreRed1",e.CoreYellow80="CoreYellow80",e.CoreYellow70="CoreYellow70",e.CoreYellow60="CoreYellow60",e.CoreYellow50="CoreYellow50",e.CoreYellow40="CoreYellow40",e.CoreYellow30="CoreYellow30",e.CoreYellow20="CoreYellow20",e.CoreYellow10="CoreYellow10",e.CoreYellow1="CoreYellow1",e.CorePurple60="CorePurple60",e.CorePurple50="CorePurple50",e.CorePurple40="CorePurple40",e.CorePurple30="CorePurple30",e.CorePurple20="CorePurple20",e.CorePurple10="CorePurple10",e.CorePurple1="CorePurple1",e.CoreCyan60="CoreCyan60",e.CoreCyan50="CoreCyan50",e.CoreCyan40="CoreCyan40",e.CoreCyan30="CoreCyan30",e.CoreCyan20="CoreCyan20",e.CoreCyan10="CoreCyan10",e.CoreCyan1="CoreCyan1",e.CoreSky70="CoreSky70",e.CoreSky60="CoreSky60",e.CoreSky50="CoreSky50",e.CoreSky40="CoreSky40",e.CoreSky30="CoreSky30",e.CoreSky20="CoreSky20",e.CoreSky10="CoreSky10",e.CoreSky1="CoreSky1",e.CoreIndigo70="CoreIndigo70",e.CoreIndigo60="CoreIndigo60",e.CoreIndigo50="CoreIndigo50",e.CoreIndigo40="CoreIndigo40",e.CoreIndigo30="CoreIndigo30",e.CoreIndigo20="CoreIndigo20",e.CoreIndigo10="CoreIndigo10",e.CoreIndigo1="CoreIndigo1",e.CoreMagenta70="CoreMagenta70",e.CoreMagenta60="CoreMagenta60",e.CoreMagenta40="CoreMagenta40",e.CoreMagenta30="CoreMagenta30",e.CoreMagenta10="CoreMagenta10",e.CoreMagenta1="CoreMagenta1",e.CoreCoral60="CoreCoral60",e.CoreCoral50="CoreCoral50",e.CoreCoral40="CoreCoral40",e.CoreCoral30="CoreCoral30",e.CoreCoral10="CoreCoral10",e.CoreCoral1="CoreCoral1",e.CoreYellowBrand50="CoreYellowBrand50",e.CoreYellowBrand40="CoreYellowBrand40",e.CoreYellowBrand30="CoreYellowBrand30",e.CoreYellowBrand20="CoreYellowBrand20",e.CoreYellowBrand10="CoreYellowBrand10",e.CoreYellowBrand1="CoreYellowBrand1",e.CoreLime50="CoreLime50",e.CoreLime40="CoreLime40",e.CoreLime30="CoreLime30",e.CoreLime20="CoreLime20",e.CoreLime10="CoreLime10",e.CoreLime1="CoreLime1"}(l||(l={})),function(e){e.ButtonPrev="button:prev",e.ButtonNext="button:next",e.ButtonAccept="button:accept",e.ButtonDismiss="button:dismiss",e.StrongAlertRefBulkAccept="strongAlertRef:BulkAccept",e.StrongAlertRefBulkDismiss="strongAlertRef:BulkDismiss",e.StrongAlertRefBulkDismissBufferOuter="strongAlertRef:BulkDismissBufferOuter",e.StrongAlertRefUpgradeHook="strongAlertRef:UpgradeHook",e.StrongAlertRefConsolidatedLockedCard="strongAlertRef:ConsolidatedLockedCard",e.ButtonGoPremiumYellow="button:goPremiumYellow",e.AssistantCardToneInsights="assistantCard:toneInsights",e.AssistantCardPerformanceScore="assistantCard:performanceScore",e.AssistantFeedPerformanceScore="assistantFeed:performanceScore",e.ButtonPerformanceScore="button:performanceScore",e.GlobalPartPlagiarismWinFooter="globalPart:plagiarismWinFooter",e.GlobalPartPlagiarismWinHeader="globalPart:plagiarismWinHeader",e.GlobalPartWritingExpertWinFooter="globalPart:writingExpertWinFooter",e.GlobalPartWritingExpertWinHeader="globalPart:writingExpertWinHeader",e.GlobalPartPerformanceScoreCard="globalPart:performanceScoreCard",e.GlobalPartPerformanceScoreButton="globalPart:performanceScoreButton",e.GlobalPartWritingExpertState="globalPart:writingExpertState"}(d||(d={})),function(e){e.Asc="asc",e.Desc="desc"}(p||(p={})),function(e){e.EqualTo="equalTo",e.NotEqualTo="notEqualTo"}(h||(h={})),function(e){e.Default="default",e.Loading="loading"}(f||(f={})),function(e){e.Left="left",e.Center="center",e.Right="right"}(g||(g={})),function(e){e.Close="close",e.ArrowRight="arrow-right",e.ArrowLeft="arrow-left",e.Dictionary="dictionary",e.Gear="gear",e.Clarity="clarity",e.Correctness="correctness",e.Engagement="engagement",e.Delivery="delivery",e.Diamond="diamond",e.DiamondSmall="diamondSmall",e.Feedback="feedback",e.Sensitivity="sensitivity",e.ExternalLink="external-link",e.Sparkles="sparkles",e.Ignore="ignore",e.Info="info",e.Proofreader="proofreader",e.More="more",e.Mute="mute",e.Report="report",e.Controls="controls",e.Performance="performance",e.BulletList="bullet-list",e.Accept="accept",e.Copy="copy",e.GButtonSmall="gButtonSmall",e.NewSmall="newSmall",e.Edit="edit",e.User="user",e.Plagiarism="plagiarism",e.QuestionMark="questionMark",e.NewFeature="newFeature",e.Assistant="assistant",e.Warning="warning"}(m||(m={})),function(e){e.AllSuggestions="allSuggestions",e.Correctness="correctness",e.Clarity="clarity",e.Engagement="engagement",e.Delivery="delivery",e.StyleGuide="styleGuide",e.SmartGuidelines="smartGuidelines"}(_||(_={})),function(e){e.Top="top",e.Right="right",e.Bottom="bottom",e.Left="left"}(v||(v={})),function(e){e.Radius0="Radius0",e.RadiusHalf="RadiusHalf",e.Radius1="Radius1",e.Radius2="Radius2",e.Radius3="Radius3"}(y||(y={})),function(e){e.D0="0",e.D0125="0.125",e.D025="0.25",e.D03125="0.3125",e.D0375="0.375",e.D05="0.5",e.D075="0.75",e.D1="1",e.D125="1.25"}(b||(b={})),function(e){e.Italic="italic",e.Bold="bold",e.StrikeoutHorizontal="strikeoutHorizontal",e.StrikeoutDiagonal="strikeoutDiagonal",e.Outline="outline"}(C||(C={})),function(e){e.Small="small",e.Regular="regular",e.Medium="medium",e.HeadingLevel1="headingLevel1",e.HeadingLevel3="headingLevel3",e.HeadingLevel4="headingLevel4"}(S||(S={})),function(e){e.Linear="linear",e.EaseIn="easeIn",e.EaseOut="easeOut",e.EaseInOut="easeInOut"}(E||(E={})),function(e){e.Auto="auto",e.Center="center",e.Top="top",e.Bottom="bottom",e.Left="left",e.Right="right",e.TopCenter="topCenter",e.TopLeft="topLeft",e.TopRight="topRight",e.BottomCenter="bottomCenter",e.BottomLeft="bottomLeft",e.BottomRight="bottomRight"}(T||(T={})),function(e){e.Top="top",e.Middle="middle",e.Bottom="bottom"}(O||(O={}));var W=n(1059),z=((0,D.L)((function(e){return Qe(e)})),(0,D.L)((function(e){var t;return e.sum("type")(((t={}).notify=K(e),t.openSettings=J(e),t.openLearnMore=$(e),t.openPerformanceScore=Z(e),t.openToneDetector=X(e),t.upgradeToPremium=Q(e),t.showHighlights=ee(e),t.hideHighlights=te(e),t.openFeedback=ne(e),t.openCreateSnippetModal=re(e),t.closeCard=ie(e),t.nextCard=oe(e),t.prevCard=ae(e),t.removeRoot=se(e),t.removeAlerts=ue(e),t.applyAlerts=ce(e),t.selectAlternative=le(e),t.transition=de(e),t.openLink=pe(e),t.copyToClipboard=he(e),t.nativeOpenAssistant=fe(e),t.pushAssistantFeed=ge(e),t.popAssistantFeed=me(e),t.focusAssistantCard=_e(e),t.switchView=ve(e),t.newRevision=ye(e),t.highlightAlert=be(e),t.stopApplyingAlerts=Ce(e),t.closePopover=Se(e),t.interactPopover=Te(e),t.openGrammarlyGo=we(e),t.enablePlagiarismCheck=Ie(e),t.disablePlagiarismCheck=xe(e),t.enableWritingExpertCheck=Pe(e),t.disableWritingExpertCheck=Re(e),t.nativeOpenUserSatisfactionFeedback=Ne(e),t))}))),V=Pr(r),K=(0,D.L)((function(e){return e.intersect(e.partial({sourceId:ir(e)}))(e.struct({type:e.literal("notify"),userAction:V(e)}))})),J=(0,D.L)((function(e){return e.struct({type:e.literal("openSettings")})})),$=(0,D.L)((function(e){return e.struct({type:e.literal("openLearnMore")})})),Z=(0,D.L)((function(e){return e.struct({type:e.literal("openPerformanceScore")})})),X=(0,D.L)((function(e){return e.struct({type:e.literal("openToneDetector")})})),Q=(0,D.L)((function(e){return e.struct({type:e.literal("upgradeToPremium")})})),ee=(0,D.L)((function(e){return e.struct({type:e.literal("showHighlights")})})),te=(0,D.L)((function(e){return e.struct({type:e.literal("hideHighlights")})})),ne=(0,D.L)((function(e){return e.struct({type:e.literal("openFeedback")})})),re=(0,D.L)((function(e){return e.struct({type:e.literal("openCreateSnippetModal"),snippetContent:e.string})})),ie=(0,D.L)((function(e){return e.struct({type:e.literal("closeCard")})})),oe=(0,D.L)((function(e){return e.struct({type:e.literal("nextCard")})})),ae=(0,D.L)((function(e){return e.struct({type:e.literal("prevCard")})})),se=(0,D.L)((function(e){return e.struct({type:e.literal("removeRoot")})})),ue=(0,D.L)((function(e){return e.struct({type:e.literal("removeAlerts")})})),ce=(0,D.L)((function(e){return e.struct({type:e.literal("applyAlerts"),alternativeIndex:e.number})})),le=(0,D.L)((function(e){return e.struct({type:e.literal("selectAlternative"),alternativeIndex:e.number})})),de=(0,D.L)((function(e){return e.struct({type:e.literal("transition"),fromName:e.string,toName:e.string,animateFrom:Me(e),animateTo:Me(e)})})),pe=(0,D.L)((function(e){return e.struct({type:e.literal("openLink"),url:e.string})})),he=(0,D.L)((function(e){return e.struct({type:e.literal("copyToClipboard"),text:e.string})})),fe=(0,D.L)((function(e){return e.intersect(e.partial({cardId:e.string}))(e.struct({type:e.literal("nativeOpenAssistant")}))})),ge=(0,D.L)((function(e){return e.intersect(e.partial({cardId:e.string}))(e.struct({type:e.literal("pushAssistantFeed"),feedId:e.string}))})),me=(0,D.L)((function(e){return e.intersect(e.partial({fallbackFeed:er(e)}))(e.struct({type:e.literal("popAssistantFeed")}))})),_e=(0,D.L)((function(e){return e.struct({type:e.literal("focusAssistantCard"),cardId:e.string})})),ve=(0,D.L)((function(e){return e.struct({type:e.literal("switchView"),where:ir(e),selected:Cr(e)})})),ye=(0,D.L)((function(e){return e.struct({type:e.literal("newRevision")})})),be=(0,D.L)((function(e){return e.struct({type:e.literal("highlightAlert"),highlightIndex:e.number})})),Ce=(0,D.L)((function(e){return e.struct({type:e.literal("stopApplyingAlerts")})})),Se=(0,D.L)((function(e){return e.struct({type:e.literal("closePopover"),rootPopoverId:ir(e)})})),Ee=Pr(i),Te=(0,D.L)((function(e){return e.struct({type:e.literal("interactPopover"),rootPopoverId:ir(e),popoverViewId:ir(e),interaction:Ee(e)})})),Oe=Pr(o),we=(0,D.L)((function(e){return e.intersect(e.partial({alertId:e.number}))(e.struct({type:e.literal("openGrammarlyGo"),entryPoint:Oe(e)}))})),Ie=(0,D.L)((function(e){return e.struct({type:e.literal("enablePlagiarismCheck")})})),xe=(0,D.L)((function(e){return e.struct({type:e.literal("disablePlagiarismCheck")})})),Pe=(0,D.L)((function(e){return e.struct({type:e.literal("enableWritingExpertCheck")})})),Re=(0,D.L)((function(e){return e.struct({type:e.literal("disableWritingExpertCheck")})})),Ne=(0,D.L)((function(e){return e.struct({type:e.literal("nativeOpenUserSatisfactionFeedback")})})),ke=(0,D.L)((function(e){return e.readonly(e.array(z(e)))})),Me=Pr(a),je=(0,D.L)((function(e){return e.lazy("Behavior",(function(){return Ae(e)}))})),Ae=(0,D.L)((function(e){var t;return e.sum("type")(((t={})["behavior:strongAlertRef"]=De(e),t["behavior:animation:fadeIn"]=Le(e),t["behavior:animation:fadeOut"]=Ue(e),t["behavior:popoverAnchor"]=He(e),t["behavior:lifecycle"]=Ge(e),t))})),De=(0,D.L)((function(e){return e.intersect(e.partial({name:$e(e)}))(e.struct({type:e.literal("behavior:strongAlertRef"),id:ir(e),alertIds:e.readonly(e.array(e.string)),onEmpty:ke(e)}))})),Le=(0,D.L)((function(e){return e.struct({type:e.literal("behavior:animation:fadeIn"),id:ir(e),timeCurve:wr(e)})})),Ue=(0,D.L)((function(e){return e.struct({type:e.literal("behavior:animation:fadeOut"),id:ir(e),timeCurve:wr(e)})})),He=(0,D.L)((function(e){return e.lazy("BehaviorPopoverAnchor",(function(){return Be(e)}))})),Be=(0,D.L)((function(e){return e.intersect(e.partial({view:fr(e)}))(e.struct({type:e.literal("behavior:popoverAnchor"),id:ir(e),positionHint:mr(e)}))})),Ge=(0,D.L)((function(e){return e.struct({type:e.literal("behavior:lifecycle"),onMount:ke(e),onUnmount:ke(e)})})),qe=(0,D.L)((function(e){return e.readonly(e.array(je(e)))})),Ye=(0,D.L)((function(e){return e.struct({topLeft:_r(e),topRight:_r(e),bottomRight:_r(e),bottomLeft:_r(e)})})),Fe=Pr(s),We=Pr(u),ze=Pr(c),Ve=Pr(l),Ke=Pr(d),Je=(0,D.L)((function(e){return e.intersect(e.partial({label:e.string}))(e.intersect(e.partial({description:e.string}))(e.struct({})))})),$e=(0,D.L)((function(e){var t;return e.sum("kind")(((t={}).unknown=Ze(e),t.known=Xe(e),t))})),Ze=(0,D.L)((function(e){return e.struct({kind:e.literal("unknown"),value:e.string})})),Xe=(0,D.L)((function(e){return e.struct({kind:e.literal("known"),value:Ke(e)})})),Qe=(0,D.L)((function(e){return e.lazy("Content",(function(){return et(e)}))})),et=(0,D.L)((function(e){var t;return e.sum("type")(((t={}).text=tt(e),t.assistantFeed=at(e),t.assistantCard=ut(e),t.popoverStack=lt(e),t.inlineCard=pt(e),t["gButton:default"]=ft(e),t["gButton:tone"]=gt(e),t["gButton:proofit"]=mt(e),t["gButton:get-started"]=_t(e),t["gButton:plagiarism"]=vt(e),t["gButton:writingExpert"]=yt(e),t.gButton=bt(e),t.proofitButton=Ct(e),t.lensesSwitchPanel=Et(e),t.strongAlertRef=Tt(e),t.column=wt(e),t.row=xt(e),t.block=Nt(e),t.box=Mt(e),t.scroll=At(e),t.list=Yt(e),t.selectableDropDownMenu=Wt(e),t.dropDownMenuButton=zt(e),t.icon=$t(e),t.image=Zt(e),t.button=Xt(e),t.sticker=en(e),t.tooltip=nn(e),t.clickableText=on(e),t.count=an(e),t.alertsCount=sn(e),t.alternativeChoice=ln(e),t.slider=mn(e),t.alternativeSlider=bn(e),t.nativeSkillsModal=Sn(e),t.nativeSkillsList=En(e),t.nativeSkillsView=Tn(e),t.nativeToneInsightsModal=On(e),t.nativeLearnMoreModal=wn(e),t.nativeSettingsModal=In(e),t.nativeFeedbackModal=xn(e),t.nativeGetStartedChecklistModal=Pn(e),t.nativeProofitModal=Rn(e),t.nativeKeyTakeawaysAssistantCard=Nn(e),t.nativeInlineCardContent=kn(e),t.nativePerformanceScoreButton=Mn(e),t.viewStack=jn(e),t.nativeExperimentalGBConsistencyUpsellFooter=Dn(e),t.radioButtonsGroup=Un(e),t.nativeExperimentalGBToneInsightsUpsellFooter=Hn(e),t.collapsedCard=Bn(e),t.shortFormCard=qn(e),t.longFormCard=Fn(e),t.progressBar=Vn(e),t.horizontalRule=Kn(e),t.globalPart=Jn(e),t.globalPartPlaceholder=Zn(e),t))})),tt=(0,D.L)((function(e){return e.intersect(e.partial({backgroundColor:Ve(e)}))(e.intersect(e.partial({outlineColor:Ve(e)}))(e.struct({type:e.literal("text"),id:ir(e),meta:Je(e),size:Or(e),text:e.string,textColor:Ve(e),format:e.readonly(e.array(Tr(e))),selectable:e.boolean})))})),nt=Pr(p),rt=(0,D.L)((function(e){return e.struct({orderBy:e.string,direction:nt(e)})})),it=Pr(h),ot=(0,D.L)((function(e){return e.struct({property:e.string,condition:it(e),value:e.number})})),at=(0,D.L)((function(e){return e.lazy("ContentAssistantFeed",(function(){return st(e)}))})),st=(0,D.L)((function(e){return e.intersect(e.partial({footer:Qe(e)}))(e.intersect(e.partial({onEmpty:ke(e)}))(e.intersect(e.partial({onAssistantClose:ke(e)}))(e.intersect(e.partial({name:$e(e)}))(e.struct({type:e.literal("assistantFeed"),id:ir(e),header:Qe(e),ordering:e.readonly(e.array(rt(e))),filtering:e.readonly(e.array(ot(e))),onRemove:ke(e)})))))})),ut=(0,D.L)((function(e){return e.lazy("ContentAssistantCard",(function(){return ct(e)}))})),ct=(0,D.L)((function(e){return e.intersect(e.partial({properties:e.readonly(e.record(e.nullable(e.number)))}))(e.intersect(e.partial({footer:Qe(e)}))(e.intersect(e.partial({name:$e(e)}))(e.struct({type:e.literal("assistantCard"),id:ir(e),meta:Je(e),child:Qe(e),onFocus:ke(e),onBlur:ke(e)}))))})),lt=(0,D.L)((function(e){return e.lazy("ContentPopoverStack",(function(){return dt(e)}))})),dt=(0,D.L)((function(e){return e.struct({type:e.literal("popoverStack"),id:ir(e),views:e.readonly(e.record(fr(e))),selected:Cr(e)})})),pt=(0,D.L)((function(e){return e.lazy("ContentInlineCard",(function(){return ht(e)}))})),ht=(0,D.L)((function(e){return e.intersect(e.partial({minWidth:vr(e)}))(e.intersect(e.partial({maxWidth:vr(e)}))(e.intersect(e.partial({behaviors:qe(e)}))(e.struct({type:e.literal("inlineCard"),id:ir(e),meta:Je(e),child:Qe(e),onFocus:ke(e)}))))})),ft=(0,D.L)((function(e){return e.struct({type:e.literal("gButton:default"),id:ir(e),meta:Je(e),actions:ke(e)})})),gt=(0,D.L)((function(e){return e.struct({type:e.literal("gButton:tone"),id:ir(e),meta:Je(e),actions:ke(e)})})),mt=(0,D.L)((function(e){return e.struct({type:e.literal("gButton:proofit"),id:ir(e),meta:Je(e),actions:ke(e)})})),_t=(0,D.L)((function(e){return e.struct({type:e.literal("gButton:get-started"),id:ir(e),meta:Je(e),actions:ke(e)})})),vt=(0,D.L)((function(e){return e.struct({type:e.literal("gButton:plagiarism"),id:ir(e),meta:Je(e),actions:ke(e)})})),yt=(0,D.L)((function(e){return e.struct({type:e.literal("gButton:writingExpert"),id:ir(e),meta:Je(e),actions:ke(e)})})),bt=(0,D.L)((function(e){return e.struct({type:e.literal("gButton"),id:ir(e),meta:Je(e),actions:ke(e)})})),Ct=(0,D.L)((function(e){return e.struct({type:e.literal("proofitButton"),id:ir(e),meta:Je(e),actions:ke(e)})})),St=(0,D.L)((function(e){return e.struct({id:ir(e),meta:Je(e),kind:or(e),label:e.string,onClickActions:ke(e)})})),Et=(0,D.L)((function(e){return e.struct({type:e.literal("lensesSwitchPanel"),id:ir(e),meta:Je(e),lensSwitchButtons:e.readonly(e.array(St(e)))})})),Tt=(0,D.L)((function(e){return e.lazy("ContentStrongAlertRef",(function(){return Ot(e)}))})),Ot=(0,D.L)((function(e){return e.intersect(e.partial({name:$e(e)}))(e.struct({type:e.literal("strongAlertRef"),id:ir(e),alertIds:e.readonly(e.array(e.string)),onEmpty:ke(e),child:Qe(e)}))})),wt=(0,D.L)((function(e){return e.lazy("ContentColumn",(function(){return It(e)}))})),It=(0,D.L)((function(e){return e.intersect(e.partial({name:$e(e)}))(e.intersect(e.partial({behaviors:qe(e)}))(e.struct({type:e.literal("column"),id:ir(e),children:e.readonly(e.array(Qe(e)))})))})),xt=(0,D.L)((function(e){return e.lazy("ContentRow",(function(){return Pt(e)}))})),Pt=(0,D.L)((function(e){return e.intersect(e.partial({name:$e(e)}))(e.intersect(e.partial({spacing:Er(e)}))(e.intersect(e.partial({behaviors:qe(e)}))(e.struct({type:e.literal("row"),id:ir(e),left:e.readonly(e.array(Qe(e))),right:e.readonly(e.array(Qe(e))),verticalAlign:xr(e)}))))})),Rt=(0,D.L)((function(e){return e.struct({vertical:Sr(e),horizontal:Sr(e)})})),Nt=(0,D.L)((function(e){return e.lazy("ContentBlock",(function(){return kt(e)}))})),kt=(0,D.L)((function(e){return e.intersect(e.partial({name:$e(e)}))(e.intersect(e.partial({fraction:e.number}))(e.intersect(e.partial({spacing:Er(e)}))(e.intersect(e.partial({innerSpacing:Rt(e)}))(e.intersect(e.partial({horizontalAlign:tr(e)}))(e.intersect(e.partial({verticalAlign:xr(e)}))(e.intersect(e.partial({maxLines:e.number}))(e.struct({type:e.literal("block"),id:ir(e),parts:e.readonly(e.array(Qe(e)))}))))))))})),Mt=(0,D.L)((function(e){return e.lazy("ContentBox",(function(){return jt(e)}))})),jt=(0,D.L)((function(e){return e.intersect(e.partial({name:$e(e)}))(e.intersect(e.partial({padding:Er(e)}))(e.intersect(e.partial({borderRadius:Ye(e)}))(e.intersect(e.partial({backgroundColor:Ve(e)}))(e.intersect(e.partial({minWidth:vr(e)}))(e.intersect(e.partial({behaviors:qe(e)}))(e.struct({type:e.literal("box"),id:ir(e),child:Qe(e)})))))))})),At=(0,D.L)((function(e){return e.lazy("ContentScroll",(function(){return Dt(e)}))})),Dt=(0,D.L)((function(e){return e.intersect(e.partial({name:$e(e)}))(e.struct({type:e.literal("scroll"),id:ir(e),child:Qe(e),maxHeight:vr(e)}))})),Lt=(0,D.L)((function(e){var t;return e.sum("type")(((t={}).text=Ut(e),t.icon=Ht(e),t))})),Ut=(0,D.L)((function(e){return e.struct({type:e.literal("text"),text:e.string})})),Ht=(0,D.L)((function(e){return e.struct({type:e.literal("icon"),icon:nr(e)})})),Bt=(0,D.L)((function(e){return e.intersect(e.partial({tooltip:e.string}))(e.struct({id:ir(e),meta:Je(e),label:Lt(e),onClickActions:ke(e)}))})),Gt=(0,D.L)((function(e){return e.lazy("ContentListItem",(function(){return qt(e)}))})),qt=(0,D.L)((function(e){return e.intersect(e.partial({behaviors:qe(e)}))(e.intersect(e.partial({tooltip:e.string}))(e.struct({id:ir(e),meta:Je(e),label:Qe(e),actions:ke(e),secondaryButtons:e.readonly(e.array(Bt(e)))})))})),Yt=(0,D.L)((function(e){return e.lazy("ContentList",(function(){return Ft(e)}))})),Ft=(0,D.L)((function(e){return e.intersect(e.partial({name:$e(e)}))(e.intersect(e.partial({itemFocusedColor:Ve(e)}))(e.intersect(e.partial({itemHoveredColor:Ve(e)}))(e.struct({type:e.literal("list"),id:ir(e),meta:Je(e),items:e.readonly(e.array(Gt(e)))}))))})),Wt=(0,D.L)((function(e){return e.intersect(e.partial({name:$e(e)}))(e.intersect(e.partial({selectedItem:ir(e)}))(e.intersect(e.partial({placeholder:e.string}))(e.struct({type:e.literal("selectableDropDownMenu"),id:ir(e),meta:Je(e),onSelectActions:ke(e),select:br(e)}))))})),zt=(0,D.L)((function(e){return e.intersect(e.partial({name:$e(e)}))(e.struct({type:e.literal("dropDownMenuButton"),id:ir(e),meta:Je(e),icon:nr(e),onClickActions:ke(e),menu:ur(e)}))})),Vt=(0,D.L)((function(e){var t;return e.sum("kind")(((t={}).known=Kt(e),t.url=Jt(e),t))})),Kt=(0,D.L)((function(e){return e.struct({kind:e.literal("known"),name:rr(e)})})),Jt=(0,D.L)((function(e){return e.intersect(e.partial({size:Sr(e)}))(e.struct({kind:e.literal("url"),name:e.string,url:e.string}))})),$t=(0,D.L)((function(e){return e.intersect(e.partial({backgroundColor:Ve(e)}))(e.struct({type:e.literal("icon"),id:ir(e),meta:Je(e),source:Vt(e)}))})),Zt=(0,D.L)((function(e){return e.intersect(e.partial({backgroundColor:Ve(e)}))(e.intersect(e.partial({borderRadius:vr(e)}))(e.struct({type:e.literal("image"),id:ir(e),meta:Je(e),name:$e(e),url:e.string,width:vr(e),height:vr(e)})))})),Xt=(0,D.L)((function(e){return e.lazy("ContentButton",(function(){return Qt(e)}))})),Qt=(0,D.L)((function(e){return e.intersect(e.partial({tooltip:e.string}))(e.intersect(e.partial({horizontalAlign:tr(e)}))(e.intersect(e.partial({behaviors:qe(e)}))(e.struct({type:e.literal("button"),id:ir(e),meta:Je(e),name:$e(e),kind:Fe(e),state:ze(e),label:Qe(e),actions:ke(e),shape:We(e)}))))})),en=(0,D.L)((function(e){return e.lazy("ContentSticker",(function(){return tn(e)}))})),tn=(0,D.L)((function(e){return e.struct({type:e.literal("sticker"),id:ir(e),meta:Je(e),name:$e(e),label:Qe(e),child:Qe(e),stickerColor:Ve(e),stickerReverseColor:Ve(e),onClickActions:ke(e)})})),nn=(0,D.L)((function(e){return e.lazy("ContentTooltip",(function(){return rn(e)}))})),rn=(0,D.L)((function(e){return e.struct({type:e.literal("tooltip"),id:ir(e),meta:Je(e),name:$e(e),text:e.string,child:Qe(e),alignment:Ir(e)})})),on=(0,D.L)((function(e){return e.struct({type:e.literal("clickableText"),id:ir(e),meta:Je(e),name:$e(e),onClickActions:ke(e),text:e.string,size:Or(e),textColor:Ve(e),format:e.readonly(e.array(Tr(e)))})})),an=(0,D.L)((function(e){return e.intersect(e.partial({textColor:Ve(e)}))(e.struct({type:e.literal("count"),id:ir(e),meta:Je(e),value:e.string,backgroundColor:Ve(e)}))})),sn=(0,D.L)((function(e){return e.intersect(e.partial({backgroundColor:Ve(e)}))(e.intersect(e.partial({outlineColor:Ve(e)}))(e.struct({type:e.literal("alertsCount"),id:ir(e),meta:Je(e),size:Or(e),textColor:Ve(e),format:e.readonly(e.array(Tr(e)))})))})),un=(0,D.L)((function(e){return e.lazy("ContentAlternativeChoiceAlterna",(function(){return cn(e)}))})),cn=(0,D.L)((function(e){return e.struct({label:Qe(e),preview:Qe(e)})})),ln=(0,D.L)((function(e){return e.lazy("ContentAlternativeChoice",(function(){return dn(e)}))})),dn=(0,D.L)((function(e){return e.struct({type:e.literal("alternativeChoice"),id:ir(e),meta:Je(e),alternatives:e.readonly(e.array(un(e)))})})),pn=(0,D.L)((function(e){var t;return e.sum("type")(((t={}).icon=fn(e),t))})),hn=(0,D.L)((function(e){var t;return e.sum("kind")(((t={}).known=Kt(e),t.url=Jt(e),t))})),fn=(0,D.L)((function(e){return e.intersect(e.partial({backgroundColor:Ve(e)}))(e.struct({type:e.literal("icon"),id:ir(e),source:hn(e)}))})),gn=(0,D.L)((function(e){return e.struct({id:ir(e),icon:pn(e),label:e.string,actions:ke(e)})})),mn=(0,D.L)((function(e){return e.struct({type:e.literal("slider"),id:ir(e),meta:Je(e),segmentSize:vr(e),fillColor:Ve(e),choices:e.readonly(e.array(gn(e)))})})),_n=(0,D.L)((function(e){var t;return e.sum("type")(((t={}).icon=fn(e),t))})),vn=(0,D.L)((function(e){return e.lazy("ContentAlternativeSliderChoice",(function(){return yn(e)}))})),yn=(0,D.L)((function(e){return e.struct({id:ir(e),icon:_n(e),label:e.string,actions:ke(e),preview:Qe(e)})})),bn=(0,D.L)((function(e){return e.lazy("ContentAlternativeSlider",(function(){return Cn(e)}))})),Cn=(0,D.L)((function(e){return e.struct({type:e.literal("alternativeSlider"),id:ir(e),meta:Je(e),segmentSize:vr(e),fillColor:Ve(e),choices:e.readonly(e.array(vn(e)))})})),Sn=(0,D.L)((function(e){return e.struct({type:e.literal("nativeSkillsModal"),id:ir(e)})})),En=(0,D.L)((function(e){return e.struct({type:e.literal("nativeSkillsList"),id:ir(e),onSelect:ke(e)})})),Tn=(0,D.L)((function(e){return e.struct({type:e.literal("nativeSkillsView"),id:ir(e)})})),On=(0,D.L)((function(e){return e.struct({type:e.literal("nativeToneInsightsModal"),id:ir(e)})})),wn=(0,D.L)((function(e){return e.struct({type:e.literal("nativeLearnMoreModal"),id:ir(e)})})),In=(0,D.L)((function(e){return e.struct({type:e.literal("nativeSettingsModal"),id:ir(e)})})),xn=(0,D.L)((function(e){return e.struct({type:e.literal("nativeFeedbackModal"),id:ir(e)})})),Pn=(0,D.L)((function(e){return e.struct({type:e.literal("nativeGetStartedChecklistModal"),id:ir(e),onComplete:ke(e)})})),Rn=(0,D.L)((function(e){return e.struct({type:e.literal("nativeProofitModal"),id:ir(e)})})),Nn=(0,D.L)((function(e){return e.struct({type:e.literal("nativeKeyTakeawaysAssistantCard"),id:ir(e)})})),kn=(0,D.L)((function(e){return e.struct({type:e.literal("nativeInlineCardContent"),id:ir(e),onDetailsClick:ke(e)})})),Mn=(0,D.L)((function(e){return e.struct({type:e.literal("nativePerformanceScoreButton"),id:ir(e)})})),jn=(0,D.L)((function(e){return e.lazy("ContentViewStack",(function(){return An(e)}))})),An=(0,D.L)((function(e){return e.struct({type:e.literal("viewStack"),id:ir(e),views:e.readonly(e.record(Qe(e))),selected:Cr(e)})})),Dn=(0,D.L)((function(e){return e.struct({type:e.literal("nativeExperimentalGBConsistencyUpsellFooter"),id:ir(e)})})),Ln=(0,D.L)((function(e){return e.struct({id:ir(e),meta:Je(e),label:e.string,onSelect:ke(e)})})),Un=(0,D.L)((function(e){return e.struct({type:e.literal("radioButtonsGroup"),id:ir(e),meta:Je(e),options:e.readonly(e.array(Ln(e)))})})),Hn=(0,D.L)((function(e){return e.struct({type:e.literal("nativeExperimentalGBToneInsightsUpsellFooter"),id:ir(e)})})),Bn=(0,D.L)((function(e){return e.lazy("ContentCollapsedCard",(function(){return Gn(e)}))})),Gn=(0,D.L)((function(e){return e.intersect(e.partial({quickActions:Qe(e)}))(e.struct({type:e.literal("collapsedCard"),id:ir(e),meta:Je(e),child:Qe(e)}))})),qn=(0,D.L)((function(e){return e.lazy("ContentShortFormCard",(function(){return Yn(e)}))})),Yn=(0,D.L)((function(e){return e.struct({type:e.literal("shortFormCard"),id:ir(e),child:Qe(e)})})),Fn=(0,D.L)((function(e){return e.lazy("ContentLongFormCard",(function(){return Wn(e)}))})),Wn=(0,D.L)((function(e){return e.struct({type:e.literal("longFormCard"),id:ir(e),collapsedContent:Qe(e),fullContent:Qe(e),behaviors:qe(e),feedProperties:Qn(e)})})),zn=Pr(f),Vn=(0,D.L)((function(e){return e.intersect(e.partial({pinPointValue:cr(e)}))(e.intersect(e.partial({borderColor:Ve(e)}))(e.intersect(e.partial({height:vr(e)}))(e.struct({type:e.literal("progressBar"),id:ir(e),meta:Je(e),backgroundColor:Ve(e),fillColor:Ve(e),value:cr(e),state:zn(e)}))))})),Kn=(0,D.L)((function(e){return e.struct({type:e.literal("horizontalRule"),id:ir(e),meta:Je(e)})})),Jn=(0,D.L)((function(e){return e.lazy("ContentGlobalPart",(function(){return $n(e)}))})),$n=(0,D.L)((function(e){return e.struct({type:e.literal("globalPart"),id:ir(e),content:Qe(e),name:$e(e)})})),Zn=(0,D.L)((function(e){return e.lazy("ContentGlobalPartPlaceholder",(function(){return Xn(e)}))})),Xn=(0,D.L)((function(e){return e.intersect(e.partial({child:Qe(e)}))(e.struct({type:e.literal("globalPartPlaceholder"),id:ir(e),globalPartId:ir(e)}))})),Qn=(0,D.L)((function(e){return e.readonly(e.record(e.nullable(e.number)))})),er=(0,D.L)((function(e){return e.intersect(e.partial({cardId:e.string}))(e.struct({feedId:e.string}))})),tr=Pr(g),nr=(0,D.L)((function(e){var t;return e.sum("type")(((t={}).icon=$t(e),t))})),rr=Pr(m),ir=(0,D.L)((function(e){return e.string})),or=Pr(_),ar=(0,D.L)((function(e){return e.intersect(e.partial({icon:nr(e)}))(e.struct({id:ir(e),meta:Je(e),text:e.string,onClickActions:ke(e)}))})),sr=(0,D.L)((function(e){return e.intersect(e.partial({title:e.string}))(e.struct({items:e.readonly(e.array(ar(e)))}))})),ur=(0,D.L)((function(e){return e.struct({meta:Je(e),label:e.string,sections:e.readonly(e.array(sr(e)))})})),cr=(0,D.L)((function(e){return e.number})),lr=(0,D.L)((function(e){var t;return e.sum("kind")(((t={}).component=dr(e),t.gButton=pr(e),t.nativeComponent=hr(e),t))})),dr=(0,D.L)((function(e){return e.struct({kind:e.literal("component"),id:ir(e)})})),pr=(0,D.L)((function(e){return e.struct({kind:e.literal("gButton")})})),hr=(0,D.L)((function(e){return e.struct({kind:e.literal("nativeComponent"),knownName:Ke(e)})})),fr=(0,D.L)((function(e){return e.lazy("PopoverView",(function(){return gr(e)}))})),gr=(0,D.L)((function(e){return e.intersect(e.partial({onShow:ke(e)}))(e.intersect(e.partial({onDismiss:ke(e)}))(e.intersect(e.partial({onFulfill:ke(e)}))(e.struct({id:ir(e),rootPopoverId:ir(e),anchor:lr(e),child:Qe(e)}))))})),mr=Pr(v),_r=Pr(y),vr=(0,D.L)((function(e){return e.number})),yr=(0,D.L)((function(e){return e.struct({id:ir(e),meta:Je(e),label:e.string,onClickActions:ke(e)})})),br=(0,D.L)((function(e){return e.struct({meta:Je(e),label:e.string,items:e.readonly(e.array(yr(e)))})})),Cr=(0,D.L)((function(e){return e.string})),Sr=Pr(b),Er=(0,D.L)((function(e){return e.struct({top:Sr(e),right:Sr(e),bottom:Sr(e),left:Sr(e)})})),Tr=Pr(C),Or=Pr(S),wr=Pr(E),Ir=Pr(T),xr=Pr(O);function Pr(e){var t=Object.keys(e).map((function(t){return e[t]})),n=t[0],r=t.slice(1);return(0,D.L)((function(e){return e.literal.apply(e,(0,W.fX)([n],r,!1))}))}var Rr,Nr,kr,Mr,jr,Ar,Dr,Lr,Ur,Hr,Br,Gr,qr,Yr,Fr,Wr,zr,Vr,Kr,Jr,$r,Zr,Xr,Qr,ei,ti=["proofitButton","newRevision","gButton:default","gButton:tone","gButton:proofit","gButton:get-started","gButton:plagiarism","gButton:writingExpert","nativePerformanceScoreButton","globalPart","enableWritingExpertCheck","disableWritingExpertCheck"],ni=n(38908);function ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ii(e){if(Array.isArray(e))return e}function oi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ai(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function si(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){oi(e,t,n[t])}))}return e}function ci(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function li(e){return function(e){if(Array.isArray(e))return ri(e)}(e)||ai(e)||di(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function di(e,t){if(e){if("string"==typeof e)return ri(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ri(e,t):void 0}}function pi(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function hi(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function fi(e){return ti.includes(e.type)}!function(e){e.isStrongAlertRefComponent=function(e){return"child"in e},e.isStrongAlertRefBehavior=function(e){return!("child"in e)}}(Rr||(Rr={})),function(e){e.isStrongAlertRef=function(e){return"strongAlertRef"===e.type},e.create=function(e,t,n){return{type:"strongAlertRef",alertIds:t,child:e,onEmpty:n,id:Jr.from("strongAlertRef")}}}(Nr||(Nr={})),function(e){e.isLongFormCard=function(e){return"longFormCard"===e.type},e.create=function(e,t,n){return{type:"longFormCard",fullContent:e,collapsedContent:t,id:Jr.from("longFormCard"),behaviors:[Mr.StrongAlertRef.create(n,[])],feedProperties:{}}}}(kr||(kr={})),function(e){var t,n;e.isStrongAlertRef=function(e){return"behavior:strongAlertRef"===e.type},(n=e.StrongAlertRef||(e.StrongAlertRef={})).create=function(e,t){return{id:Jr.from("behavior:strongAlertRef"),type:"behavior:strongAlertRef",alertIds:e,onEmpty:t}},n.eq=D.n(A.Pw)(De),e.isPopoverAnchor=function(e){return"behavior:popoverAnchor"===e.type},(t=e.PopoverAnchor||(e.PopoverAnchor={})).create=function(e,t){return{type:"behavior:popoverAnchor",id:e,positionHint:t}},t.nonEmpty=function(e){return!!e.view}}(Mr||(Mr={})),function(e){e.create=function(e,t,n,r,i){return{type:"row",left:e,right:t,spacing:n,verticalAlign:r,id:Jr.from("row"),behaviors:i?[Mr.PopoverAnchor.create(i,v.Top)]:void 0}},e.isRow=function(e){return"row"===e.type}}(jr||(jr={})),function(e){e.create=function(e){return{type:"column",children:e,id:Jr.from("column")}}}(Ar||(Ar={})),function(e){var t=e.Type="block";e.create=function(e,n,r){for(var i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return{type:t,name:$r.unknown(e),parts:o,spacing:n,innerSpacing:r,id:Jr.from(e)}},e.isBlock=function(e){return e.type===t},e.hasOnlyTextParts=function(e){return e.parts.every(Lr.isText)}}(Dr||(Dr={})),function(e){var t=e.Type="text";e.create=function(e,n,r,i,o,a,s){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};return{type:t,text:e,size:n,format:r,textColor:i,backgroundColor:o,outlineColor:a,id:Jr.from(t),selectable:s,meta:u}},e.isText=function(e){return e.type===t}}(Lr||(Lr={})),function(e){e.create=function(e,t){return{label:e,preview:t}}}(Ur||(Ur={})),function(e){e.create=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{type:"alternativeChoice",alternatives:n,id:Jr.from("alternativeChoice"),meta:e}}}(Hr||(Hr={})),function(e){e.create=function(e,t){return{type:"viewStack",id:Jr.from("ViewStack"),views:t,selected:e}}}(Br||(Br={})),function(e){var t=e.Type="button";!function(e){e.isTransitionAction=function(e){return"transition"===e.type},e.isApplyAlertsAction=function(e){return"applyAlerts"===e.type},e.createSelectAlternativeAction=function(e){return{type:"selectAlternative",alternativeIndex:e}}}(e.Action||(e.Action={})),e.isButton=function(e){return"button"===e.type},e.create=function(e,n,r,i,o,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:u.Square,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},p=Jr.from(e);return{type:t,id:p,name:$r.unknown(e),tooltip:o,kind:i,state:c.Enabled,label:{type:Dr.Type,name:$r.unknown(""),parts:[Lr.create(n,S.Regular,[],l.CoreNeutral0,void 0,void 0,!1)],spacing:a,id:Jr.from("label-button-"+p)},actions:r,shape:s,meta:d}},e.createIcon=function(e,n,r,i,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:u.Square,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},l=Jr.from(e),d="icon-button-"+e;return{type:t,id:l,name:$r.unknown(e),tooltip:o,kind:i,state:c.Enabled,label:{type:Dr.Type,name:$r.unknown(d),spacing:Yr.create("0","0.25","0","0.25"),parts:[qr.create(n,void 0)],id:Jr.from(d)},actions:r,shape:a,meta:s}}}(Gr||(Gr={})),function(e){var t,n=e.Type="icon";(t=e.Source||(e.Source={})).createKnown=function(e){return{kind:"known",name:e}},t.createUrl=function(e,t,n){return{kind:"url",name:t,url:e,size:n}},e.create=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{type:n,source:e,backgroundColor:t,id:Jr.from(n),meta:r}}}(qr||(qr={})),function(e){e.create=function(e,t,n,r){return{top:e,bottom:n,left:r,right:t}}}(Yr||(Yr={})),function(e){e.create=function(e,t){return{vertical:t,horizontal:e}}}(Fr||(Fr={})),function(e){var t=e.Type="count";e.create=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;return{type:"count",backgroundColor:n,value:e,id:Jr.from(t),meta:r,textColor:i}}}(Wr||(Wr={})),function(e){(e.Choice||(e.Choice={})).create=function(e,t,n){return{type:"sliderChoice",id:Jr.from("slider-choice-"+t.toLowerCase()),icon:e,label:t,actions:n}},e.create=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{type:"slider",segmentSize:e,fillColor:t,choices:n,id:Jr.from("slider"),meta:r}}}(zr||(zr={})),function(e){(e.Choice||(e.Choice={})).create=function(e,t,n,r){return{id:Jr.from("alternative-slider-choice-"+t.toLowerCase()),icon:e,label:t,actions:n,preview:r}},e.create=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{type:"alternativeSlider",segmentSize:e,fillColor:t,choices:n,id:Jr.from("alternativeSlider"),meta:r}}}(Vr||(Vr={})),function(e){e.create=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:"list",items:e,id:Jr.from("list"),meta:t}},(e.Item||(e.Item={})).create=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{id:Jr.from("listItem"),label:e,behaviors:n,actions:t,secondaryButtons:r,meta:i}}}(Kr||(Kr={})),function(e){e.from=function(e){return e+"#"+ni.G7(6)}}(Jr||(Jr={})),function(e){e.unknown=function(e){return{kind:"unknown",value:e}}}($r||($r={})),function(e){e.create=function(e,t,n){return{type:"popoverStack",id:e,views:n,selected:t}},e.createView=function(e,t,n,r){return{id:e,rootPopoverId:t,child:n,anchor:{kind:"component",id:r||ni.G7(3)}}}}(Zr||(Zr={})),function(e){var t=e.Type="globalPart";e.create=function(e,n,r){return{type:t,id:e,content:n,name:$r.unknown(r)}},e.isGlobalPart=function(e){return e.type===t}}(Xr||(Xr={})),function(e){var t=e.Type="globalPartPlaceholder";e.create=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jr.from(t);return{type:t,id:n,globalPartId:e,child:arguments.length>2?arguments[2]:void 0}},e.isGlobalPartPlaceholder=function(e){return e.type===t}}(Qr||(Qr={})),function(e){var t,n=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder,i=li(arguments.length>3&&void 0!==arguments[3]?arguments[3]:[]).concat([e.id]);switch(r){case t.PreOrder:return n(e,i),w(e,n,r,i);case t.PostOrder:return w(e,n,r,i),n(e,i);default:(0,L.xb)(r)}},r=function(e){var n,r=arguments;return pi(this,(function(i){switch(i.label){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:t.PreOrder,[5,hi(l(e,n,[]))];case 1:return i.sent(),[2]}}))},i=function(e,t,n,r){var i=r;return ei.forEach(e,(function(e,n){return i=t(i,e,n)}),n),i},o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ei.TreeTraversal.PreOrder,i=!0,o=!1,a=void 0;try{for(var s,u=r(e,n)[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(c.type===t)return U.some(c)}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return U.none},a=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder;switch(r){case t.PreOrder:return(0,k.pipe)(n(e),(function(e){return b(e,n,r)}));case t.PostOrder:return(0,k.pipe)(b(e,n,r),U.map(n));default:(0,L.xb)(r)}},s=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder;switch(r){case t.PreOrder:return(0,k.pipe)(e,U.fromPredicate(n),U.chain((function(e){return(0,k.pipe)(C(e,n,r),U.map((function(t){return ui({},e,t)})))})));case t.PostOrder:return(0,k.pipe)(C(e,n,r),U.chain((function(t){return U.fromPredicate(n)(ui({},e,t))})));default:(0,L.xb)(r)}},u=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder;switch(r){case t.PreOrder:return(0,k.pipe)(n(e),U.chain((function(e){return(0,k.pipe)(S(e,n,r),U.map((function(t){return ui({},e,t)})))})));case t.PostOrder:return(0,k.pipe)(S(e,n,r),U.chain((function(t){return n(ui({},e,t))})));default:(0,L.xb)(r)}},c=function(e){return s(e,(0,H.AU)(y),t.PostOrder)},l=function(e){var n,r,i=arguments;return pi(this,(function(o){switch(o.label){case 0:switch(n=i.length>1&&void 0!==i[1]?i[1]:t.PreOrder,r=li(i.length>2&&void 0!==i[2]?i[2]:[]).concat([e.id]),n){case t.PreOrder:return[3,1];case t.PostOrder:return[3,4]}return[3,7];case 1:return[4,e];case 2:return o.sent(),[5,hi(p(e,n,r))];case 3:return o.sent(),[3,8];case 4:return[5,hi(p(e,n,r))];case 5:return o.sent(),[4,e];case 6:return o.sent(),[3,8];case 7:(0,L.xb)(n),o.label=8;case 8:return[2]}}))},d=function(e){var n,r,i,o=arguments;return pi(this,(function(a){switch(a.label){case 0:n=o.length>1&&void 0!==o[1]?o[1]:t.PreOrder,r=o.length>2?o[2]:void 0,i=0,a.label=1;case 1:return i<e.length?[5,hi(l(e[i],n,r))]:[3,4];case 2:a.sent(),a.label=3;case 3:return i++,[3,1];case 4:return[2]}}))},p=function(e){var n,r,i,o,a,s,u,c,p=arguments;return pi(this,(function(h){switch(h.label){case 0:switch(n=p.length>1&&void 0!==p[1]?p[1]:t.PreOrder,r=p.length>2?p[2]:void 0,e.type){case"column":return[3,1];case"assistantCard":return[3,3];case"popoverStack":return[3,8];case"strongAlertRef":return[3,10];case"row":return[3,12];case"block":return[3,15];case"box":case"scroll":case"inlineCard":case"shortFormCard":return[3,17];case"globalPart":return[3,19];case"globalPartPlaceholder":return[3,21];case"list":return[3,23];case"button":return[3,25];case"alternativeChoice":return[3,27];case"alternativeSlider":return[3,32];case"assistantFeed":return[3,37];case"viewStack":return[3,42];case"collapsedCard":return[3,44];case"longFormCard":return[3,49];case"sticker":return[3,52];case"tooltip":return[3,55];case"icon":case"image":case"text":case"clickableText":case"count":case"alertsCount":case"slider":case"gButton":case"lensesSwitchPanel":case"proofitButton":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeGetStartedChecklistModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":return[3,57]}return[3,58];case 1:return[5,hi(d(e.children,n,r))];case 2:return h.sent(),[3,59];case 3:return null==e.footer?[3,5]:[5,hi(l(e.footer,n,r))];case 4:return h.sent(),[3,6];case 5:h.label=6;case 6:return[5,hi(l(e.child,n,r))];case 7:return h.sent(),[3,59];case 8:return[5,hi(d(Object.values(e.views).map((function(e){return e.child})),n,r))];case 9:return h.sent(),[3,59];case 10:return[5,hi(l(e.child,n,r))];case 11:return h.sent(),[3,59];case 12:return[5,hi(d(e.left,n,r))];case 13:return h.sent(),[5,hi(d(e.right,n,r))];case 14:return h.sent(),[3,59];case 15:return[5,hi(d(e.parts,n,r))];case 16:return h.sent(),[3,59];case 17:return[5,hi(l(e.child,n,r))];case 18:return h.sent(),[3,59];case 19:return[5,hi(l(e.content,n,r))];case 20:return h.sent(),[3,59];case 21:return e.child?[5,hi(l(e.child,n,r))]:[2];case 22:return h.sent(),[3,59];case 23:return[5,hi(d(e.items.map((function(e){return e.label})),n,r))];case 24:return h.sent(),[3,59];case 25:return[5,hi(l(e.label,n,r))];case 26:return h.sent(),[3,59];case 27:i=0,h.label=28;case 28:return i<e.alternatives.length?(o=e.alternatives[i],a=o.label,s=o.preview,[5,hi(d([a,s],n,r))]):[3,31];case 29:h.sent(),h.label=30;case 30:return i++,[3,28];case 31:return[3,59];case 32:u=0,h.label=33;case 33:return u<e.choices.length?(c=e.choices[u].preview,[5,hi(l(c,n,r))]):[3,36];case 34:h.sent(),h.label=35;case 35:return u++,[3,33];case 36:return[3,59];case 37:return null==e.footer?[3,39]:[5,hi(l(e.footer,n,r))];case 38:return h.sent(),[3,40];case 39:h.label=40;case 40:return[5,hi(l(e.header,n,r))];case 41:return h.sent(),[3,59];case 42:return[5,hi(d(Object.values(e.views),n,r))];case 43:return h.sent(),[3,59];case 44:return null==e.quickActions?[3,46]:[5,hi(l(e.quickActions,n,r))];case 45:return h.sent(),[3,47];case 46:h.label=47;case 47:return[5,hi(l(e.child,n,r))];case 48:return h.sent(),[3,59];case 49:return[5,hi(l(e.collapsedContent,n,r))];case 50:return h.sent(),[5,hi(l(e.fullContent,n,r))];case 51:return h.sent(),[3,59];case 52:return[5,hi(l(e.child,n,r))];case 53:return h.sent(),[5,hi(l(e.label,n,r))];case 54:return h.sent(),[3,59];case 55:return[5,hi(l(e.child,n,r))];case 56:return h.sent(),[3,59];case 57:return[2];case 58:if(fi(e))return[2];(0,L.xb)(e),h.label=59;case 59:return[2]}}))};!function(e){e.PreOrder="PreOrder",e.PostOrder="PstOrder"}(t=e.TreeTraversal||(e.TreeTraversal={})),e.forEach=n,e.traverse=r,e.reduce=i,e.findFirst=o,e.findFirstWithPredicate=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ei.TreeTraversal.PreOrder,i=!0,o=!1,a=void 0;try{for(var s,u=r(e,n)[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(t(c))return U.some(c)}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return U.none};var f=e.over=function(e,n,r){var i,o=ii(i=n)||ai(i)||di(i)||si(),a=o[0],s=o.slice(1);return G.Im(s)&&a===e.id?r(e):T(e,k.constVoid,t.PreOrder,(function(t){return e.id===a&&t.id===s[0]?f(t,s,r):U.some(t)}))};e.map=a,e.filter=s,e.filterMap=u,e.compact=c;var g=e.getAlertRefs=function(e){switch(e.type){case"alternativeChoice":case"alternativeSlider":case"block":case"button":case"count":case"alertsCount":case"icon":case"image":case"row":case"box":case"slider":case"text":case"clickableText":case"column":case"scroll":case"assistantFeed":case"assistantCard":case"popoverStack":case"gButton":case"lensesSwitchPanel":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeGetStartedChecklistModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"viewStack":case"proofitButton":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"collapsedCard":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"tooltip":case"globalPartPlaceholder":case"sticker":return U.none;case"shortFormCard":return g(e.child);case"longFormCard":return(0,k.pipe)(e.behaviors,M.pb(Mr.isStrongAlertRef),F.ci);case"strongAlertRef":return U.some([e]);case"inlineCard":return(0,k.pipe)((0,k.pipe)(e.behaviors,U.fromNullable,U.chain((0,k.flow)(M.pb(Mr.isStrongAlertRef),F.ci))));case"list":return(0,k.pipe)(e.items,M.Tj((function(e){return(0,k.pipe)(e.behaviors,U.fromNullable,U.chain((0,k.flow)(G.pb(Mr.isStrongAlertRef),F.ci)))})),U.sequenceArray,U.map(F.Bq));default:if(fi(e))return U.none;(0,L.xb)(e)}},m=(e.getAlertIds=(0,k.flow)(g,U.chain((0,k.flow)(M.cy(B.Up("alertIds")),F._S))),e.getAllAlertIds=function(e){return i(e,(function(e,t){return(0,k.pipe)(ei.getAlertIds(t),U.map((function(t){return e.concat(t)})),U.getOrElse((function(){return e})))}),t.PreOrder,[])},e.getSDUIId=function(e){return U.fromNullable(e.id)},e.setPopoverView=function(e,t){return a(e,(function(e){switch(e.type){case"box":case"row":case"button":return(0,k.pipe)(U.fromNullable(e.behaviors),U.chain(M.i8(Mr.isPopoverAnchor)),U.fold((0,k.constant)(e),(function(n){var r=n.view,i=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(n,["view"]);return(0,k.pipe)(U.fromNullable(r),U.fold((function(){return(0,k.pipe)(t,U.filter((function(e){return"component"===e.anchor.kind&&e.anchor.id===i.id})),U.fold((0,k.constant)(e),(function(t){return ci(ui({},e),{behaviors:[ci(ui({},i),{view:t})]})})))}),(function(n){return(0,k.pipe)(t,U.filter((function(e){return B.n4(e.anchor,n.anchor)})),U.fold((function(){return ci(ui({},e),{behaviors:[i]})}),(function(t){return t.rootPopoverId===n.rootPopoverId&&t.id===n.id?e:ci(ui({},e),{behaviors:[ci(ui({},i),{view:t})]})})))})))})));default:return e}}))},e.setGlobalPartPlaceholderContent=function(e,t){return a(e,(function(e){return"globalPartPlaceholder"===e.type?(0,k.pipe)(t(e.globalPartId),U.fold((function(){return e}),(function(t){return ci(ui({},e),{child:t.content})}))):e}))},e.removeStrongAlertRef=function(e){return function(t){var n=(0,k.pipe)(t,M.Tj((function(e){return e.alertIds})),M.Bq,(function(e){return new Set(e)})),r=(0,k.pipe)(t,F.pb(Rr.isStrongAlertRefComponent)),i=(0,k.pipe)(t,F.pb(Rr.isStrongAlertRefBehavior));return(0,k.pipe)(u(e,_(n,r,i)),U.chain(c))}},function(e,t){var n;return ci(ui({},e),{behaviors:null===(n=e.behaviors)||void 0===n?void 0:n.map((function(e){return"behavior:strongAlertRef"===e.type?ci(ui({},e),{alertIds:e.alertIds.filter((function(e){return!t.has(e)}))}):e}))})}),_=function(e,t,n){return function(r){switch(r.type){case"alternativeChoice":case"alternativeSlider":case"box":case"block":case"button":case"count":case"alertsCount":case"icon":case"image":case"row":case"slider":case"text":case"column":case"scroll":case"assistantFeed":case"assistantCard":case"popoverStack":case"gButton":case"lensesSwitchPanel":case"clickableText":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"nativeGetStartedChecklistModal":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"viewStack":case"proofitButton":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":case"collapsedCard":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"tooltip":case"globalPartPlaceholder":case"sticker":return U.some(r);case"shortFormCard":return _(e,t,n)(r.child);case"longFormCard":return U.some(ci(ui({},r),{behaviors:r.behaviors.map((function(t){return Mr.isStrongAlertRef(t)?ci(ui({},t),{alertIds:t.alertIds.filter((function(t){return!e.has(t)}))}):t}))}));case"strongAlertRef":return(0,k.pipe)(t,U.exists((function(e){return e.some((function(e){return v.equals(r,e)}))})))?U.none:U.some(ci(ui({},r),{alertIds:r.alertIds.filter((function(t){return!e.has(t)}))}));case"inlineCard":return r.behaviors&&r.behaviors.some((function(e){return Mr.isStrongAlertRef(e)&&(0,k.pipe)(n,U.exists((function(t){return t.some((function(t){return Mr.StrongAlertRef.eq.equals(e,t)}))})))}))?U.none:U.some(m(r,e));case"list":var i=r.items.filter((function(e){return!e.behaviors||!e.behaviors.some((function(e){return Mr.isStrongAlertRef(e)&&(0,k.pipe)(n,U.exists((function(t){return t.some((function(t){return Mr.StrongAlertRef.eq.equals(e,t)}))})))}))}));return 0===i.length?U.none:U.some(ci(ui({},r),{items:i.map((function(t){return m(t,e)}))}));default:if(fi(r))return U.some(r);(0,L.xb)(r)}}},v=(e.switchViewStack=function(e,t,n){return(0,k.pipe)(f(e,t,(function(e){return"viewStack"!==e.type&&"popoverStack"!==e.type||null==e.views[n]?U.some(e):U.some(ci(ui({},e),{selected:n}))})),U.fold((function(){return e}),k.identity))},e.toContentMap=function(e){return ei.reduce(e,(function(e,t,n){return e[t.id]={content:t,path:n},e}),t.PreOrder,{})},e.eq=D.n(A.Pw)(Qe)),y=e.isEmpty=function(e){if(null==e)return!0;switch(e.type){case"column":return M.Im(e.children);case"assistantCard":return null==e.child&&null==e.footer;case"box":case"scroll":case"strongAlertRef":case"collapsedCard":case"inlineCard":case"shortFormCard":case"globalPartPlaceholder":case"tooltip":return null==e.child;case"row":return M.Im(e.left)&&M.Im(e.right);case"block":return M.Im(e.parts);case"list":return M.Im(e.items);case"button":return null==e.label;case"alternativeChoice":return M.Im(e.alternatives);case"alternativeSlider":return M.Im(e.choices);case"assistantFeed":return null==e.header&&null==e.footer;case"sticker":return null==e.label&&null==e.child;case"viewStack":return B.RI(e.views);case"longFormCard":return null==e.fullContent;case"globalPart":return null==e.content;case"count":case"alertsCount":case"icon":case"image":case"slider":case"text":case"clickableText":case"gButton":case"lensesSwitchPanel":case"proofitButton":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeGetStartedChecklistModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"popoverStack":return!1;default:if(fi(e))return!1;(0,L.xb)(e)}};e.isSwitchViewAction=function(e){return"switchView"===e.type},e.bulkSwitchView=function(e,t,n){var r=null!=n?n:ei.toContentMap(e);return t.reduce((function(e,t){var n=t.selected,i=t.where;return(0,k.pipe)(r[i],U.fromNullable,U.map(B.Up("path")),U.fold((function(){return e}),(function(t){return ei.switchViewStack(e,t,n)})))}),e)},e.getCardPropsForFeed=function(e){return e.filtering.filter((function(e){return e.condition===h.EqualTo})).reduce((function(e,t){return ci(ui({},e),oi({},t.property,t.value))}),{})};var b=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder;return T(e,n,r,a)},C=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder;return T(e,n,r,s)},S=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder;return T(e,n,r,u)},E=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder,i=arguments.length>3?arguments[3]:void 0;return(0,k.pipe)(e,M.TS(new Array,(function(e,t){return(0,k.pipe)(i(t,n,r),U.fold(k.constVoid,(function(t){return e.push(t)}))),e})))},T=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder,i=arguments.length>3?arguments[3]:void 0;switch(e.type){case"column":return(0,k.pipe)(E(e.children,n,r,i),(function(t){return ci(ui({},e),{children:t})}),U.some);case"assistantCard":var o=(0,k.pipe)(U.fromNullable(e.footer),U.chain((function(e){return i(e,n,r)})),U.getOrElse((function(){})));return(0,k.pipe)(i(e.child,n,r),U.map((function(t){return ci(ui({},e),{child:t,footer:o})})));case"strongAlertRef":case"scroll":case"inlineCard":case"shortFormCard":case"box":case"tooltip":return(0,k.pipe)(i(e.child,n,r),U.map((function(t){return ci(ui({},e),{child:t})})));case"row":var a=E(e.right,n,r,i),s=E(e.left,n,r,i);return U.some(ci(ui({},e),{left:s,right:a}));case"block":return(0,k.pipe)(E(e.parts,n,r,i),(function(t){return ci(ui({},e),{parts:t})}),U.some);case"list":return(0,k.pipe)(e.items,M.Tj((function(e){return(0,k.pipe)(i(e.label,n,r),U.map((function(t){return ci(ui({},e),{label:t})})))})),M.pb(U.isSome),M.Tj(q.$v),(function(t){return ci(ui({},e),{items:t})}),U.some);case"button":return(0,k.pipe)(i(e.label,n,r),U.map((function(t){return ci(ui({},e),{label:t})})));case"alternativeChoice":return(0,k.pipe)(e.alternatives,M.Tj((function(e){return(0,k.pipe)([i(e.label,n,r),i(e.preview,n,r)],U.sequenceArray,U.map((function(e){return e})),U.map((function(t){var n,r,i=(r=2,ii(n=t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(n,r)||di(n,r)||si()),o=i[0],a=i[1];return ci(ui({},e),{label:o,preview:a})})))})),M.pb(U.isSome),M.Tj(q.$v),(function(t){return ci(ui({},e),{alternatives:t})}),U.some);case"alternativeSlider":return(0,k.pipe)(e.choices,M.Tj((function(e){return(0,k.pipe)(i(e.preview,n,r),U.map((function(t){return ci(ui({},e),{preview:t})})))})),M.pb(U.isSome),M.Tj(q.$v),(function(t){return ci(ui({},e),{choices:t})}),U.some);case"assistantFeed":return(0,k.pipe)(U.fromNullable(e.footer),U.chain((function(e){return i(e,n,r)})),U.map((function(t){return ci(ui({},e),{footer:t})})),U.alt((function(){return U.some(e)})),U.chain((function(e){return(0,k.pipe)(i(e.header,n,r),U.map((function(t){return ci(ui({},e),{header:t})})))})));case"popoverStack":return(0,k.pipe)(Object.keys(e.views),M.TS({},(function(t,o){return(0,k.pipe)(i(e.views[o].child,n,r),U.fold((function(){return delete t[o],t}),(function(n){return t[o]=ci(ui({},e.views[o]),{child:n}),t})))})),(function(t){return ci(ui({},e),{views:t})}),U.some);case"viewStack":return(0,k.pipe)(Object.keys(e.views),M.TS({},(function(t,o){return(0,k.pipe)(i(e.views[o],n,r),U.fold((function(){return delete t[o],t}),(function(e){return t[o]=e,t})))})),(function(t){return ci(ui({},e),{views:t})}),U.some);case"collapsedCard":var u=(0,k.pipe)(U.fromNullable(e.quickActions),U.chain((function(e){return i(e,n,r)})),U.getOrElse((function(){})));return(0,k.pipe)(i(e.child,n,r),U.map((function(t){return ci(ui({},e),{child:t,quickActions:u})})));case"longFormCard":return(0,k.pipe)(i(e.fullContent,n,r),U.chain((function(t){return(0,k.pipe)(i(e.collapsedContent,n,r),U.map((function(n){return ci(ui({},e),{fullContent:t,collapsedContent:n})})))})));case"sticker":return(0,k.pipe)(i(e.child,n,r),U.chain((function(t){return(0,k.pipe)(i(e.label,n,r),U.map((function(n){return ci(ui({},e),{child:t,label:n})})))})));case"globalPart":return(0,k.pipe)(i(e.content,n,r),U.map((function(t){return ci(ui({},e),{content:t})})));case"globalPartPlaceholder":return e.child?(0,k.pipe)(i(e.child,n,r),U.map((function(t){return ci(ui({},e),{child:t})}))):U.some(e);case"icon":case"image":case"text":case"clickableText":case"count":case"alertsCount":case"slider":case"gButton":case"lensesSwitchPanel":case"proofitButton":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeGetStartedChecklistModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":return U.some(e);default:if(fi(e))return U.some(e);(0,L.xb)(e)}},O=function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder,o=arguments.length>3?arguments[3]:void 0;return e.forEach((function(e){return n(e,r,i,o)}))},w=function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder,o=arguments.length>3?arguments[3]:void 0;switch(e.type){case"column":return O(e.children,r,i,o);case"assistantCard":return null!=e.footer&&n(e.footer,r,i,o),n(e.child,r,i,o);case"popoverStack":return O(Object.values(e.views).map((function(e){return e.child})),r,i,o);case"strongAlertRef":case"box":case"scroll":case"inlineCard":case"shortFormCard":case"tooltip":return n(e.child,r,i,o);case"row":return O(e.left,r,i,o),O(e.right,r,i,o);case"block":return O(e.parts,r,i,o);case"list":return O(e.items.map((function(e){return e.label})),r,i,o);case"button":return n(e.label,r,i,o);case"alternativeChoice":return e.alternatives.forEach((function(e){var t=e.label,n=e.preview;return O([t,n],r,i,o)}));case"alternativeSlider":return e.choices.forEach((function(e){var t=e.preview;return n(t,r,i,o)}));case"assistantFeed":return null!=e.footer&&n(e.footer,r,i,o),n(e.header,r,i,o);case"viewStack":return O(Object.values(e.views),r,i,o);case"collapsedCard":return null!=e.quickActions&&n(e.quickActions,r,i,o),n(e.child,r,i,o);case"longFormCard":return n(e.collapsedContent,r,i,o),n(e.fullContent,r,i,o);case"sticker":return n(e.label,r,i,o),n(e.child,r,i,o);case"globalPart":return n(e.content,r,i,o);case"globalPartPlaceholder":return e.child?n(e.child,r,i,o):void 0;case"icon":case"image":case"text":case"clickableText":case"count":case"alertsCount":case"slider":case"gButton":case"lensesSwitchPanel":case"proofitButton":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeGetStartedChecklistModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":return;default:if(fi(e))return;(0,L.xb)(e)}},I=(e.Functor={map:function(e,n){return a(e,n,t.PreOrder)}},e.checkForGlobalPartWithPlaceholder=function(e){return Xr.isGlobalPart(e)?(0,k.pipe)(o(e,"globalPartPlaceholder"),U.fold((function(){return Y.right(e)}),(function(t){return Y.left(new Error("globalPart can not contain globalPartPlaceholder. globalPartPlaceholder (id: ".concat(t.id,") found in globalPart (id: ").concat(e.id,")")))}))):Y.right(e)}),x=D.n(j.Pw)(Qe);e.dslRootParser=(0,k.flow)(x.decode,Y.mapLeft((function(e){return new Error(j.$2(e))})),Y.chain(I))}(ei||(ei={}));var gi,mi,_i,vi=n(96797),yi=n(95717),bi=n(45116),Ci=n(49004),Si=n(88105),Ei=n(28986),Ti=n(32787),Oi=n(47318);!function(e){e.codec=vi.NW({description:vi.Yj,regex:vi.Yj,priority:vi.ai,prefixes:vi.YO(vi.Yj)})}(gi||(gi={})),function(e){e.codec=vi.NW({patterns:vi.g1(vi.Yj,gi.codec)})}(mi||(mi={})),function(e){e.codec=vi.E$([gi.codec,vi.NW({id:vi.Yj,text:vi.Yj,start:vi.ai,end:vi.ai})])}(_i||(_i={}));var wi,Ii,xi,Pi={patterns:{email:{regex:'(([^<>()[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))',prefixes:[],priority:0,description:"Email"},url:{regex:"[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b((([-a-zA-Z0-9()@%_\\+~#&//=\\[\\]])|([.:?](?!$|\\s)))*)?",prefixes:["http://","https://"],priority:1,description:"URL"},creditCardNumber:{regex:"(\\d{4}\\d{4}\\d{4}\\d{4})|(\\d{4}\\-\\d{4}\\-\\d{4}\\-\\d{4})|(\\d{4}\\s\\d{4}\\s\\d{4}\\s\\d{4})",prefixes:[],priority:2,description:"Credit card number"},phoneNumber:{regex:"[\\+]?[(]?[0-9]{3}[)]?[-\\s\\.]?[0-9]{3}[-\\s\\.]?[0-9]{4,6}",prefixes:[],priority:3,description:"Phone number"},usSSN:{regex:"[0-9]{3}[-]*[0-9]{2}[-]*[0-9]{4}",prefixes:[],priority:4,description:"US SSN"},caSSN:{regex:"[0-9]{3}[\\s\\-]?[0-9]{3}[\\s\\-]?[0-9]{3}",prefixes:[],priority:5,description:"CA SIN"},ukSSN:{regex:"[A-Z]{2}[\\s\\-]?\\d{2}[\\s\\-]?\\d{2}[\\s\\-]?\\d{2}[\\s\\-]?[A-Z]",prefixes:[],priority:6,description:"UK NI NO"},iban:{regex:"[A-Z]{2}(-?|\\ )\\d{2}-?(?:\\ ?[A-Z]{4}-?)?(?:\\d{13,}|(?:\\ \\d{4}){3,5}\\ \\d{1,4})",prefixes:[],priority:7,description:"IBAN number"},variousID:{regex:"[A-Z]{0,2}(?:\\d{3,8}[\\ -])(?:\\d{2,8}[\\ -]){1,4}\\d{2,4}|\\d{7}[A-Z]?|\\d{5,18}",prefixes:[],priority:8,description:"Various ID number"}}},Ri=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this;(0,w._)(this,e),(0,I._)(this,"_externalMessagesSchemas",void 0),(0,I._)(this,"_sanitizationSeed",void 0),(0,I._)(this,"_sensitiveToSanitizedMap",void 0),(0,I._)(this,"_sanitizedToSensitiveMap",void 0),(0,I._)(this,"_dlpRegexConfiguration",void 0),(0,I._)(this,"sanitizeMessage",void 0),(0,I._)(this,"sanitizeStaticMessage",void 0),(0,I._)(this,"sanitizeChange",void 0),(0,I._)(this,"sanitizeDelta",void 0),(0,I._)(this,"sanitizeSdui",void 0),(0,I._)(this,"sanitizeText",void 0),(0,I._)(this,"unsanitizeMessage",void 0),(0,I._)(this,"unsanitizeChange",void 0),(0,I._)(this,"unsanitizeDelta",void 0),(0,I._)(this,"unsanitizeSdui",void 0),(0,I._)(this,"unsanitizeText",void 0),(0,I._)(this,"matchInText",void 0),(0,I._)(this,"clear",void 0),(0,I._)(this,"_sanitizeDlpMatch",void 0),(0,I._)(this,"_unsanitizeDlpMatch",void 0),(0,I._)(this,"_sanitizingEncoder",void 0),(0,I._)(this,"_unsanitizingEncoder",void 0),(0,I._)(this,"_sensitiveGuard",void 0),(0,I._)(this,"_externalMessagesHandlers",void 0),this._externalMessagesSchemas=n,this._sanitizationSeed=-1,this._sensitiveToSanitizedMap=new Map,this._sanitizedToSensitiveMap=new Map,this.sanitizeMessage=function(e){var t=r._externalMessagesHandlers.find((function(t){return t.is(e)}));return t?t.sanitizer.encode(e):xi.replaceInRequest(e,r.sanitizeText,r.matchInText)},this.sanitizeStaticMessage=function(e){return xi.replaceInStaticRequest(e,r.sanitizeText,r.matchInText)},this.sanitizeChange=function(e){return xi.replaceInChangeWithAttributes(e,r.sanitizeText,r.matchInText)},this.sanitizeDelta=function(e){return xi.replaceInDeltaWithAttributes(e,r.sanitizeText,r.matchInText)},this.sanitizeSdui=function(e){return xi.replaceInSdui(e,r.sanitizeText)},this.sanitizeText=function(e){return wi.replaceInText(r._dlpRegexConfiguration,e,r._sanitizeDlpMatch)},this.unsanitizeMessage=function(e){var t=r._externalMessagesHandlers.find((function(t){return t.is(e)}));return t?t.unsanitizer.encode(e):xi.replaceInResponse(e,r.unsanitizeText)},this.unsanitizeChange=function(e){return xi.replaceInChange(e,r.unsanitizeText)},this.unsanitizeDelta=function(e){return xi.replaceInDelta(e,r.unsanitizeText)},this.unsanitizeSdui=function(e){return xi.replaceInSdui(e,r.unsanitizeText)},this.unsanitizeText=function(e){return wi.replaceInText(r._dlpRegexConfiguration,e,r._unsanitizeDlpMatch)},this.matchInText=function(e){return wi.matchInText(r._dlpRegexConfiguration,e)},this.clear=function(){r._sanitizationSeed=-1,r._sensitiveToSanitizedMap.clear(),r._sanitizedToSensitiveMap.clear()},this._sanitizeDlpMatch=function(e){var t=e.text;if(!r._sensitiveToSanitizedMap.has(t)){var n=Ii.sanitizeDlpMatch(e,++r._sanitizationSeed);r._sensitiveToSanitizedMap.set(t,n),r._sanitizedToSensitiveMap.set(n,t)}return r._sensitiveToSanitizedMap.get(t)},this._unsanitizeDlpMatch=function(e){var t=e.text;return r._sanitizedToSensitiveMap.has(t)?r._sanitizedToSensitiveMap.get(t):t},this._sanitizingEncoder=Oi.b.extend(Oi.J)({any:yi.id(),sensitiveString:{encode:this.sanitizeText},sensitiveDelta:{encode:this.sanitizeDelta}}),this._unsanitizingEncoder=Oi.b.extend(Oi.J)({any:yi.id(),sensitiveString:{encode:this.unsanitizeText},sensitiveDelta:{encode:this.unsanitizeDelta}}),this._sensitiveGuard=Oi.b.extend(bi.Schemable)({any:bi.id(),sensitiveString:bi.string,sensitiveDelta:bi.id()}),this._externalMessagesHandlers=this._externalMessagesSchemas.map((function(e){return(0,P._)((0,x._)({},Oi.b.interpreter(r._sensitiveGuard)(e)),{sanitizer:Oi.b.interpreter(r._sanitizingEncoder)(e),unsanitizer:Oi.b.interpreter(r._unsanitizingEncoder)(e)})})),this._dlpRegexConfiguration=wi.getRegexConfiguration(t)};!function(e){e.getRegexConfiguration=function(e){return{dlpConfiguration:e,dlpRegex:t(e)}},e.replaceInText=function(e,t,r){var i=e.dlpConfiguration,o=e.dlpRegex;return t.replace(o,(function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return r(n(i,{groups:t[t.length-1],index:t[t.length-3]}))}))},e.matchInText=function(e,t){var i=e.dlpConfiguration,o=e.dlpRegex;return r(o,t).map((function(e){return n(i,e)}))};var t=function(e){var t=e.patterns;return new RegExp(Object.entries(t).sort((function(e,t){return(0,R._)(e,2)[1].priority-(0,R._)(t,2)[1].priority})).map((function(e){var t=(0,R._)(e,2),n=t[0],r=t[1],i=r.regex,o=r.prefixes;return i=o.length?"(".concat(o.join("|"),")").concat(i):i,"(?<".concat(n,">").concat(i,")")})).join("|"),"g")},n=function(e,t){var n=t.groups,r=t.index,i=(0,R._)(Object.entries(n).find((function(e){return void 0!==(0,R._)(e,2)[1]})),2),o=i[0],a=i[1],s=e.patterns[o];return(0,P._)((0,x._)({id:o},s),{text:a,start:r,end:r+a.length})},r=function(e,t){var n=[];for(e.lastIndex=0;;){var r=e.exec(t);if(!r)break;n.push(r)}return e.lastIndex=0,n}}(wi||(wi={})),function(e){e.sanitizeDlpMatch=function(e,t){var n=e.prefixes,r=e.text,i=n.find((function(e){return 0===r.indexOf(e)}));return void 0!==i?"".concat(i).concat(l(r.slice(i.length),t)):l(r,t)};var t="a".charCodeAt(0),n="z".charCodeAt(0),r="A".charCodeAt(0),i="Z".charCodeAt(0),o="0".charCodeAt(0),a="9".charCodeAt(0),s=function(e){return e>=t&&e<=n},u=function(e){return e>=r&&e<=i},c=function(e){return e>=o&&e<=a},l=function(e,n){for(var i,a=new Array(e.length),l=n,d=e.length-1;d>=0;d--){var p=e.charCodeAt(d);s(p)?(a[d]=t+(d+l)%26,l/=26):u(p)?(a[d]=r+(d+l)%26,l/=26):c(p)?(a[d]=o+(d+1+l)%10,l/=10):a[d]=p}return(i=String).fromCharCode.apply(i,(0,N._)(a))}}(Ii||(Ii={})),function(e){e.replaceInRequest=function(e,t,n){return"submit_ot"===e.action?s(e,t,n):e},e.replaceInStaticRequest=function(e,n,r){return"update_context_info"===e.action?t(e,n,r):e},e.replaceInResponse=function(e,t){switch(e.action){case"alert":return d(e,t);case"alert_changes":return p(e,t);case"sdui:add":return h(e,t);case"sdui:update":return f(e,t);default:return e}};var t=e.replaceInUpdateContextInfoMessage=function(e,t,r){return"docContext"in e?(0,P._)((0,x._)({},e),{docContext:n(e.docContext,t,r)}):e},n=function(e,t,i){var o,a,s;return(0,P._)((0,x._)({},e),{delta:void 0!==e.delta?r(e.delta,t,i):void 0,siblings:null===(o=e.siblings)||void 0===o?void 0:o.map((function(e){return n(e,t,i)})),children:null===(a=e.children)||void 0===a?void 0:a.map((function(e){return n(e,t,i)})),parents:null===(s=e.parents)||void 0===s?void 0:s.map((function(e){return n(e,t,i)})),audience:void 0,authors:void 0})},r=(e.replaceInChangeWithAttributes=function(e,t,n){return Ci.lY.isDelta(e)?u(e,t,n):Ci.lY.isReset(e)?l(e,t):e},e.replaceInChange=function(e,t){return Ci.lY.isDelta(e)?c(e,t):Ci.lY.isReset(e)?l(e,t):e},e.replaceInDeltaWithAttributes=function(e,t,n){var r=a(e),i=r.text,o=r.ranges,s=t(i);return{ops:e.ops.map((function(e,t){return Si.E.match((function(e){if(Si.E.isInsertString(e)){var r=o[t],i=r.start,a=r.end,u=s.slice(i,a),c=(0,P._)((0,x._)({},e),{insert:u}),l=n(u);if(l.length>0){var d=Object.values(l).map((function(e){return{type:e.id,start:e.start,end:e.end}}));c=void 0!==c.attributes&&null!==c.attributes?(0,P._)((0,x._)({},c),{attributes:Ti.x.compose(c.attributes,{sanitized:{matches:d}},!1)}):(0,P._)((0,x._)({},c),{attributes:{sanitized:{matches:d}}})}return c}return e}),k.identity,k.identity)(e)}))}}),i=e.replaceInDelta=function(e,t){var n=a(e),r=n.text,i=n.ranges,o=t(r);return{ops:e.ops.map((function(e,t){return Si.E.match((function(e){if(Si.E.isInsertString(e)){var n=i[t],r=n.start,a=n.end,s=o.slice(r,a);return(0,P._)((0,x._)({},e),{insert:s})}return e}),k.identity,k.identity)(e)}))}},o=e.replaceInSdui=function(e,t){return(0,k.pipe)(e,ei.dslRootParser,Y.map((function(e){return m(e,t)})),Y.getOrElse((0,k.constant)(e)))},a=function(e){return e.ops.reduce((function(e,t){var n=e.text,r=e.ranges,i=Si.E.match((function(e){return Si.E.isInsertString(e)?e.insert:"\n"}),(0,k.constant)(""),(0,k.constant)("\n"))(t),o=0!==r.length?r[r.length-1].end:0;return{text:n+i,ranges:(0,N._)(r).concat([{start:o,end:o+i.length}])}}),{text:"",ranges:[]})},s=function(e,t,n){if("deltas"in e){var i=e.deltas.map((function(e){return r(e,t,n)}));return(0,P._)((0,x._)({},e),{deltas:i,deltasString:JSON.stringify(i)})}return e},u=function(e,t,n){return Ci.lY.delta(new Ei.R(r(e.delta,t,n).ops),e.prevLen)},c=function(e,t){return Ci.lY.delta(new Ei.R(i(e.delta,t).ops),e.prevLen)},l=function(e,t){return Ci.lY.unsafeRes(new Ei.R(i(e.delta,t).ops))},d=function(e,t){var n=(0,P._)((0,x._)({},e),{replacements:e.replacements.map(t)});return void 0!==e.text&&(n.text=t(e.text)),void 0!==e.highlightText&&(n.highlightText=t(e.highlightText)),void 0!==e.transforms&&(n.transforms=e.transforms.map(t)),e.transformJson&&(n.transformJson=g(e.transformJson,t)),e.subalerts&&(n.subalerts=e.subalerts.map((function(e){return(0,P._)((0,x._)({},e),{highlightText:t(e.highlightText),transformJson:g(e.transformJson,t)})}))),n},p=function(e,t){return e.transformJson?(0,P._)((0,x._)({},e),{transformJson:g(e.transformJson,t)}):e},h=function(e,t){return(0,P._)((0,x._)({},e),{sdui:o(e.sdui,t)})},f=function(e,t){return(0,P._)((0,x._)({},e),{sdui:o(e.sdui,t)})},g=function(e,t){return e.alternatives?(0,P._)((0,x._)({},e),{alternatives:e.alternatives.map((function(e){return i(e,t)}))}):e},m=function(e,t){return(0,k.pipe)(ei.map(e,(function(e){return _(e,t)})),U.getOrElse((0,k.constant)(e)))},_=function(e,t){return"text"===e.type?(0,P._)((0,x._)({},e),{text:t(e.text)}):e}}(xi||(xi={}))},47318:(e,t,n)=>{"use strict";n.d(t,{J:()=>u,b:()=>r});var r,i=n(10334),o=n(30040),a=n(95717),s=n(87626),u={URI:a.rz,literal:function(){return a.id()},string:a.id(),number:a.id(),boolean:a.id(),nullable:a.me,type:a.NW,struct:a.w3,partial:a.OH,record:a.g1,array:a.YO,tuple:a.PV,intersect:a.y$,sum:a.cz,lazy:function(e,t){return a.RZ(t)},readonly:a.tB};!function(e){e.interpreter=(0,o.unsafeCoerce)(s.n),e.extend=function(e){return function(t){return(0,i._)({},e,t)}}}(r||(r={}))},817:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;var n={prod:"grammarly.com",preprod:"ppgr.io",qa:"qagr.io"};t.config=function(e){var t=n[e];return{url:{properties:"https://properties."+t,treatment:"https://treatment."+t,gates:"https://gates."+t}}}},89995:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentClient=t.Gate=t.Experiment=void 0;var o=n(38008),a=n(86616),s=n(96620),u=function(){function e(e,t){this.name=e,this._experiences=t}return Object.defineProperty(e.prototype,"experiences",{get:function(){return Object.fromEntries(this._experiences.map((function(e){return[e,e]})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"experiencesArray",{get:function(){return this._experiences},enumerable:!1,configurable:!0}),e}();t.Experiment=u;t.Gate=function(e,t){void 0===t&&(t="enabled"),this.name=e,this.experience=t};t.ExperimentClient=function(e,t,n,u,c){var l=this;void 0===c&&(c={}),this._treatmentService=e,this._experiments=t,this._gatesService=n,this._gates=u,this._config=c,this._experimentTreatments=new Map,this._gateTreatments=new Map,this._initialFetched=!1,this.setPrefetchedTreatments=function(e){if(l._startRefreshIfNeeded(),!a.validateTreatmentsWithType(e))throw new Error("Not valid treatments");l._updateTreatmentForExpAndGates(e)},this._updateTreatmentForExpAndGates=function(e){l._treatmentService.refresh&&l._treatmentService.refresh(),l._experimentTreatments=new Map(e.filter((function(e){return e.type===s.ExperimentType.experiment})).map((function(e){return[e.experimentName,e]}))),l._gateTreatments=new Map(e.filter((function(e){return e.type===s.ExperimentType.gate})).map((function(e){return[e.experimentName,e]})))},this.fetchTreatments=function(e){return void 0===e&&(e={}),r(l,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this._startRefreshIfNeeded(),[4,this._fetchTreatments(e.clearCacheOnError)];case 1:return t.sent(),[2]}}))}))},this._fetchTreatments=function(e){return r(l,void 0,void 0,(function(){var t,n,r,o,a,s,u;return i(this,(function(i){switch(i.label){case 0:t=null,n=null,i.label=1;case 1:return i.trys.push([1,3,,4]),r=this._experiments.concat(this._gates),[4,this._treatmentService.getTreatment(r.map((function(e){return e.name})))];case 2:return t=i.sent(),[3,4];case 3:return o=i.sent(),n=o,e&&this._experimentTreatments.clear(),[3,4];case 4:if(t)return this._updateTreatmentForExpAndGates(t),[2];a=null,s=null,i.label=5;case 5:return i.trys.push([5,7,,8]),[4,this._gatesService.getTreatment(this._gates.map((function(e){return e.name})))];case 6:return a=i.sent(),[3,8];case 7:return u=i.sent(),s=u,e&&this._gateTreatments.clear(),[3,8];case 8:if(a&&(this._gateTreatments=new Map(a.map((function(e){return[e.experimentName,e]})))),s||n)throw s||n;return[2]}}))}))},this._startRefreshIfNeeded=function(){l._initialFetched||(l._config.ttl&&(l._refreshTreatment=setInterval((function(){return r(l,void 0,void 0,(function(){var e,t=this;return i(this,(function(n){switch(n.label){case 0:return e=function(){return r(t,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._fetchTreatments()];case 1:case 2:return e.sent(),[3,3];case 3:return[2]}}))}))},this._config.ttl&&this._config.useRefreshJitter?(this._delayedRefreshTreatment=setTimeout(e,.1*this._config.ttl*Math.random()),[3,3]):[3,1];case 1:return[4,e()];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}),l._config.ttl)),l._initialFetched=!0)},this.dispose=function(){l._refreshTreatment&&clearInterval(l._refreshTreatment),l._delayedRefreshTreatment&&clearTimeout(l._delayedRefreshTreatment)},this.getTreatment=function(e){var t=l.peekTreatment(e);return null!==t&&l.logTreatment(e,t).catch((function(){})),t},this.peekTreatment=function(e){var t=l._experimentTreatments.get(e.name)||l._gateTreatments.get(e.name),n=null==t?void 0:t.groupName;if(n){var r=e.experiencesArray.find((function(e){return o.getGroupNames(e).includes(n)}));if(r)return r}return null},this.logTreatment=function(e,t){if(l._config.ssrDisableLogging)return Promise.resolve();var n=l._experimentTreatments.get(e.name)||l._gateTreatments.get(e.name);if(!n||o.getExperienceName(n.groupName)!==t)throw new Error("Cannot find associated treatment");return(void 0!==n.needLog?n.needLog:n.type!==s.ExperimentType.gate)?l._treatmentService.logTreatment(n):Promise.resolve()},this.isGateEnabled=function(e){return l._getExperienceOfEnabledGate(e.name)===e.experience},this._getExperienceOfEnabledGate=function(e){var t=l._gateTreatments.get(e);return t?o.getExperienceName(t.groupName):null},this.getDynamicConfiguration=function(e){var t=l._experimentTreatments.get(e.name)||l._gateTreatments.get(e.name);return t&&t.dynamicConfiguration?t.dynamicConfiguration:null}}},83172:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.GatesService=void 0;var o=n(817),a=n(31940),s=n(86616),u=function(){function e(e,t,n){this.type="gate",this._httpClient=new a.HttpClient(e,t),this._gatesUrl=o.config(n).url.gates+"/gates/get"}return e.prototype.getTreatment=function(e){return r(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,this._httpClient.post(this._gatesUrl,e)];case 1:if(t=n.sent(),s.validateTreatmentsWithType(t))return[2,t];throw new Error("Did not get valid gate treatments")}}))}))},e}();t.GatesService=u},31940:function(e,t){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=void 0;var o=function(){function e(e,t){var n=this;this._fetch=e,this._config=t,this._fetchWithTimeout=this._config.timeout?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Promise.race([n._fetch.apply(n,e),new Promise((function(e,t){return setTimeout((function(){return t(new Error("Timeout"))}),n._config.timeout)}))])}:this._fetch}return e.prototype.get=function(e){return r(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return[4,this._getHeaders()];case 1:return t=r.sent(),[4,this._fetchWithTimeout(e,{credentials:"include",mode:"cors",headers:t})];case 2:return n=r.sent(),[2,this._parseResponse(n)]}}))}))},e.prototype.post=function(e,t){return r(this,void 0,void 0,(function(){var r,o;return i(this,(function(i){switch(i.label){case 0:return[4,this._getHeaders()];case 1:return r=i.sent(),[4,this._fetchWithTimeout(e,{method:"POST",credentials:"include",mode:"cors",headers:n(n({},r),{"Content-Type":"application/json"}),body:JSON.stringify(t)})];case 2:return o=i.sent(),[2,this._parseResponse(o)]}}))}))},e.prototype._filterHeaders=function(e){var t={};return Object.entries(e).forEach((function(e){var n=e[0],r=e[1];r&&(t[n]=r)})),t},e.prototype._getHeaders=function(){return r(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return this._config.getApplicationHeaders?(e=this._filterHeaders,[4,this._config.getApplicationHeaders()]):[3,2];case 1:return[2,e.apply(this,[t.sent()])];case 2:throw new Error("Cannot get application headers")}}))}))},e.prototype._parseResponse=function(e){if(!e.ok)throw new Error("Network response was not ok, status "+e.status);return"application/json"===e.headers.get("Content-Type")?e.json():e.text()},e}();t.HttpClient=o},60251:(e,t,n)=>{"use strict";t.mP=t.eb=t.Re=t.iD=t.aj=void 0;var r=n(89995);Object.defineProperty(t,"aj",{enumerable:!0,get:function(){return r.Experiment}}),Object.defineProperty(t,"iD",{enumerable:!0,get:function(){return r.Gate}}),Object.defineProperty(t,"Re",{enumerable:!0,get:function(){return r.ExperimentClient}});var i=n(96620);Object.defineProperty(t,"eb",{enumerable:!0,get:function(){return i.TreatmentService}});var o=n(83172);Object.defineProperty(t,"mP",{enumerable:!0,get:function(){return o.GatesService}});n(16305)},16305:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropertiesClient=void 0;var r=n(817),i=n(31940),o=function(){function e(e,t,n){this._propertiesUrl=r.config(t).url.properties+"/properties",this._httpClient=new i.HttpClient(e,n)}return e.prototype.getAll=function(){return this._httpClient.get(this._propertiesUrl)},e.prototype.getOne=function(e){var t=this._propertiesUrl+"/"+e;return this._httpClient.get(t)},e.prototype.set=function(e){return this._httpClient.post(this._propertiesUrl,e)},e}();t.PropertiesClient=o},38008:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGroupNames=t.getExperienceName=void 0,t.getExperienceName=function(e){return e.endsWith("_1")||e.endsWith("_2")?e.slice(0,-2):null},t.getGroupNames=function(e){return[e+"_1",e+"_2"]}},86616:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateTreatmentsWithType=void 0;var n=function(e){return"string"==typeof e};t.validateTreatmentsWithType=function(e){return Array.isArray(e)&&e.reduce((function(e,t){return e&&n((r=t).experimentName)&&n(r.groupName)&&n(r.experimentId)&&n(r.type);var r}),!0)}},96620:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TreatmentService=t.ExperimentType=void 0;var o,a=n(817),s=n(31940),u=n(86616);(o=t.ExperimentType||(t.ExperimentType={})).experiment="experiment",o.gate="gate";var c=function(e){var t=function(e){return e.holdoutTreatment?":"+e.holdoutTreatment.experimentId+t(e.holdoutTreatment):""};return e.groupName+":"+e.userId+":"+e.experimentId+t(e)},l=function(){function e(e,t,n,r){this._persistentStorageOpts=r,this.type="experiment",this._throttleLogs=new Map,this._sentLogs={},this._httpClient=new s.HttpClient(e,t),this._treatmentUrl=a.config(n).url.treatment+"/treatment"}return e.prototype.getTreatment=function(e){return r(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(i){switch(i.label){case 0:return t=this._treatmentUrl+"/get",n=e,[4,this._httpClient.post(t,n)];case 1:if(r=i.sent(),u.validateTreatmentsWithType(r))return[2,r];throw new Error("Did not get valid treatments")}}))}))},e.prototype.logTreatment=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this._checkShouldThrottle(e)||this._checkSent(e)?[2]:[4,this._sendLogTreatment(e)];case 1:return t.sent(),this._setSentLogs(e),[2]}}))}))},e.prototype.refresh=function(){this._throttleLogs.clear()},e.prototype.initSentLogsStorage=function(){return r(this,void 0,void 0,(function(){var e,t,n=this;return i(this,(function(r){switch(r.label){case 0:if(!this._persistentStorageOpts)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._persistentStorageOpts.get(this._sentLogsStorageKey)];case 2:return e=r.sent()||{},t=new Set(this._persistentStorageOpts.experimentNames),Object.entries(e).forEach((function(e){var r=e[0],i=e[1];t.has(r)&&n._updateSentLogs(r,i)})),[3,4];case 3:return r.sent(),[3,4];case 4:return[2]}}))}))},Object.defineProperty(e.prototype,"_sentLogsStorageKey",{get:function(){var t;return e.STORAGE_KEY_PREFIX+(null===(t=this._persistentStorageOpts)||void 0===t?void 0:t.clientName)},enumerable:!1,configurable:!0}),e.prototype._checkShouldThrottle=function(e){var t=c(e),n=this._throttleLogs.get(e.experimentName)===t;return n||this._throttleLogs.set(e.experimentName,t),n},e.prototype._checkSent=function(e){var t=c(e);return this._sentLogs[e.experimentName]===t},e.prototype._setSentLogs=function(e){var t=c(e);this._updateSentLogs(e.experimentName,t,!0)},e.prototype._updateSentLogs=function(e,t,n){void 0===n&&(n=!1),(n||void 0===this._sentLogs[e])&&(this._sentLogs[e]=t),n&&this._persistSentLogs()},e.prototype._persistSentLogs=function(){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),this._persistentStorageOpts?[4,this._persistentStorageOpts.set(this._sentLogsStorageKey,this._sentLogs)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[3,4];case 3:return e.sent(),[3,4];case 4:return[2]}}))}))},e.prototype._sendLogTreatment=function(e){var t=this._treatmentUrl+"/log";return this._httpClient.post(t,e)},e.STORAGE_KEY_PREFIX="TreatmentServiceStorage_",e}();t.TreatmentService=l},88265:(e,t,n)=>{"use strict";n.d(t,{dN:()=>ne});var r=n(69063),i=n(62470).hp,o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)};function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s,u,c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c.apply(this,arguments)};function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.HTTP_EXCEPTION=1]="HTTP_EXCEPTION",e[e.INVALID_STATE=2]="INVALID_STATE",e[e.LOCK_TIMEOUT=3]="LOCK_TIMEOUT",e[e.STORAGE_CACHE_SET_ERROR=4]="STORAGE_CACHE_SET_ERROR",e[e.STORAGE_CACHE_REMOVE_ERROR=5]="STORAGE_CACHE_REMOVE_ERROR"}(u||(u={}));var p,h=((s={})[u.UNKNOWN]="Unknown error",s[u.HTTP_EXCEPTION]="HTTP Exception",s[u.INVALID_STATE]="Invalid State",s[u.LOCK_TIMEOUT]="Lock Timeout",s[u.STORAGE_CACHE_SET_ERROR]="Error storing tokens",s[u.STORAGE_CACHE_REMOVE_ERROR]="Error removing tokens",s),f=function(e){function t(t,n){void 0===t&&(t=u.UNKNOWN),void 0===n&&(n=h[t]);var r=e.call(this,n)||this;return r.code=t,r}return a(t,e),t.codes=u,t}(Error);!function(e){e.INVALID_AUTHORIZATION_CODE="Invalid authorization code",e.INVALID_CLIENT_TYPE="Invalid client type",e.INVALID_CODE_VERIFIER="Invalid code verifier",e.INVALID_ORIGIN="Invalid origin",e.INVALID_PUBLIC_KEY="Invalid public key",e.INVALID_REDIRECT_URI="Invalid redirect uri",e.INVALID_SCOPE="Invalid scope",e.INVALID_GRANT_TYPE="Invalid grant type",e.INVALID_REFRESH_TOKEN="Invalid refresh token",e.ACCESS_DENIED="Access is denied",e.INVALID_CLIENT="Invalid client",e.REVOKE_ERROR="Revoke error",e.NOT_ENABLED="Oauth not enabled",e.NOT_IMPLEMENTED="Not implemented"}(p||(p={}));var g=function(e){function t(n,r,i){void 0===r&&(r="unknown");var o=e.call(this,f.codes.HTTP_EXCEPTION,i)||this;return o.serverCode=r,o.response=n,Object.setPrototypeOf(o,t.prototype),o}return a(t,e),Object.defineProperty(t.prototype,"status",{get:function(){return this.response.status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"statusText",{get:function(){return this.response.statusText},enumerable:!1,configurable:!0}),t}(f),m="grammarly.lock.getAccessToken",_="/oauth2/authorize";function v(e){var t,n="";if("undefined"==typeof crypto||void 0===crypto.getRandomValues){t=new Uint8Array(e);for(var r=0;r<e;++r)t[r]=65535*Math.random()|0}else t=crypto.getRandomValues(new Uint8Array(e));return Array.from(t).forEach((function(e){return n+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~."[e%66]})),n}function y(e){try{return btoa(e)}catch(t){return i.from(e,"binary").toString("base64")}}function b(e,t){return void 0===t&&(t=3),l(this,void 0,void 0,(function(){var n;return d(this,(function(r){switch(r.label){case 0:n=0,r.label=1;case 1:return n<t?[4,e()]:[3,4];case 2:if(r.sent())return[2,!0];r.label=3;case 3:return n++,[3,1];case 4:return[2,!1]}}))}))}var C=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function S(e,t,n,r,i){for(var o,a,s,u,c,l,d,p,h,f,g,m,_;i>=64;){for(o=t[0],a=t[1],s=t[2],u=t[3],c=t[4],l=t[5],d=t[6],p=t[7],f=0;f<16;f++)g=r+4*f,e[f]=(255&n[g])<<24|(255&n[g+1])<<16|(255&n[g+2])<<8|255&n[g+3];for(f=16;f<64;f++)m=((h=e[f-2])>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,_=((h=e[f-15])>>>7|h<<25)^(h>>>18|h<<14)^h>>>3,e[f]=(m+e[f-7]|0)+(_+e[f-16]|0);for(f=0;f<64;f++)m=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&l^~c&d)|0)+(p+(C[f]+e[f]|0)|0)|0,_=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&a^o&s^a&s)|0,p=d,d=l,l=c,c=u+m|0,u=s,s=a,a=o,o=m+_|0;t[0]+=o,t[1]+=a,t[2]+=s,t[3]+=u,t[4]+=c,t[5]+=l,t[6]+=d,t[7]+=p,r+=64,i-=64}return r}var E,T,O,w=function(){function e(){this.digestLength=32,this.blockSize=64,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return e.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},e.prototype.clean=function(){for(var e=0;e<this.buffer.length;e++)this.buffer[e]=0;for(e=0;e<this.temp.length;e++)this.temp[e]=0;this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this.bytesHashed+=t,this.bufferLength>0){for(;this.bufferLength<64&&t>0;)this.buffer[this.bufferLength++]=e[n++],t--;64===this.bufferLength&&(S(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(t>=64&&(n=S(this.temp,this.state,e,n,t),t%=64);t>0;)this.buffer[this.bufferLength++]=e[n++],t--;return this},e.prototype.finish=function(e){if(!this.finished){var t=this.bytesHashed,n=this.bufferLength,r=t/536870912|0,i=t<<3,o=t%64<56?64:128;this.buffer[n]=128;for(var a=n+1;a<o-8;a++)this.buffer[a]=0;this.buffer[o-8]=r>>>24&255,this.buffer[o-7]=r>>>16&255,this.buffer[o-6]=r>>>8&255,this.buffer[o-5]=r>>>0&255,this.buffer[o-4]=i>>>24&255,this.buffer[o-3]=i>>>16&255,this.buffer[o-2]=i>>>8&255,this.buffer[o-1]=i>>>0&255,S(this.temp,this.state,this.buffer,0,o),this.finished=!0}for(a=0;a<8;a++)e[4*a+0]=this.state[a]>>>24&255,e[4*a+1]=this.state[a]>>>16&255,e[4*a+2]=this.state[a]>>>8&255,e[4*a+3]=this.state[a]>>>0&255;return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype._saveState=function(e){for(var t=0;t<this.state.length;t++)e[t]=this.state[t]},e.prototype._restoreState=function(e,t){for(var n=0;n<this.state.length;n++)this.state[n]=e[n];this.bytesHashed=t,this.finished=!1,this.bufferLength=0},e}();function I(e){var t=(new w).update(e),n=t.digest();return t.clean(),n}function x(e){return y(function(e){return String.fromCharCode.apply(null,Array.from(new Uint8Array(e)))}(e)).replace(/[=]+$/,"").replace(/[+]/g,"-").replace(/[/]/g,"_")}function P(e){return l(this,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return t=function(e){try{return(new TextEncoder).encode(e)}catch(t){return new Uint8Array(i.from(e,"utf8"))}}(e),"undefined"==typeof crypto||void 0===crypto.subtle?[2,I(t)]:[4,crypto.subtle.digest("SHA-256",t)];case 1:return[2,n.sent()]}}))}))}function R(){return l(this,void 0,void 0,(function(){var e,t,n,r;return d(this,(function(i){switch(i.label){case 0:return e=v(43),n=x,[4,P(e)];case 1:return t=n.apply(void 0,[i.sent()]),r=new Date,[2,{codeVerifier:e,codeChallenge:t,createdAt:r}]}}))}))}function N(e){return void 0===e&&(e=0),l(this,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){return setTimeout(t,e)}))];case 1:return t.sent(),[2]}}))}))}function k(e){var t=Math.floor(100*Math.pow(2,e));return Math.floor(Math.random()*(t-100+1))+100}function M(e){return l(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,p=this;return d(this,(function(h){switch(h.label){case 0:t=c({backoffFn:function(e){var t=e.tryNo;return l(p,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return[4,N(Math.round(k(t)))];case 1:return e.sent(),[2]}}))}))},maxRetries:10},e),n=0,r=!1,i=null,o=null,a=Date.now(),s=function(){r=!0},h.label=1;case 1:if(!(n<=t.maxRetries))return[3,8];h.label=2;case 2:return h.trys.push([2,4,,7]),[4,t.fn({tryNo:n,startedAt:a,abort:s})];case 3:return[2,{result:o=h.sent(),error:null}];case 4:return u=h.sent(),i=u,++n,r?[3,8]:n<=t.maxRetries?[4,t.backoffFn({tryNo:n,startedAt:a,abort:s})]:[3,6];case 5:h.sent(),h.label=6;case 6:return[3,7];case 7:return[3,1];case 8:return[2,{error:i,result:o}]}}))}))}function j(e){return l(this,void 0,void 0,(function(){var t=this;return d(this,(function(n){switch(n.label){case 0:return[4,M({maxRetries:1,fn:function(n){return l(t,void 0,void 0,(function(){var t;return d(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e(n)];case 1:return[2,r.sent()];case 2:throw(t=r.sent())instanceof g&&(i=t.status)>=E.BAD_REQUEST&&i<E.INTERNAL_SERVER_ERROR&&t.status!==E.TOO_MANY_REQUESTS&&n.abort(),t;case 3:return[2]}var i}))}))}})];case 1:return[2,n.sent()]}}))}))}!function(e){e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR"}(E||(E={})),function(e){e.GET="get",e.POST="post"}(T||(T={})),function(e){e.APPLICATION_JSON="application/json"}(O||(O={}));var A,D=function(){function e(e,t){this._fetch=e,this._config=t}return e.prototype.get=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,o,a=this;return d(this,(function(s){switch(s.label){case 0:return[4,this._getHeaders()];case 1:return t=s.sent(),n=function(){return l(a,void 0,void 0,(function(){var n;return d(this,(function(r){switch(r.label){case 0:return[4,this._fetchWithTimeout(e,{credentials:"include",mode:"cors",headers:t})];case 1:return n=r.sent(),[2,this._parseResponse(e,n)]}}))}))},[4,j(n)];case 2:if(r=s.sent(),i=r.result,o=r.error,null!=i)return[2,i];if(null!=o)throw o;throw new Error("Unexpected HttpClient error")}}))}))},e.prototype.post=function(e,t){return l(this,void 0,void 0,(function(){var n,r,i,o,a,s=this;return d(this,(function(u){switch(u.label){case 0:return[4,this._getHeaders()];case 1:return n=u.sent(),r=function(){return l(s,void 0,void 0,(function(){var r;return d(this,(function(i){switch(i.label){case 0:return[4,this._fetchWithTimeout(e,{method:T.POST,credentials:"include",mode:"cors",headers:c(c({},n),{"Content-Type":O.APPLICATION_JSON}),body:JSON.stringify(t)})];case 1:return r=i.sent(),[2,this._parseResponse(e,r)]}}))}))},[4,j(r)];case 2:if(i=u.sent(),o=i.result,a=i.error,null!=o)return[2,o];if(null!=a)throw a;throw new Error("Unexpected HttpClient error")}}))}))},e.prototype._fetchWithTimeout=function(e,t){void 0===t&&(t={}),t.timeout;var n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["timeout"]);return l(this,void 0,void 0,(function(){var t=this;return d(this,(function(r){return[2,this._config.timeout?Promise.race([this._fetch(e,c({},n)),new Promise((function(e,n){return setTimeout((function(){return n(new Error("Fetch Timeout"))}),t._config.timeout)}))]):this._fetch(e,c({},n))]}))}))},e.prototype._getHeaders=function(){return l(this,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return this._config.applicationHeaders?[2,this._config.applicationHeaders]:this._config.getApplicationHeaders?[4,this._config.getApplicationHeaders()]:[3,2];case 1:return[2,e.sent()];case 2:throw new Error("Cannot get application headers")}}))}))},e.prototype._parseResponse=function(e,t){return l(this,void 0,void 0,(function(){var n,r;return d(this,(function(i){switch(i.label){case 0:if(t.status>=E.INTERNAL_SERVER_ERROR)throw new g(t,"unknown","HTTP server error ".concat(t.status,". Unable to fetch ").concat(e));return[4,t.clone().json().catch((function(e){return{error:"unknown",message:e.message}}))];case 1:if(n=i.sent(),r=n.message||"HTTP error. Unable to fetch ".concat(e),!t.ok)throw new g(t,n.error,r);return[4,t.json()];case 2:return[2,i.sent()]}}))}))},e}(),L=function(){function e(e,t,n){this._tokensUrl=e,this._httpClient=new D(t,n)}return e.prototype.authorize=function(e){return this._httpClient.post(this._tokensUrl+_,e)},e.prototype.getTokens=function(e){return this._httpClient.post(this._tokensUrl+"/oauth2/token",e)},e}(),U=32;function H(e){var t=e.baseUrl,n=e.clientId,r=e.scopes,i=e.redirectUri,o=e.mode,a=e.state;return l(this,void 0,void 0,(function(){var e,s,u,c,l;return d(this,(function(d){switch(d.label){case 0:return[4,R()];case 1:return e=d.sent(),s=e.codeChallenge,u=e.codeVerifier,c=a||y(v(U)),l={client_id:n,redirect_uri:i,response_type:"code",response_mode:o,code_challenge:s,state:c,scope:r?r.join(" "):""},[2,{origin:new URL(t).origin,authorizeRequestBody:l,codeVerifier:u,state:c}]}}))}))}function B(e){var t=e.tokensClient,n=e.authorizeRequestBody;return l(this,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return[4,t.authorize(n)];case 1:return[2,e.sent()]}}))}))}function G(e){var t=e.tokensClient,n=e.clientId,r=e.grantType,i=e.codeVerifier,o=e.authorizationCode,a=e.refreshToken;return l(this,void 0,void 0,(function(){var e;return d(this,(function(s){switch(s.label){case 0:switch(e={client_id:n,grant_type:r},r){case"refresh_token":e=c(c({},e),{refresh_token:a});break;case"authorization_code":e=c(c({},e),{code_verifier:i,authorization_code:o})}return[4,t.getTokens(e)];case 1:return[2,s.sent()]}}))}))}function q(e){if(e&&e.expires_at&&e.access_token&&e.refresh_token){var t=(new Date).getTime();return e.expires_at-t<=0?null:e}return null}function Y(e){var t=e.tokensClient,n=e.clientId,r=e.clientType;return l(this,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return[4,G({tokensClient:t,clientId:n,grantType:"Desktop"===r?"urn:ietf:params:oauth:grant-type:client_id":"urn:ietf:params:oauth:grant-type:origin"})];case 1:return[2,e.sent()]}}))}))}function F(e){var t=e.tokensClient,n=e.clientId,r=e.refreshToken;return l(this,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return[4,G({tokensClient:t,clientId:n,grantType:"refresh_token",refreshToken:r})];case 1:return[2,e.sent()]}}))}))}function W(e){var t=e.tokensClient,n=e.baseUrl,r=e.clientId,i=e.redirectUri;return l(this,void 0,void 0,(function(){var e,o,a,s,c,l,p;return d(this,(function(d){switch(d.label){case 0:return[4,H({baseUrl:n+_,clientId:r,scopes:["grammarly.capi.all"],mode:"web_message",redirectUri:i})];case 1:return e=d.sent(),o=e.authorizeRequestBody,a=e.codeVerifier,s=e.state,[4,B({tokensClient:t,authorizeRequestBody:o})];case 2:if(c=d.sent(),l=c.code,p=c.state,s!==p)throw new f(u.INVALID_STATE);return[4,G({tokensClient:t,clientId:r,grantType:"authorization_code",codeVerifier:a,authorizationCode:l})];case 3:return[2,d.sent()]}}))}))}!function(e){e.GET_TOKENS_ATTEMPT_WITH_REFRESH_TOKEN="GET_TOKENS_ATTEMPT_WITH_REFRESH_TOKEN",e.GET_TOKENS_ATTEMPT_WITHOUT_REFRESH_TOKEN="GET_TOKENS_ATTEMPT_WITHOUT_REFRESH_TOKEN",e.GET_TOKENS_SUCCESS="GET_TOKENS_SUCCESS",e.GET_TOKENS_FAILURE="GET_TOKENS_FAILURE",e.INVALID_REFRESH_TOKEN="INVALID_REFRESH_TOKEN",e.ACCESS_DENIED="ACCESS_DENIED",e.LOCK_TIMEOUT="LOCK_TIMEOUT"}(A||(A={}));var z=function(e){return c(c({},e),{timestamp_ms:Date.now()})};function V(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function K(e){return void 0===e&&(e=0),l(this,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){return setTimeout(t,e)}))];case 1:return t.sent(),[2]}}))}))}var J=V();function $(e){return"".concat(J,":").concat(e,":").concat(Math.floor(1e6*(1+Math.random())))}function Z(){return Math.floor(1+9*Math.random())}function X(e,t,n,r,i){return l(this,void 0,void 0,(function(){function o(t){return l(this,void 0,void 0,(function(){var n,i;return d(this,(function(o){switch(o.label){case 0:return[4,e.getItem(t)];case 1:return null==(n=o.sent())?[2,!1]:n===p?[2,!0]:(i=parseInt(String(n.split(":")[1]),10),[2,!Number.isFinite(i)||i+r<Date.now()])}}))}))}function a(){return l(this,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return[4,o(u)];case 1:return t.sent()?[4,e.removeItem(u)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[4,o(c)];case 4:return t.sent()?[4,e.removeItem(c)]:[3,6];case 5:t.sent(),t.label=6;case 6:return[2]}}))}))}var s,u,c,p,h;return d(this,(function(r){switch(r.label){case 0:s=Date.now(),u="".concat(t,"__$$MUTEX_x"),c="".concat(t,"__$$MUTEX_y"),p=$(s),r.label=1;case 1:return[4,a()];case 2:if(r.sent(),Date.now()-s>n)throw new f(f.codes.LOCK_TIMEOUT,'"Mutex on '.concat(t," was not achieved in ").concat(n,"ms"));return[4,e.getItem(u)];case 3:return null==r.sent()?[3,5]:[4,K(Z())];case 4:return r.sent(),[3,1];case 5:return[4,e.setItem(u,p)];case 6:return r.sent(),[4,e.getItem(c)];case 7:return null==r.sent()?[3,9]:[4,K(Z())];case 8:return r.sent(),[3,1];case 9:return[4,e.setItem(c,p)];case 10:return r.sent(),[4,K(Z())];case 11:return r.sent(),[4,e.getItem(u)];case 12:return r.sent()===p?[3,17]:[4,K(Z())];case 13:return r.sent(),[4,e.getItem(c)];case 14:return r.sent()===p?[3,16]:[4,K(Z())];case 15:r.sent(),r.label=16;case 16:return[3,1];case 17:return r.trys.push([17,,21,24]),h=$(Date.now()),[4,e.setItem(u,h)];case 18:return r.sent(),[4,e.setItem(c,h)];case 19:return r.sent(),[4,i()];case 20:return r.sent(),[3,24];case 21:return[4,e.removeItem(u)];case 22:return r.sent(),[4,e.removeItem(c)];case 23:return r.sent(),[7];case 24:return[3,25];case 25:return[2]}}))}))}var Q=function(){function e(e){this.locks=new Map,this.storage=e}return e.prototype.acquireLock=function(e){return l(this,void 0,void 0,(function(){var t=this;return d(this,(function(n){return[2,new Promise((function(n){return l(t,void 0,void 0,(function(){var t=this;return d(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,X(this.storage,e,6e4,5e3,(function(){return l(t,void 0,void 0,(function(){var t=this;return d(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(r){t.locks.set(e,r),n(!0)}))];case 1:return r.sent(),[2]}}))}))}))];case 1:return r.sent(),[3,3];case 2:return r.sent(),n(!1),[3,3];case 3:return[2]}}))}))}))]}))}))},e.prototype.releaseLock=function(e){return l(this,void 0,void 0,(function(){var t;return d(this,(function(n){return null!=(t=this.locks.get(e))&&t(),this.locks.delete(e),[2]}))}))},e}(),ee=function(){function e(e,t){this._storage=e,this._storageKey=t}return e.prototype.set=function(e){return l(this,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._storage.setItem(this._storageKey,JSON.stringify(e))];case 1:return t.sent(),[2,e];case 2:throw t.sent(),new f(u.STORAGE_CACHE_SET_ERROR);case 3:return[2]}}))}))},e.prototype.get=function(){return l(this,void 0,void 0,(function(){var e;return d(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._storage.getItem(this._storageKey)];case 1:return[2,(e=t.sent())?JSON.parse(e):null];case 2:return t.sent(),[2,null];case 3:return[2]}}))}))},e.prototype.remove=function(){return l(this,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._storage.removeItem(this._storageKey)];case 1:return e.sent(),[3,3];case 2:throw e.sent(),new f(u.STORAGE_CACHE_REMOVE_ERROR);case 3:return[2]}}))}))},e}(),te=function(){function e(){this.cache={},this.length=0}return e.prototype.getItem=function(e){return e in this.cache?this.cache[e]:null},e.prototype.setItem=function(e,t){void 0===t?this.removeItem(e):(this.cache.hasOwnProperty(e)||this.length++,this.cache[e]=t)},e.prototype.removeItem=function(e){this.cache.hasOwnProperty(e)&&(delete this.cache[e],this.length--)},e.prototype.key=function(e){return Object.keys(this.cache)[e]||null},e.prototype.clear=function(){this.cache={},this.length=0},e}(),ne=function(e){function t(t){var n=e.call(this,t)||this;return n._promiseMap={},n._tokensClient=new L(n._domain,t.fetch,t.httpClientOptions),n._storageKey=t.storageKey||"grammarly.".concat(n._clientId,".tokens"),n._storage=t.storage||new te,n._lock=t.lock||new Q(n._storage),n._onAccessDenied=t.onAccessDenied||function(){},n._cache=new ee(n._storage,n._storageKey),n._logger=r.Bx.Logging.getLogger("OAuth"),n}return a(t,e),t.prototype._authorize=function(e){return l(this,void 0,void 0,(function(){var t,n;return d(this,(function(r){switch(r.label){case 0:t=e.orAnonymous,r.label=1;case 1:return r.trys.push([1,3,,9]),[4,W({tokensClient:this._tokensClient,baseUrl:this._domain,clientId:this._clientId,redirectUri:this._redirectUri})];case 2:return[2,r.sent()];case 3:return(n=r.sent())instanceof g&&n.status===E.UNAUTHORIZED?[3,4]:[3,8];case 4:return t?[4,Y({tokensClient:this._tokensClient,clientId:this._clientId,clientType:"Web"})]:[3,6];case 5:return[2,r.sent()];case 6:return this._logger.error(n.message,z(e)),[4,this._onAccessDenied(n)];case 7:r.sent(),r.label=8;case 8:throw n;case 9:return[2]}}))}))},t.prototype._refresh=function(e,t){return l(this,void 0,void 0,(function(){var n;return d(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,5]),[4,F({tokensClient:this._tokensClient,clientId:this._clientId,refreshToken:e})];case 1:case 3:return[2,r.sent()];case 2:return(n=r.sent())instanceof g&&n.status===E.UNAUTHORIZED?(this._logger.info(n.message,z(t)),[4,this._authorize(t)]):[3,4];case 4:throw n;case 5:return[2]}}))}))},t.prototype._getAccessToken=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,o,a,s=this;return d(this,(function(c){switch(c.label){case 0:return c.trys.push([0,16,,17]),(t=e.ignoreCache)?[3,2]:(n=q,[4,this._cache.get()]);case 1:if(i=n.apply(void 0,[c.sent()]))return[2,i.access_token];c.label=2;case 2:return[4,b((function(){return s._lock.acquireLock(m,5e3)}),10)];case 3:if(!c.sent())return[3,14];c.label=4;case 4:return c.trys.push([4,,11,13]),[4,this._cache.get()];case 5:return r=c.sent(),!t&&(i=q(r))?[2,i.access_token]:(o=void 0,!t&&r&&r.refresh_token?[3,7]:(this._logger.debug(A.GET_TOKENS_ATTEMPT_WITHOUT_REFRESH_TOKEN,z(e)),[4,this._authorize(e)]));case 6:return o=c.sent(),[3,9];case 7:return this._logger.debug(A.GET_TOKENS_ATTEMPT_WITH_REFRESH_TOKEN,z(e)),[4,this._refresh(r.refresh_token,e)];case 8:o=c.sent(),c.label=9;case 9:return this._logger.debug(A.GET_TOKENS_SUCCESS,z(e)),[4,this._cache.set((l=o,{expires_at:(new Date).getTime()+1e3*l.expires_in,access_token:l.access_token,refresh_token:l.refresh_token}))];case 10:return[2,(o=c.sent()).access_token];case 11:return[4,this._lock.releaseLock(m)];case 12:return c.sent(),[7];case 13:return[3,15];case 14:throw this._logger.debug(A.LOCK_TIMEOUT,z(e)),new f(u.LOCK_TIMEOUT);case 15:return[3,17];case 16:throw a=c.sent(),this._logger.error(A.GET_TOKENS_FAILURE,a,z(e)),a;case 17:return[2]}var l}))}))},t.prototype.getAccessToken=function(e){var t=this;void 0===e&&(e={orAnonymous:!1,ignoreCache:!1});var n="".concat(e.orAnonymous,"::").concat(e.ignoreCache),r=this._promiseMap[n];return r||(r=this._getAccessToken(e).finally((function(){delete t._promiseMap[n],r=null})),this._promiseMap[n]=r),r},t.prototype.logout=function(){return l(this,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return[4,this._cache.remove()];case 1:return e.sent(),[2]}}))}))},t}((function(e){var t;this._clientId=e.clientId,this._redirectUri=e.redirectUri,this._domain=(t=e.domain,/^https?:\/\//.test(t)?t:"https://".concat(t))}))},38841:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.VitoApi=void 0;var l=s(n(27643)),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.plansGetRaw=function(e,t){return u(this,void 0,void 0,(function(){var n,r,i;return c(this,(function(o){switch(o.label){case 0:if(null===e.specialOffers||void 0===e.specialOffers)throw new l.RequiredError("specialOffers","Required parameter requestParameters.specialOffers was null or undefined when calling plansGet.");if(null===e.countryCode||void 0===e.countryCode)throw new l.RequiredError("countryCode","Required parameter requestParameters.countryCode was null or undefined when calling plansGet.");return n={},e.specialOffers&&(n.specialOffers=e.specialOffers),void 0!==e.countryCode&&(n.countryCode=e.countryCode),r={},[4,this.request({path:"/plans/",method:"GET",headers:r,query:n},t)];case 1:return i=o.sent(),[2,new l.JSONApiResponse(i)]}}))}))},t.prototype.plansGet=function(e,t){return u(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.plansGetRaw(e,t)];case 1:return[4,n.sent().value()];case 2:return[2,n.sent()]}}))}))},t.prototype.setupTrialPostRaw=function(e,t){return u(this,void 0,void 0,(function(){var n,r,i;return c(this,(function(o){switch(o.label){case 0:if(null===e.setupTrialPostRequest||void 0===e.setupTrialPostRequest)throw new l.RequiredError("setupTrialPostRequest","Required parameter requestParameters.setupTrialPostRequest was null or undefined when calling setupTrialPost.");return n={},(r={})["Content-Type"]="application/json",[4,this.request({path:"/setup-trial/",method:"POST",headers:r,query:n,body:e.setupTrialPostRequest},t)];case 1:return i=o.sent(),[2,new l.JSONApiResponse(i)]}}))}))},t.prototype.setupTrialPost=function(e,t){return u(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.setupTrialPostRaw(e,t)];case 1:return[4,n.sent().value()];case 2:return[2,n.sent()]}}))}))},t.prototype.specialOffersGetRaw=function(e,t){return u(this,void 0,void 0,(function(){var n,r,i;return c(this,(function(o){switch(o.label){case 0:return n={},e.names&&(n.names=e.names),r={},[4,this.request({path:"/special-offers/",method:"GET",headers:r,query:n},t)];case 1:return i=o.sent(),[2,new l.JSONApiResponse(i)]}}))}))},t.prototype.specialOffersGet=function(e,t){return void 0===e&&(e={}),u(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.specialOffersGetRaw(e,t)];case 1:return[4,n.sent().value()];case 2:return[2,n.sent()]}}))}))},t.prototype.subscribePostRaw=function(e,t){return u(this,void 0,void 0,(function(){var n,r,i;return c(this,(function(o){switch(o.label){case 0:if(null===e.subscribePostRequest||void 0===e.subscribePostRequest)throw new l.RequiredError("subscribePostRequest","Required parameter requestParameters.subscribePostRequest was null or undefined when calling subscribePost.");return n={},(r={})["Content-Type"]="application/json",[4,this.request({path:"/subscribe/",method:"POST",headers:r,query:n,body:e.subscribePostRequest},t)];case 1:return i=o.sent(),[2,new l.JSONApiResponse(i)]}}))}))},t.prototype.subscribePost=function(e,t){return u(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.subscribePostRaw(e,t)];case 1:return[4,n.sent().value()];case 2:return[2,n.sent()]}}))}))},t}(l.BaseAPI);t.VitoApi=d},81345:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(38841),t)},38819:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(27643),t),i(n(81345),t),i(n(54526),t)},54526:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},27643:function(e,t){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TextApiResponse=t.BlobApiResponse=t.VoidApiResponse=t.JSONApiResponse=t.canConsumeForm=t.querystring=t.COLLECTION_FORMATS=t.RequiredError=t.FetchError=t.ResponseError=t.BaseAPI=t.DefaultConfig=t.Configuration=t.BASE_PATH=void 0,t.BASE_PATH="http://localhost".replace(/\/+$/,"");var s=function(){function e(e){void 0===e&&(e={}),this.configuration=e}return Object.defineProperty(e.prototype,"config",{set:function(e){this.configuration=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"basePath",{get:function(){return null!=this.configuration.basePath?this.configuration.basePath:t.BASE_PATH},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fetchApi",{get:function(){return this.configuration.fetchApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"middleware",{get:function(){return this.configuration.middleware||[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"queryParamsStringify",{get:function(){return this.configuration.queryParamsStringify||d},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"username",{get:function(){return this.configuration.username},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"password",{get:function(){return this.configuration.password},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"apiKey",{get:function(){var e=this.configuration.apiKey;if(e)return"function"==typeof e?e:function(){return e}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"accessToken",{get:function(){var e=this,t=this.configuration.accessToken;if(t)return"function"==typeof t?t:function(){return o(e,void 0,void 0,(function(){return a(this,(function(e){return[2,t]}))}))}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){return this.configuration.headers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"credentials",{get:function(){return this.configuration.credentials},enumerable:!1,configurable:!0}),e}();t.Configuration=s,t.DefaultConfig=new s,t.BaseAPI=function(){function e(e){void 0===e&&(e=t.DefaultConfig);var n=this;this.configuration=e,this.fetchApi=function(e,t){return o(n,void 0,void 0,(function(){var n,r,o,s,u,l,d,p,h,f;return a(this,(function(a){switch(a.label){case 0:n={url:e,init:t},r=0,o=this.middleware,a.label=1;case 1:return r<o.length?(f=o[r]).pre?[4,f.pre(i({fetch:this.fetchApi},n))]:[3,3]:[3,4];case 2:n=a.sent()||n,a.label=3;case 3:return r++,[3,1];case 4:s=void 0,a.label=5;case 5:return a.trys.push([5,7,,12]),[4,(this.configuration.fetchApi||fetch)(n.url,n.init)];case 6:return s=a.sent(),[3,12];case 7:u=a.sent(),l=0,d=this.middleware,a.label=8;case 8:return l<d.length?(f=d[l]).onError?[4,f.onError({fetch:this.fetchApi,url:n.url,init:n.init,error:u,response:s?s.clone():void 0})]:[3,10]:[3,11];case 9:s=a.sent()||s,a.label=10;case 10:return l++,[3,8];case 11:if(void 0===s)throw u instanceof Error?new c(u,"The request failed and the interceptors did not return an alternative response"):u;return[3,12];case 12:p=0,h=this.middleware,a.label=13;case 13:return p<h.length?(f=h[p]).post?[4,f.post({fetch:this.fetchApi,url:n.url,init:n.init,response:s.clone()})]:[3,15]:[3,16];case 14:s=a.sent()||s,a.label=15;case 15:return p++,[3,13];case 16:return[2,s]}}))}))},this.middleware=e.middleware}return e.prototype.withMiddleware=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.clone();return r.middleware=(e=r.middleware).concat.apply(e,t),r},e.prototype.withPreMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.map((function(e){return{pre:e}}));return this.withMiddleware.apply(this,n)},e.prototype.withPostMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.map((function(e){return{post:e}}));return this.withMiddleware.apply(this,n)},e.prototype.isJsonMime=function(t){return!!t&&e.jsonRegex.test(t)},e.prototype.request=function(e,t){return o(this,void 0,void 0,(function(){var n,r,i,o;return a(this,(function(a){switch(a.label){case 0:return[4,this.createFetchParams(e,t)];case 1:return o=a.sent(),n=o.url,r=o.init,[4,this.fetchApi(n,r)];case 2:if((i=a.sent())&&i.status>=200&&i.status<300)return[2,i];throw new u(i,"Response returned an error code")}}))}))},e.prototype.createFetchParams=function(e,t){return o(this,void 0,void 0,(function(){var n,r,s,u,c,l,d,p,h=this;return a(this,(function(f){switch(f.label){case 0:return n=this.configuration.basePath+e.path,void 0!==e.query&&0!==Object.keys(e.query).length&&(n+="?"+this.configuration.queryParamsStringify(e.query)),r=Object.assign({},this.configuration.headers,e.headers),Object.keys(r).forEach((function(e){return void 0===r[e]?delete r[e]:{}})),s="function"==typeof t?t:function(){return o(h,void 0,void 0,(function(){return a(this,(function(e){return[2,t]}))}))},u={method:e.method,headers:r,body:e.body,credentials:this.configuration.credentials},l=[i({},u)],[4,s({init:u,context:e})];case 1:return g=(c=i.apply(void 0,l.concat([f.sent()]))).body,d="undefined"!=typeof FormData&&g instanceof FormData||c.body instanceof URLSearchParams||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(c.body)?c.body:this.isJsonMime(r["Content-Type"])?JSON.stringify(c.body):c.body,p=i(i({},c),{body:d}),[2,{url:n,init:p}]}var g}))}))},e.prototype.clone=function(){var e=new(0,this.constructor)(this.configuration);return e.middleware=this.middleware.slice(),e},e.jsonRegex=new RegExp("^(:?application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(:?;.*)?$","i"),e}();var u=function(e){function t(t,n){var r=e.call(this,n)||this;return r.response=t,r.name="ResponseError",r}return r(t,e),t}(Error);t.ResponseError=u;var c=function(e){function t(t,n){var r=e.call(this,n)||this;return r.cause=t,r.name="FetchError",r}return r(t,e),t}(Error);t.FetchError=c;var l=function(e){function t(t,n){var r=e.call(this,n)||this;return r.field=t,r.name="RequiredError",r}return r(t,e),t}(Error);function d(e,t){return void 0===t&&(t=""),Object.keys(e).map((function(n){return p(n,e[n],t)})).filter((function(e){return e.length>0})).join("&")}function p(e,t,n){void 0===n&&(n="");var r=n+(n.length?"[".concat(e,"]"):e);if(t instanceof Array){var i=t.map((function(e){return encodeURIComponent(String(e))})).join("&".concat(encodeURIComponent(r),"="));return"".concat(encodeURIComponent(r),"=").concat(i)}return t instanceof Set?p(e,Array.from(t),n):t instanceof Date?"".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(t.toISOString())):t instanceof Object?d(t,r):"".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(String(t)))}t.RequiredError=l,t.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"\t",pipes:"|"},t.querystring=d,t.canConsumeForm=function(e){for(var t=0,n=e;t<n.length;t++)if("multipart/form-data"===n[t].contentType)return!0;return!1};var h=function(){function e(e,t){void 0===t&&(t=function(e){return e}),this.raw=e,this.transformer=t}return e.prototype.value=function(){return o(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return e=this.transformer,[4,this.raw.json()];case 1:return[2,e.apply(this,[t.sent()])]}}))}))},e}();t.JSONApiResponse=h;var f=function(){function e(e){this.raw=e}return e.prototype.value=function(){return o(this,void 0,void 0,(function(){return a(this,(function(e){return[2,void 0]}))}))},e}();t.VoidApiResponse=f;var g=function(){function e(e){this.raw=e}return e.prototype.value=function(){return o(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.raw.blob()];case 1:return[2,e.sent()]}}))}))},e}();t.BlobApiResponse=g;var m=function(){function e(e){this.raw=e}return e.prototype.value=function(){return o(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.raw.text()];case 1:return[2,e.sent()]}}))}))},e}();t.TextApiResponse=m},42109:(e,t)=>{"use strict";function n(e){try{return encodeURIComponent(e)}catch(e){return null}}function r(e){try{return decodeURIComponent(e)}catch(e){return null}}t.A=function(e,t,i){if(arguments.length<2)return function(e){var t=function(e){var t={},n=document.cookie.split(/ *; */);if(!n[0])return t;var i=n,o=Array.isArray(i),a=0;for(i=o?i:i[Symbol.iterator]();;){var s;if(o){if(a>=i.length)break;s=i[a++]}else{if((a=i.next()).done)break;s=a.value}var u=s;t[r((u=u.split("="))[0])]=r(u[1])}return t}();return e?t[e]:t}(e);!function(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],i=n(e)+"="+n(t);null==t&&(r.maxage=-1),r.maxage&&(r.expires=new Date(+new Date+r.maxage)),r.path&&(i+="; path="+r.path),r.domain&&(i+="; domain="+r.domain),r.expires&&(i+="; expires="+r.expires.toUTCString()),r.secure&&(i+="; secure"),document.cookie=i}(e,t,i)}},3780:function(e,t,n){var r,i=i||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},u=function(e){setTimeout((function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()}),4e4)},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},l=function(t,l,d){d||(t=c(t));var p,h=this,f="application/octet-stream"===t.type,g=function(){!function(e,t,n){for(var r=(t=[].concat(t)).length;r--;){var i=e["on"+t[r]];if("function"==typeof i)try{i.call(e,e)}catch(e){s(e)}}}(h,"writestart progress write writeend".split(" "))};if(h.readyState=h.INIT,i)return p=n().createObjectURL(t),void setTimeout((function(){var e,t;r.href=p,r.download=l,e=r,t=new MouseEvent("click"),e.dispatchEvent(t),g(),u(p),h.readyState=h.DONE}));!function(){if((a||f&&o)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=a?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,h.readyState=h.DONE,g()},r.readAsDataURL(t),void(h.readyState=h.INIT)}p||(p=n().createObjectURL(t)),f?e.location.href=p:e.open(p,"_blank")||(e.location.href=p),h.readyState=h.DONE,g(),u(p)}()},d=l.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(e,t,n){return new l(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);e.exports?e.exports.saveAs=i:null!==n.amdD&&null!==n.amdO&&(void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r))},95292:(e,t,n)=>{"use strict";n.d(t,{E$:()=>v,Gr:()=>O,HS:()=>f,Ie:()=>s,KC:()=>_,Mu:()=>m,Si:()=>p,TF:()=>I,TS:()=>E,Tj:()=>d,Yr:()=>w,ci:()=>x,cs:()=>a,cy:()=>h,h3:()=>u,iv:()=>b,nZ:()=>c,oE:()=>P,pb:()=>g,qQ:()=>C,rT:()=>y,sj:()=>R,tP:()=>o,ue:()=>T,x1:()=>N,x9:()=>S,zN:()=>l});var r=n(47370),i=n(30040);function o(e){return new Set(e)}function a(e){return{show:function(t){var n="";return t.forEach((function(t){n+=e.show(t)+", "})),""!==n&&(n=n.substring(0,n.length-2)),"new Set(["+n+"])"}}}var s=new Set;function u(e){return function(t){var n=[];return t.forEach((function(e){return n.push(e)})),n.sort(e.compare)}}function c(e){var t=f(e);return(0,r.ee)((function(e,n){return t(e,n)&&t(n,e)}))}function l(e){return function(t){for(var n,r=t.values(),i=!1;!i&&!(n=r.next()).done;)i=e(n.value);return i}}function d(e){var t=m(e);return function(e){return function(n){var r=new Set;return n.forEach((function(n){var i=e(n);t(i,r)||r.add(i)})),r}}}function p(e){return(0,i.not)(l((0,i.not)(e)))}function h(e){var t=m(e);return function(e){return function(n){var r=new Set;return n.forEach((function(n){e(n).forEach((function(e){t(e,r)||r.add(e)}))})),r}}}function f(e){var t=m(e);return function(n,r){if(void 0===r){var i=f(e);return function(e){return i(e,n)}}return p((function(e){return t(e,r)}))(n)}}function g(e){return function(t){for(var n,r=t.values(),i=new Set;!(n=r.next()).done;){var o=n.value;e(o)&&i.add(o)}return i}}function m(e){return function(t,n){if(void 0===n){var r=m(e);return function(e){return r(t,e)}}for(var i,o=n.values(),a=!1;!a&&!(i=o.next()).done;)a=e.equals(t,i.value);return a}}function _(e){var t=m(e);return function(n,r){if(void 0===r){var i=_(e);return function(e){return i(n,e)}}if(n===s)return r;if(r===s)return n;var o=new Set(n);return r.forEach((function(e){t(e,o)||o.add(e)})),o}}function v(e){var t=m(e);return function(n,r){if(void 0===r){var i=v(e);return function(e){return i(e,n)}}if(n===s||r===s)return s;var o=new Set;return n.forEach((function(e){t(e,r)&&o.add(e)})),o}}function y(e,t){return function(n){return function(r){for(var i,o=r.values(),a=new Set,s=new Set,u=m(e),c=m(t);!(i=o.next()).done;){var l=n(i.value);switch(l._tag){case"Left":u(l.left,a)||a.add(l.left);break;case"Right":c(l.right,s)||s.add(l.right)}}return{left:a,right:s}}}}function b(e){var t=m(e);return function(n,r){if(void 0===r){var i=b(e);return function(e){return i(e,n)}}return g((function(e){return!t(e,r)}))(n)}}function C(e){return{concat:_(e),empty:s}}function S(e){return{concat:v(e)}}function E(e){var t=u(e);return function(e,n){return function(r){return t(r).reduce(n,e)}}}function T(e,t){var n=u(e);return function(e){return function(r){return n(r).reduce((function(n,r){return t.concat(n,e(r))}),t.empty)}}}function O(e){return new Set([e])}function w(e){var t=m(e);return function(e){return function(n){if(t(e)(n))return n;var r=new Set(n);return r.add(e),r}}}function I(e){return function(t){return function(n){return g((function(n){return!e.equals(t,n)}))(n)}}}function x(e){return function(t){for(var n=t.length,r=new Set,i=m(e),o=0;o<n;o++){var a=t[o];i(a,r)||r.add(a)}return r}}function P(e){return N(e)(i.identity)}function R(e,t){return function(n){var r=m(e),i=m(t),o=new Set,a=new Set;return n.forEach((function(e){switch(e._tag){case"Left":r(e.left,o)||o.add(e.left);break;case"Right":i(e.right,a)||a.add(e.right)}})),{left:o,right:a}}}function N(e){var t=m(e);return function(e){return function(n){var r=new Set;return n.forEach((function(n){var i=e(n);"Some"!==i._tag||t(i.value,r)||r.add(i.value)})),r}}}},64514:(e,t,n)=>{"use strict";n.d(t,{pb:()=>o,zN:()=>i});var r=n(95292),i=(r.cs,new Set,r.h3,r.nZ,r.zN);function o(e){return r.pb(e)}r.Tj,r.Si,r.cy,r.HS,r.Mu,r.KC,r.E$,r.rT,r.iv,r.qQ,r.x9,r.TS,r.ue,r.Gr,r.Yr,r.TF,r.ci,r.oE,r.sj,r.x1},95717:(e,t,n)=>{"use strict";n.d(t,{NW:()=>s,OH:()=>u,PH:()=>v,PV:()=>d,RZ:()=>f,YO:()=>l,cz:()=>h,g1:()=>c,id:()=>m,me:()=>o,rz:()=>_,tB:()=>g,w3:()=>a,y$:()=>p});var r=n(97905),i=n(30040);function o(e){return{encode:function(t){return null===t?null:e.encode(t)}}}function a(e){return{encode:function(t){var n={};for(var r in e)n[r]=e[r].encode(t[r]);return n}}}var s=a;function u(e){return{encode:function(t){var n={};for(var r in e){var i=t[r];r in t&&(n[r]=void 0===i?void 0:e[r].encode(i))}return n}}}function c(e){return{encode:function(t){var n={};for(var r in t)n[r]=e.encode(t[r]);return n}}}function l(e){return{encode:function(t){return t.map(e.encode)}}}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{encode:function(t){return e.map((function(e,n){return e.encode(t[n])}))}}}var p=function(e){return function(t){return{encode:function(n){return(0,r.t)(t.encode(n),e.encode(n))}}}};function h(e){return function(t){return{encode:function(n){return t[n[e]].encode(n)}}}}function f(e){var t=(0,r.B)(e);return{encode:function(e){return t().encode(e)}}}var g=i.identity;function m(){return{encode:i.identity}}var _="io-ts/Encoder",v={URI:_,contramap:function(e,t){return{encode:function(n){return e.encode(t(n))}}}}},52839:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_RESULT__;(function(){"use strict";var root="object"==typeof window?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS&&(root=__webpack_require__.g);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&module.exports,AMD=__webpack_require__.amdO,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(e){return function(t){return new Sha1(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Sha1},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("sha1").update(e,"utf8").digest("hex");if(e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(void 0===e.length)return method(e);return crypto.createHash("sha1").update(new Buffer(e)).digest("hex")};return nodeMethod};function Sha1(e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(e){if(!this.finalized){var t="string"!=typeof e;t&&e.constructor===root.ArrayBuffer&&(e=new Uint8Array(e));for(var n,r,i=0,o=e.length||0,a=this.blocks;i<o;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),t)for(r=this.start;i<o&&r<64;++i)a[r>>2]|=e[i]<<SHIFT[3&r++];else for(r=this.start;i<o&&r<64;++i)(n=e.charCodeAt(i))<128?a[r>>2]|=n<<SHIFT[3&r++]:n<2048?(a[r>>2]|=(192|n>>6)<<SHIFT[3&r++],a[r>>2]|=(128|63&n)<<SHIFT[3&r++]):n<55296||n>=57344?(a[r>>2]|=(224|n>>12)<<SHIFT[3&r++],a[r>>2]|=(128|n>>6&63)<<SHIFT[3&r++],a[r>>2]|=(128|63&n)<<SHIFT[3&r++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++i)),a[r>>2]|=(240|n>>18)<<SHIFT[3&r++],a[r>>2]|=(128|n>>12&63)<<SHIFT[3&r++],a[r>>2]|=(128|n>>6&63)<<SHIFT[3&r++],a[r>>2]|=(128|63&n)<<SHIFT[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.block=a[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var e,t,n=this.h0,r=this.h1,i=this.h2,o=this.h3,a=this.h4,s=this.blocks;for(e=16;e<80;++e)t=s[e-3]^s[e-8]^s[e-14]^s[e-16],s[e]=t<<1|t>>>31;for(e=0;e<20;e+=5)n=(t=(r=(t=(i=(t=(o=(t=(a=(t=n<<5|n>>>27)+(r&i|~r&o)+a+1518500249+s[e]<<0)<<5|a>>>27)+(n&(r=r<<30|r>>>2)|~n&i)+o+1518500249+s[e+1]<<0)<<5|o>>>27)+(a&(n=n<<30|n>>>2)|~a&r)+i+1518500249+s[e+2]<<0)<<5|i>>>27)+(o&(a=a<<30|a>>>2)|~o&n)+r+1518500249+s[e+3]<<0)<<5|r>>>27)+(i&(o=o<<30|o>>>2)|~i&a)+n+1518500249+s[e+4]<<0,i=i<<30|i>>>2;for(;e<40;e+=5)n=(t=(r=(t=(i=(t=(o=(t=(a=(t=n<<5|n>>>27)+(r^i^o)+a+1859775393+s[e]<<0)<<5|a>>>27)+(n^(r=r<<30|r>>>2)^i)+o+1859775393+s[e+1]<<0)<<5|o>>>27)+(a^(n=n<<30|n>>>2)^r)+i+1859775393+s[e+2]<<0)<<5|i>>>27)+(o^(a=a<<30|a>>>2)^n)+r+1859775393+s[e+3]<<0)<<5|r>>>27)+(i^(o=o<<30|o>>>2)^a)+n+1859775393+s[e+4]<<0,i=i<<30|i>>>2;for(;e<60;e+=5)n=(t=(r=(t=(i=(t=(o=(t=(a=(t=n<<5|n>>>27)+(r&i|r&o|i&o)+a-1894007588+s[e]<<0)<<5|a>>>27)+(n&(r=r<<30|r>>>2)|n&i|r&i)+o-1894007588+s[e+1]<<0)<<5|o>>>27)+(a&(n=n<<30|n>>>2)|a&r|n&r)+i-1894007588+s[e+2]<<0)<<5|i>>>27)+(o&(a=a<<30|a>>>2)|o&n|a&n)+r-1894007588+s[e+3]<<0)<<5|r>>>27)+(i&(o=o<<30|o>>>2)|i&a|o&a)+n-1894007588+s[e+4]<<0,i=i<<30|i>>>2;for(;e<80;e+=5)n=(t=(r=(t=(i=(t=(o=(t=(a=(t=n<<5|n>>>27)+(r^i^o)+a-899497514+s[e]<<0)<<5|a>>>27)+(n^(r=r<<30|r>>>2)^i)+o-899497514+s[e+1]<<0)<<5|o>>>27)+(a^(n=n<<30|n>>>2)^r)+i-899497514+s[e+2]<<0)<<5|i>>>27)+(o^(a=a<<30|a>>>2)^n)+r-899497514+s[e+3]<<0)<<5|r>>>27)+(i^(o=o<<30|o>>>2)^a)+n-899497514+s[e+4]<<0,i=i<<30|i>>>2;this.h0=this.h0+n<<0,this.h1=this.h1+r<<0,this.h2=this.h2+i<<0,this.h3=this.h3+o<<0,this.h4=this.h4+a<<0},Sha1.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4;return HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,i>>24&255,i>>16&255,i>>8&255,255&i]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};var exports=createMethod();COMMON_JS?module.exports=exports:(root.sha1=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()},16799:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.retrying=t.applyAndDelay=void 0;var a=o(n(83293)),s=o(n(44297)),u=n(63336),c=n(90892);function l(e,t){var n=c.applyPolicy(e,t);return u.pipe(n.previousDelay,s.fold((function(){return a.task.of(n)}),(function(e){return a.delay(e)(a.task.of(n))})))}t.applyAndDelay=l,t.retrying=function(e,t,n){var r=function(i){return u.pipe(i,t,a.chain((function(t){return n(t)?u.pipe(l(e,i),a.chain((function(e){return u.pipe(e.previousDelay,s.fold((function(){return a.task.of(t)}),(function(){return r(e)})))}))):a.task.of(t)})))};return r(c.defaultRetryStatus)}},90892:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.monoidRetryPolicy=t.applyPolicy=t.defaultRetryStatus=t.exponentialBackoff=t.capDelay=t.constantDelay=t.limitRetriesByDelay=t.limitRetries=t.Monoid=void 0;var a=o(n(69082)),s=o(n(44297)),u=n(98475),c=n(58413),l=n(63336);t.Monoid=a.getFunctionMonoid(s.getApplyMonoid({concat:u.getJoinSemigroup(c.ordNumber).concat,empty:0}))(),t.limitRetries=function(e){return function(t){return t.iterNumber>=e?s.none:s.some(0)}},t.limitRetriesByDelay=function(e,t){return function(n){return l.pipe(n,t,s.filter((function(t){return t<e})))}},t.constantDelay=function(e){return function(){return s.some(e)}},t.capDelay=function(e,t){return function(n){return l.pipe(n,t,s.map((function(t){return Math.min(e,t)})))}},t.exponentialBackoff=function(e){return function(t){return s.some(e*Math.pow(2,t.iterNumber))}},t.defaultRetryStatus={iterNumber:0,cumulativeDelay:0,previousDelay:s.none},t.applyPolicy=function(e,t){var n=e(t);return{iterNumber:t.iterNumber+1,cumulativeDelay:t.cumulativeDelay+s.getOrElse((function(){return 0}))(n),previousDelay:n}},t.monoidRetryPolicy=t.Monoid},94155:(e,t,n)=>{"use strict";n.d(t,{k:()=>_});var r=n(63336),i=n(96797),o=n(58889),a=n(42291),s=n(22496),u=n(5574);const c=i.KC([i.eu("extensionChrome"),i.eu("extensionFirefox"),i.eu("extensionEdge"),i.eu("officeAddIn"),i.eu("officeAddIn-Word"),i.eu("officeAddIn-Outlook"),i.eu("windowsExtension"),i.eu("macExtension"),i.eu("MOBILE_IOS"),i.eu("IOS_NATIVE_EDITOR"),i.eu("IPAD_EDITOR"),i.eu("MOBILE_ANDROID")]),l=i.eu("ORGANIZATION_CONTROLS"),d=i.qO({regex:i.Yj,priority:i.ai,description:i.Yj,prefixes:i.YO(i.Yj)}),p=i.qO({patterns:i.g1(i.Yj,d)}),h={clients:i.YO(i.qO({client:c,blocked:i.zM,reason:l})),domains:i.YO(i.qO({domain:i.Yj,subdomains:i.zM,blocked:i.zM,reason:l})),applications:i.YO(i.qO({application:i.Yj,blocked:i.zM,reason:l})),allowedDomains:i.YO(i.qO({domain:i.Yj,enabled:i.zM,subdomains:i.zM})),allowedApplications:i.YO(i.qO({application:i.Yj,enabled:i.zM})),sensitivityLabels:i.YO(i.qO({sensitivityLabel:i.Yj,blocked:i.zM})),confidentialModeEnabled:i.zM,dlpEnabled:i.zM,docsDisabled:i.zM},f={...h,dlpConfiguration:p,allowedApplicationsEnabled:i.zM,allowedDomainsEnabled:i.zM,edcEnabled:i.zM,userEditingEnabled:i.zM,clientControlsEnabled:i.zM,docsDisabledLocked:i.zM};i.qO(h);const g=i.qO(f),m=class e extends a.K.Base{constructor(t,n,i){super(),this._url=t,this._ajaxFactory=n,this._fingerprints=i,this._ajax=this._ajaxFactory({requestExtender:s.UV.toHeaderAppender(this._fingerprints)}),this._removeInvalidClientsAndValidateConfig=t=>(0,r.pipe)(t,this._ajax.map((e=>(Array.isArray(null==e?void 0:e.clients)&&(e.clients=e.clients.filter((e=>c.is(e.client)))),e))),this._ajax.chain((t=>this._ajax.fromEither((0,r.pipe)(e.ReadConfigIOType.decode(t),o.mapLeft((e=>new u.dj.ParseError("json parse error",e))))))))}static getDefaultUrl(e){return`https://goldengate${e}/client-controls`}getConfig(){const e=u.tM.get(this._url);return(0,r.pipe)(this._ajax.json(e),this._removeInvalidClientsAndValidateConfig)}updateConfig(e){const t=u.tM.put(this._url).json(e);return this._ajax.empty(t)}};m.targetTag="clientControls";let _=m;var v;(v=_||(_={})).ReadConfigIOType=g,v.isClient=c.is,v.isReason=l.is},47961:(e,t,n)=>{"use strict";n.d(t,{OA:()=>r});var r,i,o,a=n(58889),s=n(87485),u=n(63336),c=n(96797),l=n(83308),d=n(22835),p=n(86562),h=n(42291),f=n(5574),g=n(22496);function m(e){return"null"===e||"undefined"===e||null==e}function _(e){if(null===e||"null"===e||"boolean"==typeof e)return null;const t=Number(e);return Number.isNaN(t)?null:t}function v(e){return m(e)?null:"true"===e||"false"!==e&&"0"!==e&&Boolean(e)}function y(e){try{return JSON.parse(decodeURIComponent(e))}catch(e){return null}}function b(e){try{return new Set(y(e))}catch(e){return null}}function C(e){try{return Object.entries(y(e)).reduce(((e,[t,n])=>(e.set(t,n),e)),new Map)}catch(e){return null}}class S{constructor(e){this._value=e}getStr(){return m(this._value)?null:String(this._value)}getNum(){return _(this._value)}getBool(){return v(this._value)}getBoolOrDefault(e){return function(e,t){return m(e)?t:"true"===e||"false"!==e&&"0"!==e&&Boolean(e)}(this._value,e)}getObject(){return y(this._value)}getArray(){return y(this._value)}getSet(){return b(this._value)}getMap(){return C(this._value)}getObjProp(e){var t;return"object"==typeof this._value&&(null==(t=this._value)?void 0:t.hasOwnProperty(e))?this._value[e]:null}}(i=r||(r={})).find=function(e,...t){const n=t.find((t=>t.has(e)));return new S(n&&n[e])},i.of=function(...e){const t=new E;for(const r of e)for(const e in r){const i=r[e];t[e]="object"==typeof(n=i)?(0,u.pipe)(JSON.stringify(n,((e,t)=>t instanceof Set?Array.from(t):t instanceof Map?d.PW(t):t)),encodeURI):n}var n;return t},i.is=function(e){return e instanceof E};class E{getStr(e){return this.hasOwnProperty(e)?String(this[e]):null}getNum(e){return this.hasOwnProperty(e)?_(this[e]):null}getBool(e){return this.hasOwnProperty(e)?v(this[e]):null}getObject(e){return this.hasOwnProperty(e)?y(this[e]):null}getSet(e){return this.hasOwnProperty(e)?b(this[e]):null}getMap(e){return this.hasOwnProperty(e)?C(this[e]):null}has(e){return this.hasOwnProperty(e)}ifPresent(e,t){this[e]&&t(this[e])}entries(){return Object.keys(this).map((e=>[e,new S(this[e])]))}static find(e,...t){const n=t.find((t=>t.has(e)));return new S(n&&n[e])}}class T extends p.eo{constructor(e,t){super(e),this.message=e,this.details=t,this.name="DapiPropertiesSerializationError"}toString(){return`DAPI properties serialization error\n      Message ${this.message}\n      Details ${l.V2(this.details)}`}}function O(e){return o.fromProperties(e).decode(e)}function w(e){return new T("Serialization failed",e)}(e=>{const t=["{","}",";","="];e.property=new c.ZU("property",(function(e){return!0}),(function(e,n){const r=n[1].key,i=String(e);return i.length>1024?c.V2(e,n,`Property ${r} is too long (max length is 1024)`):t.some((e=>i.indexOf(e)>=0))?c.V2(e,n,`Property ${r} has forbidden characters (${t.join(", ")})`):c.kX(e)}),c.D_),e.fromProperties=function(t){return c.NW((0,u.pipe)(t,s.pb((e=>"function"!=typeof e)),s.Tj((t=>e.property))))}})(o||(o={}));(class extends h.K.Base{constructor(e,t,n){super(),this._fingerprints=n,this._endpoints={props:"props/v2",mimic:"mimic"},this._url=f.tM.join(e,"api"),this._ajax=t({requestExtender:g.UV.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(e){return`https://data${e}`}load(){return(0,u.pipe)(this._ajax.json(f.tM.get(this._url,this._endpoints.props)),this._ajax.map(r.of))}get(e){return(0,u.pipe)(this._ajax.text(f.tM.get(this._url,this._endpoints.props,e)),this._ajax.map((t=>r.of({[e]:t||null}))))}save(e,t){return(0,u.pipe)(e,O,a.mapLeft(w),a.fold(this._ajax.throwError,this._ajax.of),this._ajax.map((e=>(0,u.pipe)(f.tM.post(this._url,this._endpoints.props).json(e),(null==t?void 0:t.keepalive)?e=>e.keepalive():c.D_))),this._ajax.chain(this._ajax.empty))}getMimic(e){return this._ajax.json(f.tM.get(this._url,this._endpoints.mimic).cookie("gnar_containerId",e))}getMimicWithProps(e){return(0,u.pipe)(this._ajax.json(f.tM.get(this._url,this._endpoints.mimic,"withProps").cookie("gnar_containerId",e)),this._ajax.map((({groups:e,properties:t})=>({experiments:new Set(e),properties:r.of(t)}))))}}).targetTag="dapi"},95074:(e,t,n)=>{"use strict";n.d(t,{R1:()=>j,Fy:()=>R,hB:()=>a,Jo:()=>w});var r=n(86562),i=n(5574);const o=4194304;var a;(e=>{var t;(t=e.HttpCodes||(e.HttpCodes={}))[t.NOT_FOUND=404]="NOT_FOUND",t[t.UNAUTHORIZED=401]="UNAUTHORIZED",t[t.BAD_REQUEST=400]="BAD_REQUEST",t[t.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS";class n extends i.Hl{constructor(e,t="too_big",n="Document is too big",r){super({code:400,message:n,url:r,status:t}),this.maxSizeLimit=e,this.name="FileSizeOutOfRangeError"}}e.FileSizeOutOfRangeError=n;class a extends i.Hl{constructor(e="empty_file",t="Document is empty",n){super({code:400,message:t,url:n,status:e}),this.name="EmptyFileError"}}e.EmptyFileError=a;class s extends i.Hl{constructor(e="not_found",t="Document doesn't exist",n){super({code:404,message:t,url:n,status:e}),this.name="DocumentNotFoundError"}}e.DocumentNotFoundError=s;class u extends i.Hl{constructor(e="error",t="user not found",n){super({code:401,message:t,url:n,status:e}),this.name="UnauthorizedError"}}e.UnauthorizedError=u;class c extends i.Hl{constructor(e,t="bad_type",n="Unsupported file type",r){super({code:400,message:n,url:r,status:t}),this.originalFilename=e,this.name="UnsupportedFileTypeError"}}e.UnsupportedFileTypeError=c;class l extends i.Hl{constructor(e="error",t="Document with tracked changes is not supported",n){super({code:400,message:t,url:n,status:e}),this.name="TrackedChangesIsUnsupported"}}e.TrackedChangesIsUnsupported=l;class d extends i.Hl{constructor(e,t="error",n="Text extracion failed",r){super({code:400,message:n,url:r,status:t}),this.originalFilename=e,this.name="TextExtractionError"}}e.TextExtractionError=d;class p extends i.Hl{constructor(e="error",t="Too many requests",n){super({code:429,message:t,url:n,status:e}),this.name="TooManyRequestsError"}}e.TooManyRequestsError=p;class h extends i.Hl{constructor(e,t=0,n="connect_error",r="Cannot connect"){super({code:t,message:r,url:e,status:n}),this.name="ConnectionError"}}e.ConnectionError=h,e.doxErrorMapper=function(e,t,c){let d={};try{d=JSON.parse(e)}catch(e){d=(0,r.Cb)(e)?{info:"unknown",status:e.message}:{info:"unknown",status:""}}switch(d.info){case"too_big":return new n(o,d.status,d.info,t.url);case"empty_file":return new a(d.status,d.info,t.url);case"document not found":return new s(d.status,d.info,t.url);case"user not found":return new u(d.status,d.info,t.url);case"tracked":return new l(d.status,d.info,t.url);case"too many requests":return new p(d.status,d.info,t.url);default:return i.dj.mapToHTTPError(e,t,c)}}})(a||(a={}));var s=n(63336),u=n(34717),c=n(58889),l=n(44297),d=n(22835),p=n(96797),h=n(23121),f=n(58193),g=n(36840),m=n(47370),_=n(54708),v=n(30040),y=n(83308),b=n(69063);const C=l.getEq({equals:(e,t)=>e===t}),S=m.ee(g._3);var E,T,O,w;function I(e){if(!e)return"general";const[t]=e.split("_");switch(t){case"academic":return"academic";case"business":return"business";case"technical":case"medical":return"mail";case"creative":return"creative";case"casual":return"casual";default:return"general"}}function x(e){switch(e){case"general":return"general";case"academic":return"academic_general";case"business":return"business_other";case"mail":return"technical_other";case"creative":return"creative_other";case"casual":return"casual_other";default:return e}}function P(e){return E.fromDomain(I(e))}(e=>{let t;var n;(n=t=e.OutcomeContext||(e.OutcomeContext={})).eq=m.OW({type:m.kK,citation:m.kK}),n.defaultAcademic={citation:"apa",type:"essay"},n.withCitationStyle=e=>t=>({...t,domain:l.some("academic"),outcomeContext:l.some({...n.defaultAcademic,citation:e})}),e.eq=m.OW({domain:l.getEq(m.w_),goals:l.getEq(S),audience:C,style:C,outcomeContext:l.getEq(t.eq)}),(e.Default||(e.Default={})).eq=m.OW({domain:m.w_,goals:S,audience:m.kK,style:m.kK}),e.goals=_.n(["inform","describe","convince","tellStory","sell"]),e.goalsLabels=["Inform","Describe","Convince","Tell A Story"],e.audiences=_.n(["general","knowledgeable","expert"]),e.formalityLevels=_.n(["informal","neutral","formal"]),e.tone=_.n(["neutral","confident","joyful","optimistic","friendly","urgent","analytical","respectful"]),e.domains=_.n(["academic","business","general","mail","casual","creative"]),e.dialects=_.n(["american","british","canadian","australian","indian"]),e.writingIntents=_.n(["DEFAULT","ASSIGNMENT_WRITING"]),e.academicTypes=_.n(["essay","report","other"]),e.citation=_.n(["apa","mla","chicago","other"]),e.fromDomain=function(t){return{...e.unset,domain:l.some(t)}},e.fromGoals=function(t){return{...e.unset,goals:l.some(new Set(t))}},e.unset={goals:l.none,domain:l.none,audience:l.none,style:l.none,dialect:l.none,outcomeContext:l.none,writingIntent:l.none},e.defaultContextFallback={goals:new Set,domain:"general",audience:"knowledgeable",style:"neutral",dialect:l.none,writingIntent:l.none},e.isStyleValidWithDomain=function(e,t){return"neutral"===t||("formal"===t?"creative"!==e&&"casual"!==e:"academic"!==e)};const r=_.Type.literalUnion("goal",e.goals),i=_.Type.set(r),o=_.Type.literalUnion("audience",e.audiences),a=_.Type.literalUnion("formality",e.formalityLevels);_.Type.literalUnion("tone",e.tone);const u=_.Type.literalUnion("domain",e.domains),d=_.Type.literalUnion("dialect",e.dialects),h=_.Type.literalUnion("writingIntent",e.writingIntents),f=_.Type.literalUnion("academicType",e.academicTypes);e.citationType=_.Type.literalUnion("citation",e.citation);const g=p.qO({type:f,citation:e.citationType});e.IOType=p.qO({goals:_.Type.option(i),domain:_.Type.option(u),audience:_.Type.option(o),style:_.Type.option(a),dialect:_.Type.option(d),writingIntent:_.Type.option(h),outcomeContext:_.Type.option(g)}),e.IOTypeDefault=p.qO({goals:i,domain:u,audience:o,style:a,dialect:_.Type.option(d),writingIntent:_.Type.option(h)}),e.tryParse=e=>t=>(0,s.pipe)(e(t),c.mapLeft(y.V2),c.mapLeft((e=>(b.Bx.Logging.getLogger("coreclients.dox.context").warn("failed to parse document context",e),e)))),e.parse=(0,v.flow)(l.fromNullable,l.chain((t=>(0,s.pipe)(t,(0,e.tryParse)(e.IOType.decode),l.fromEither)))),e.parseDefault=(0,v.flow)(l.fromNullable,l.chain((0,v.flow)((0,e.tryParse)((t=>e.IOTypeDefault.decode(t))),l.fromEither))),e.serialize=function(t){return e.IOType.encode(t)},e.serializeDefault=function(t){return e.IOTypeDefault.encode(t)}})(E||(E={})),(e=>{e.update=function(e,t){return{checks:e.checks,extraSettings:a.merge(e.extraSettings,t.extraSettings),genre:(0,s.pipe)(l.fromNullable(t.genre),f.NW(e.genre)),context:(0,s.pipe)(l.fromNullable(t.context),f.NW(e.context))}},e.contextOrGenre=function(e){return(0,s.pipe)(e.context,f.NW((0,s.pipe)(e.genre,l.map(P))),l.getOrElse((()=>E.unset)))},e.empty={checks:l.none,genre:l.none,context:l.none,extraSettings:l.none};class t{constructor(e){this._settings=e}static fromJSON(n){return new t(function(t){return t?(0,s.pipe)(h.zb((()=>{return{checks:l.fromNullable(y(t.apps)),genre:l.fromNullable(t.genre),context:E.parse(t.context),extraSettings:(e=t.extraSettings,e?(0,s.pipe)(o.decode(e),l.fromEither):l.none)};var e})),c.getOrElse((()=>e.empty))):e.empty}(n))}get genre(){return(0,s.pipe)(this._settings.genre,l.alt((()=>(0,s.pipe)(this._settings.context,l.chain((e=>e.domain)),l.map(x)))))}changeGenre(e){const t={genre:l.some(e)};return(0,s.pipe)(this._settings.context,l.fold(g.Yi,(()=>{t.context=l.some(E.fromDomain(I(e)))}))),this._update(t)}get checks(){return this._settings.checks}changeChecks(e){const t={checks:l.some(e)};return this._update(t)}get context(){return(0,s.pipe)(this._settings.context,l.alt((()=>(0,s.pipe)(this._settings.genre,l.map(P)))))}changeContext(e){const t={context:l.some(e)};return(0,s.pipe)(this._settings.genre,l.fold(g.Yi,(()=>{t.genre=(0,s.pipe)(e.domain,l.map(x))}))),this._update(t)}get extraSettings(){return this._settings.extraSettings}changeExtra(e){const t={extraSettings:l.some(e)};return this._update(t)}toJSON(){return function({checks:e,genre:t,context:n,extraSettings:r}){return{apps:(0,s.pipe)(e,l.map(v),l.toUndefined),genre:(0,s.pipe)(t,l.toUndefined),context:(0,s.pipe)(n,l.map(E.serialize),l.toUndefined),extraSettings:(0,s.pipe)(r,l.map(o.encode),l.toUndefined)}}(this._settings)}_update(e){return new t({...this._settings,...e})}}let n;var r;let i;e.Holder=t,((r=n=e.Template||(e.Template={})).Kind||(r.Kind={})).draft_ai="draft_ai",(e=>{let t;var n,r;(e.Kind||(e.Kind={})).students="students",(r=(n=t=e.Students||(e.Students={})).TextGrade||(n.TextGrade={})).excellent="excellent",r.okay="okay",r.notGreat="notGreat",(n.Grade||(n.Grade={})).eq=m.ee(((e,t)=>Array.isArray(e)&&Array.isArray(t)&&e[0]===t[0]&&e[1]===t[1]||e===t)),e.outcomesType=p.qO({kind:p.eu("students"),grade:_.Type.option(p.KC([p.PV([p.ai,p.ai]),_.Type.createStringEnum(t.TextGrade,"textGrades")])),askedTimestamp:_.Type.option(p.ai),rejected:p.zM})})(i=e.Outcomes||(e.Outcomes={}));const o=p.qO({checkedPlagiarism:_.Type.withDefault(p.zM,!1),template:_.Type.option(p.qO({kind:_.Type.createStringEnum(n.Kind,"templateName"),state:p.L5})),outcomes:_.Type.option(i.outcomesType)});let a;var u;function v(e){return e?{ContextualSpelling:{active:e.contextualSpelling},Enhancement:{active:e.enhancement},Grammar:{active:e.grammar},Plagiarism:{active:e.plagiarism},Punctuation:{active:e.punctuation},SentenceStructure:{active:e.sentenceStructure},Style:{active:e.style}}:null}function y(e){return e&&function(e){return!!e&&![e.ContextualSpelling,e.Enhancement,e.Grammar,e.Plagiarism,e.Punctuation,e.SentenceStructure,e.Style].map((e=>e&&"object"==typeof e&&"boolean"==typeof e.active)).some((e=>!e))}(e)?{contextualSpelling:e.ContextualSpelling.active,grammar:e.Grammar.active,sentenceStructure:e.SentenceStructure.active,punctuation:e.Punctuation.active,style:e.Style.active,enhancement:e.Enhancement.active,plagiarism:e.Plagiarism.active}:null}(u=a=e.Extra||(e.Extra={})).empty={checkedPlagiarism:!1,template:l.none,outcomes:l.none},u.merge=function(e,t){return(0,s.pipe)(e,l.map((e=>t?d.yo(e,t):e)),f.NW(l.fromNullable(t)))},e.fromCheckingSettings=v,e.toCheckingSettings=y})(T||(T={})),(e=>{let t;var n,r,i,o,a;function c(e){return-1!==Object.values(t).indexOf(e)?e:"unknown"}(n=t=e.JobStatus||(e.JobStatus={})).newJob="New",n.building="Building",n.cancelled="Cancelled",n.completed="Completed",n.duplicate="duplicate",n.emptyDocument="emptyDocument",n.paymentError="paymentError",n.complexInternalStructure="complexInternalStructure",n.forbidden="Proofit is forbidden",n.unknown="unknown",(r=e.QuotationType||(e.QuotationType={})).Single="Single",r.Double="Double",(i=e.SpaceType||(e.SpaceType={})).Single="Single",i.Double="Double",(o=e.PlanStatus||(e.PlanStatus={})).Success="success",o.Forbidden="Proofit is forbidden",e.CreditsSchema=p.tB(p.NW({canBeUsed:p.zM,balance:p.ai,maxWordsPerCredit:p.ai})),(a=e.StatisticsStatus||(e.StatisticsStatus={})).Success="success",a.Forbidden="Proofit is forbidden",e.stringToJobStatus=c,e.parseResult=function(e){return(0,s.pipe)([u.Local.parseDate(e.submitted),u.Local.parseDate(e.due)],h.fP(((t,n)=>({submitted:t,corrections:e.corrections?e.corrections:0,due:n,price:e.price?e.price:0,name:e.name?e.name:"",completed:l.fromEither(u.Local.parseDate(e.completed)),id:e.id?e.id:0,status:c(e.status),is_dox_applied:e.is_dox_applied}))))},e.fromRaw=(0,v.flow)(l.fromNullable,l.chain((0,v.flow)(e.parseResult,l.fromEither)));const d={corrections:null,price:null,submitted:"2018-08-09 12:06:29",due:"2018-08-10 12:06:29",name:"proofit-document-1474459282219.docx",completed:null,id:15696089,status:"New",is_dox_applied:!0};e.mockResult=function(e){return{...d,...e}}})(O||(O={}));class R{constructor(e){if(this._delta={},!e||!e.id)throw new Error("document is undefined or doesn't have ID");this._original=Object.assign({},e,{id:String(e.id)}),this._settings=T.Holder.fromJSON(e.extra_params),this._proofit=O.fromRaw(e.proofit)}get id(){return this._original.id}get title(){return this._delta.title?this._delta.title:this._original.title?this._original.title:""}set title(e){this._delta.title=e}get firstContent(){return this._original.first_content?this._original.first_content:""}get content(){return this._original.content?this._original.content:""}get revision(){return this._original.vsn?this._original.vsn:0}get originalFilename(){return this._original.orig_filename}get createdAt(){return(0,s.pipe)(u.Local.parseDate(this._original.created_at),c.getOrElse((()=>null)))}get updatedAt(){return(0,s.pipe)(u.Local.parseDate(this._original.updated_at),c.getOrElse((()=>null)))}get errors(){return this._delta.errors?this._delta.errors:this._original.errors?this._original.errors:0}set errors(e){this._delta.errors=e}get size(){return this._original.size?this._original.size:0}get settings(){return this._getSettingsHolder}get genre(){return l.toNullable(this.settings.genre)}setGenre(e){this._deltaSettings=this._getSettingsHolder.changeGenre(e)}get checks(){return l.toNullable(this.settings.checks)}setChecks(e){this._deltaSettings=this._getSettingsHolder.changeChecks(e)}get context(){return this.settings.context}setContext(e){this._deltaSettings=this._getSettingsHolder.changeContext(e)}get proofit(){return l.toNullable(this._proofit)}resetProofit(){this._proofit=l.none}_isDirty(){var e;return Object.getOwnPropertyNames(null!=(e=this._delta)?e:{}).length>0||void 0!==this._deltaSettings}_popChanges(){const e=this._getDeltaRawDocument(this._delta,this._deltaSettings);return e.id=this._original.id.toString(),e}_getDeltaRawDocument(e,t){if(t){const n=t.toJSON();return d.yo(e,{extra_params:n})}return Object.assign({},e)}_applyChanges(e){this._original=Object.assign({},e,{id:String(e.id)}),e.extra_params&&(this._settings=T.Holder.fromJSON(e.extra_params)),e.proofit&&(this._proofit=O.fromRaw(e.proofit)),this._deltaSettings=void 0,this._delta={}}get _getSettingsHolder(){return void 0!==this._deltaSettings?this._deltaSettings:this._settings}}(e=>{var t;(t=e.UploadFileMode||(e.UploadFileMode={})).rtf="rtf",t.plain="plain";const n=class e{constructor(e){this._httpRequest=e}static text(e,t){return this.textFull({...e?{doc:{ops:[{insert:e}]}}:{},title:t})}static textFull(t){return new e(i.tM.create().json(Object.keys(t).length>0?t:void 0))}static file(t,n){const r=i.tM.create();if(!t)throw new TypeError("File was not provided");if(!t.name)throw new TypeError("Empty filename passed to file() function");if(!t.size)throw new TypeError("File size wasn't provided");if(t.size>o)throw new a.FileSizeOutOfRangeError(o);const s=(t.name.split("\\").pop()||"").split("/").pop();if(!s)throw new a.UnsupportedFileTypeError(t.name);if(!s.match(e.supportedExtensionsRE))throw new a.UnsupportedFileTypeError(s);return r.multipartFormData("source_file",t),r.queryParam("enableRTF","rtf"===n?"true":"false"),new e(r)}_getHttpRequestBuilder(){return this._httpRequest}};n.supportedExtensions=["doc","docx","odt","rtf","txt","htm","html"],n.supportedExtensionsRE=new RegExp("\\.("+n.supportedExtensions.join("|")+")$","i");let r=n;e.Create=r;class s{constructor(e){this._str=e}static contains(e){return new s(e)}static all(){return new s("")}toSearchString(){return this._str}}e.Search=s})(w||(w={}));var N=n(42291),k=n(22496);const M=class e extends N.K.Base{constructor(e,t,n,r="web"){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._clientType=r,this._headersAppender=(0,k.kS)({"X-API-Version":"2","X-Client-Type":()=>this._clientType}),this._ajax=this._ajaxFactory({requestExtender:i.tM.Extender.compose(k.UV.toHeaderAppender(this._fingerprints),this._headersAppender),errorMapper:a.doxErrorMapper})}static getDefaultUrl(e){return`https://dox${e}`}set clientType(e){this._clientType=e}listDocuments(t=e.unlimited,n=e.OrderBy.Any,r=!1,i=e.DocumentFilter.all,o,a){return this._queryDocuments(w.Search.all(),t,n,r,i,o,a)}searchDocument(t,n=e.unlimited,r=e.OrderBy.Any,i=e.DocumentFilter.all){return this._queryDocuments(t,n,r,!1,i)}listDeleted(t=e.unlimited,n=e.OrderBy.Any,r,i){return this._queryDocuments(w.Search.all(),t,n,!1,e.DocumentFilter.trash,r,i)}getDocumentsCount(t=e.DocumentFilter.all){const n=i.tM.get(this._url,"/documents").queryParam("filterDocs",t).queryParam("onlyCnt","true");return this._ajax.json(n)}createDocument(e){const t=e._getHttpRequestBuilder().url(this._url,"/documents").method(i.Kd.Method.POST);return(0,s.pipe)(this._ajax.json(t),this._ajax.map((e=>new R(e))))}downloadOriginal(e,t=!1){const n=i.tM.join(this._url,"/documents",encodeURIComponent(e),"download")+(t?"":"?no_tracking");return this._ajax.file(i.tM.get(n))}downloadInFormat(e,t,n=!1){let r=i.tM.get(this._url,"/documents",encodeURIComponent(e),"download").queryParam("format",t);return n||(r=r.queryParam("no_tracking","true")),"docx"===t&&(r=r.queryParam("enableRTF","true")),this._ajax.file(r)}url(){return this._url}downloadProofread(e,t=!1){const n=i.tM.get(this._url).pathParam("documents").pathParam(e).pathParam("proofread"),r=t?n.queryParam("includeDeleted","true"):n;return this._ajax.file(r)}downloadAll(){const e=i.tM.post(this._url).pathParam("documents").pathParam("downloadAll");return this._ajax.file(e)}deleteDocumentById(e){const t=i.tM.del(this._url,"/documents").pathParam(e);return this._ajax.empty(t)}restoreDocumentById(e){const t=i.tM.post(this._url,"/documents",encodeURIComponent(e),"restore");return this._ajax.empty(t)}forceDelete(e){const t=i.tM.del(this._url,"/documents").pathParam(e).queryParam("forceDelete","true");return this._ajax.empty(t)}emptyBin(){const e=i.tM.del(this._url,"/documents/deleted");return this._ajax.empty(e)}generateReport(e,t,{headerTemplate:n,footerTemplate:r,format:o,width:a,height:s,marginTop:u,marginRight:c,marginBottom:l,marginLeft:d}){const p=i.tM.join(this._url,"/documents",encodeURIComponent(e),"report");return this._ajax.file(i.tM.post(p).json({html:t,header_template:n,footer_template:r,format:o,width:a,height:s,margin_top:u,margin_right:c,margin_bottom:l,margin_left:d}))}extractPlainText(e){const t=i.tM.post(this._url,"/docproc/extract").multipartFormData("source_file",e);return(0,s.pipe)(this._ajax.json(t),this._ajax.filterOrElse((e=>"error"!==e.status),(()=>new a.TextExtractionError(e.name))),this._ajax.map((e=>e.text)))}_queryDocuments(t,n=e.unlimited,r=e.OrderBy.Any,o=!1,a=e.DocumentFilter.all,u,c){const l=i.tM.get(this._url,"/documents").queryParam("search",t.toSearchString()).queryParam("limit",String(n)).queryParam("firstCall",String(o)).queryParam("filterDocs",a);return u&&l.queryParam("updatedAtLessThan",String(u)),c&&l.queryParam("updatedAtMoreThan",String(c)),(0,s.pipe)(this._ajax.json(l),this._ajax.map((e=>e.map((e=>new R(e))))))}};M.targetTag="dox",M.unlimited=0;let j=M;var A,D,L,U,H,B;(D=(A=j||(j={})).OrderBy||(A.OrderBy={}))[D.Updated=0]="Updated",D[D.Created=1]="Created",D[D.Any=2]="Any",(L=A.DocumentFilter||(A.DocumentFilter={})).all="not_deleted",L.trash="deleted",L.proofread="not_deleted,proofreading_completed",(H=U||(U={})).isChange=function(e){return"change"===e.kind},H.isCmd=function(e){return"cmd"===e.kind},H.isMeta=function(e){return"meta"===e.kind},(e=>{class t{constructor(e){this.id=e}}e.Base=t,e.PatchMessage=class extends t{constructor(e,t,n,r,i,o){super(e),this.id=e,this.cl=t,this.rev=n,this.doc_len=r,this.deltas=i,this.revAfterApply=o,this.op="patch"}},e.VersionMessage=class extends t{constructor(e,t){super(e),this.id=e,this.vsn=t,this.op="vsn"}},e.UpdateDocumentMetadata=class extends t{constructor(e,t,n,r){super(e),this.id=e,this.title=t,this.errors=n,this.extra_params=r,this.op="update_document_metadata"}},e.ProofitOptionsMessage=class extends t{constructor(e){super(e),this.id=e,this.op="proofit_turnaround_options"}},e.ProofitPlaceOrderMessage=class extends t{constructor(e,t,n,r,i,o=!1){super(e),this.id=e,this.turnaround=t,this.clarity=n,this.userInputs=r,this.priceOfferId=i,this.payWithCredits=o,this.op="proofit_create_job"}},e.ProofitPlacePaymentOrderMessage=class extends t{constructor(e,t,n,r,i,o=!1,a,s){super(e),this.id=e,this.turnaround=t,this.clarity=n,this.userInputs=r,this.priceOfferId=i,this.payWithCredits=o,this.nonce=a,this.billingZip=s,this.op="proofit_create_job"}},e.ProofitStatisticsMessage=class extends t{constructor(e){super(e),this.id=e,this.op="proofit_statistics"}},e.TokenResponse=class extends t{constructor(e,t){super(e),this.id=e,this.token=t,this.op="token_response"}}})(B||(B={}))},1795:(e,t,n)=>{"use strict";n.d(t,{X9:()=>V});var r=n(63336),i=n(96797),o=n(44297),a=n(58193),s=n(54708),u=n(42291),c=n(22496),l=n(5574);const d=i.E$([i.qO({ssoEnabled:i.zM,ssoActivated:i.zM}),i.OH({ssoId:i.Yj})]),p=i.KC([i.eu("EDU"),i.eu("GOV"),i.eu("NGO"),i.eu("BUSINESS"),i.eu("K12")]),h=s.Type.option(i.Yj),f=i.E$([i.NW({name:i.Yj,id:i.ai,docsDisabled:i.zM,onboardingType:i.KC([i.eu("SELF_SERVE"),i.eu("MANAGED")]),voxEnabled:i.zM,brandTonesEnabled:i.zM,multipleStyleGuidesEnabled:i.zM,groupRolesEnabled:i.zM,personalDictionaryDisabled:i.zM,personalSnippetsDisabled:i.zM,proFlowEnabled:i.zM,branding:h,createdAt:s.Type.date()}),i.OH({ssoSettings:d,organizationType:p,featurePackageType:s.Type.literalUnion("featurePackageType",s.n(["ENTERPRISE","EDU_GROUP","EDU_INSTITUTION","NGO","PRO","TEAM"]))})]),g=i.E$([i.NW({name:i.Yj,email:i.Yj}),i.KC([i.NW({state:i.eu("Success"),uid:i.ai,stateDateTime:s.Type.date(),isAdmin:i.zM,isAccountOwner:i.zM}),i.OH({uid:i.ai,stateDateTime:s.Type.date(),isAdmin:i.zM,state:i.KC([i.eu("Invited"),i.eu("Removed"),i.eu("Pending"),i.eu("Removing"),i.eu("error")])})])]),m=i.E$([i.NW({institution:f,user:g}),i.OH({invitee:i.NW({institution:f,user:g})})]);i.E$([i.NW({lastName:i.Yj,email:i.Yj,institutionName:i.Yj,fte:i.ai}),i.OH({firstName:i.Yj,phone:i.Yj,interest:i.Yj,notes:i.Yj,source:i.Yj,utmSource:i.Yj,title:i.Yj,payPalToken:i.Yj,billingCountryCode:i.Yj,billingRegionCode:i.Yj,billingZip:i.Yj,nonce:i.Yj,sessionId:i.Yj,purchasingRole:i.Yj,country:i.Yj,institutionType:i.Yj})]),i.qO({email:i.Yj,newAdminName:i.Yj,oldAdminName:i.Yj,institutionName:i.Yj}),i.qO({assigned:i.zM});const _=i.qO({institutionName:i.Yj}),v=i.E$([i.NW({email:i.Yj,name:i.Yj,institutionName:i.Yj,institutionId:i.ai,isRegistered:i.zM,isPremium:i.zM,proFlowEnabled:i.zM,branding:h}),i.OH({organizationType:p})]),y=i.qO({isValid:i.zM}),b=i.qO({isNgo:i.zM}),C=i.qO({companyName:i.Yj,logoUrl:s.Type.option(i.Yj)}),S=i.E$([i.qO({institutionId:i.ai,institutionName:i.Yj,key:i.Yj,state:s.Type.literalUnion("state",s.n(["ACTIVE","INACTIVE","INVALID"])),invalidReason:s.Type.option(i.Yj),domains:i.YO(i.Yj),proFlowEnabled:i.zM,branding:h}),i.OH({organizationType:p})]),E=i.qO({institutions:i.YO(i.NW({id:i.ai,institutionName:i.Yj,logoUrl:s.Type.option(i.Yj),userCount:i.ai,requestState:s.Type.option(s.Type.literalUnion("requestState",s.n(["PENDING","APPROVED","REJECTED","EXPIRED"]))),adminNames:i.YO(i.Yj),memberInitials:i.YO(i.Yj),teamDiscoveryMethod:i.Yj}))}),T=i.NW({result:i.KC([i.eu("AUTOJOIN_SUCCESS"),i.eu("AUTOJOIN_FAILED"),i.eu("REQUEST_TO_JOIN_SUCCESS"),i.eu("REQUEST_TO_JOIN_FAILED")])}),O=i.NW({requestorName:i.Yj,requestorEmail:i.Yj,requestedAt:s.Type.date(),expiredAt:s.Type.date(),state:s.Type.literalUnion("requestState",s.n(["PENDING","APPROVED","REJECTED","EXPIRED"]))}),w=i.qO({total:i.ai,data:i.YO(O)});i.YO(i.qO({email:i.Yj,action:i.Yj})),i.YO(i.qO({email:i.Yj,name:i.Yj}));const I=i.qO({failedEmails:i.YO(i.Yj)}),x=i.qO({total:i.ai,approved:i.ai,denied:i.ai,errors:i.ai,errorDetails:i.YO(i.NW({email:i.Yj,result:s.Type.literalUnion("action",s.n(["APPROVED","APPROVED_NOOP","DENIED","DENIED_NOOP","ERROR"])),reason:i.Yj}))}),P=i.qO({email:i.Yj,action:s.Type.literalUnion("action",s.n(["APPROVED","APPROVED_NOOP","DENIED","DENIED_NOOP"]))}),R=i.qO({email:i.Yj,action:s.Type.literalUnion("result",s.n(["APPROVED","APPROVED_NOOP","DENIED","DENIED_NOOP","ERROR"]))}),N=i.qO({count:i.ai}),k=i.qO({incentives:i.YO(i.NW({action:s.Type.literalUnion("action",s.n(["ACCEPT_SUGGESTION","ADD_MEMBER","INSTALL_EXT","SETUP_TRF"])),rewardDays:i.ai,earned:i.zM})),maximumRewardDays:i.ai,daysEarned:i.ai}),M=i.qO({isEligible:i.zM,nextTrueUpBillingDate:s.Type.option(s.Type.date()),overageSeats:i.ai,maxOverageSeats:i.ai,maxSeats:i.ai,chargePreview:i.ai,renewalChargeWithNewSeats:i.ai}),j=i.qO({email:i.Yj,name:s.Type.option(i.Yj)}),A=i.KC([i.qO({success:i.eu(!0)}),i.qO({success:i.eu(!1),reason:i.Yj,userId:i.ai})]),D=i.qO({name:i.Yj,description:i.Yj,noOfUsers:i.ai,customRoleId:s.Type.option(i.ai)}),L=i.YO(D),U=i.qO({name:i.Yj,id:i.ai}),H=i.qO({permissionGroup:i.Yj,permissionGroupDescription:i.Yj,permissions:i.YO(U)}),B=i.qO({groupedPermissions:i.YO(H)}),G=i.E$([B,D]),q=i.YO(G);i.qO({name:i.Yj,description:i.Yj,permissionIds:i.YO(i.ai)});const Y=i.qO({id:i.ai}),F=i.qO({id:i.ai,name:s.Type.option(i.Yj),email:i.Yj}),W=i.YO(F),z=class extends u.K.Base{constructor(e,t,n){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({requestExtender:c.UV.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(e){return`https://goldengate${e}/institution/api`}getInstitutionUser(e){const t=l.tM.get(this._url,"institution/user");return e&&t.queryParams(e),this._ajax.json(t,m)}confirmUser(e){const t=l.tM.post(this._url,"institution/confirm_user"),n=(0,r.pipe)(e,o.fold((()=>t),(e=>t.cookie("invite_key",e))));return this._ajax.empty(n)}assignToInstitutionByDomain(){const e=l.tM.post(this._url,"institution/assign_to_institution_by_domain");return this._ajax.empty(e)}addToInstitution(e){const t=l.tM.post(this._url,"institution/add_to_inst").json({accessCode:e});return(0,r.pipe)(this._ajax.json(t,_))}updateInstitutionLogo(e){const t=l.tM.put(this._url,"institution/logo").multipartFormData("file",e,"image.png");return this._ajax.empty(t)}getInstitutionLogo(){const e=l.tM.get(this._url,"institution/logo");return this._ajax.json(e,C)}addToInstitutionByInviteLink(e){const t=l.tM.post(this._url,"institution/add_to_inst_by_invite_link").json({inviteLinkKey:e});return(0,r.pipe)(this._ajax.json(t,_))}getInvitationInfo(e){const t=l.tM.get(this._url,"institution/invitation_info"),n=(0,r.pipe)(e,o.fold((()=>t),(e=>t.cookie("invite_key",e))));return(0,r.pipe)(this._ajax.json(n,v))}validateNonGenericDomain(e){const t=l.tM.post(this._url,"domain/validation").json({domain:e});return(0,r.pipe)(this._ajax.json(t,y))}validateNgoDomain(e){const t=l.tM.post(this._url,"domain/validation/ngo").json({domain:e});return(0,r.pipe)(this._ajax.json(t,b))}checkClaimed(e){const t=l.tM.post(this._url,"institution/check_claimed").json({email:e});return this._ajax.json(t)}getRoles(){const e=l.tM.get(this._url,"institution/roles");return this._ajax.json(e,L)}getAssignedRole(){const e=l.tM.get(this._url,"institution/roles/user/assigned_role");return this._ajax.json(e,D)}getAssignedPermissions(){const e=l.tM.get(this._url,"institution/permissions/assigned_permissions");return this._ajax.json(e,G)}getPermissions(){const e=l.tM.get(this._url,"institution/permissions");return this._ajax.json(e,B)}getPermissionsForRole(e){const t=l.tM.get(this._url,"institution/permissions/role");return e.forEach((e=>t.queryParam("roleIds",e))),this._ajax.json(t,q)}createCustomRole(e){const t=l.tM.post(this._url,"institution/custom-roles").json(e);return this._ajax.json(t,Y)}updateCustomRole(e,t){const n=l.tM.put(this._url,"institution/custom-roles/role",t).json(e);return this._ajax.json(n,Y)}deleteCustomRole(e){const t=l.tM.del(this._url,"institution/custom-roles","role",e);return this._ajax.empty(t)}getUsersForRole(e,t=0,n=5){const r=l.tM.get(this._url,"institution/custom-roles","role",e,"users").queryParam("offset",t.toString()).queryParam("limit",n.toString());return this._ajax.json(r,W)}setUsersRoles(e){const t=l.tM.post(this._url,"institution/roles/users").json(e);return this._ajax.empty(t)}removeUsersGroupRoles(e){const t=l.tM.del(this._url,"institution/roles/users/group").json(e);return this._ajax.empty(t)}getInviteLinkByKey(e){const t=l.tM.get(this._url,"/institution/invite-link",e);return this._ajax.json(t,S)}getInviteLink(){const e=l.tM.get(this._url,"/institution/invite-link");return this._ajax.json(e,S)}createInviteLink(){const e=l.tM.post(this._url,"/institution/invite-link");return this._ajax.json(e,S)}updateInviteLink(e){const t=l.tM.put(this._url,"/institution/invite-link").json({state:e.state,invalidReason:a.$v(e.invalidReason)});return this._ajax.empty(t)}getJoinRequests(e=0,t,n,r,i,o){const a=l.tM.get(this._url,"/institution/request-to-join").queryParam("offset",String(e));return null!=t&&a.queryParam("limit",String(t)),null!=n&&a.queryParam("order",n),null!=r&&a.queryParam("order_type",r),null!=i&&a.queryParam("search",i),null!=o&&a.queryParam("state",o),this._ajax.json(a,w)}getPossibleInstitutionsToJoin(e){const t=void 0===e?l.tM.get(this._url,"/institution/request-to-join/institutions"):l.tM.post(this._url,"/institution/request-to-join/institutions").json({workEmail:e});return this._ajax.json(t,E)}sendRequestToJoin(e,t,n){const r=l.tM.post(this._url,"/institution/request-to-join").json({institutionId:e,requestorEmail:t,message:n});return this._ajax.json(r,T)}manageRequestToJoin(e){const t=l.tM.post(this._url,"/institution/request-to-join/manage"),n=(0,r.pipe)(e,o.fold((()=>t),(e=>t.cookie("request_to_join_token",e))));return this._ajax.json(n,P)}manageTokenRequestToJoin(e){const t=l.tM.post(this._url,"/institution/request-to-join/manage/token"),n=(0,r.pipe)(e,o.fold((()=>t),(e=>t.cookie("request_to_join_token",e))));return this._ajax.json(n,R)}manageRequestToJoinInstitution(e){const t=l.tM.post(this._url,"/institution/request-to-join/manage/requests").json(e);return this._ajax.json(t,x)}addUsersWithValidRequestToJoinToInstitution(e){const t=l.tM.post(this._url,"/institution/request-to-join/manage/add-users").json(e);return this._ajax.json(t,I)}sendCallToActionRequest(){const e=l.tM.post(this._url,"/institution/call-to-action-to-go");return this._ajax.empty(e)}getCallToActionCount(){const e=l.tM.get(this._url,"/institution/call-to-action-to-go/count");return this._ajax.json(e,N)}getTrialExtensionActions(){const e=l.tM.get(this._url,"/trial-extension");return this._ajax.json(e,k)}markTrialExtensionActionComplete(e){const t=l.tM.post(this._url,"/trial-extension").json({action:e});return this._ajax.empty(t)}getTrueUpSchedule(){const e=l.tM.get(this._url,"/true_up");return this._ajax.json(e,M)}getAdminInfoList(){const e=l.tM.get(this._url,"/institution/admins");return this._ajax.json(e,i.YO(j))}leave(){const e=l.tM.post(this._url,"/institution/leave");return this._ajax.json(e,A)}};z.targetTag="institution";let V=z;const K=i.qO({word:i.Yj});i.YO(K),i.YO(K),i.qO({oldEntry:K,newEntry:K}),i.OH({wordsCount:i.ai,linesWithErrors:i.YO(i.ai)}),u.K.Base;const J=class e extends u.K.Base{constructor(e,t,n){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({requestExtender:c.UV.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(e){return`https://goldengate${e}/institution/api/groups`}getGroupsList(){const t=l.tM.get(this._url);return this._ajax.json(t,e.GroupsIOType)}getGroup(t){const n=l.tM.get(this._url,t.toString());return this._ajax.json(n,e.GroupIOType)}createGroup(t){const n=l.tM.post(this._url).json(t);return this._ajax.json(n,e.GroupIOType)}updateGroup(t,n){const r=l.tM.put(this._url,t.toString()).json(n);return this._ajax.json(r,e.GroupIOType)}deleteGroup(e){const t=l.tM.del(this._url,e.toString());return this._ajax.empty(t)}getCurrentUserGroup(){const t=l.tM.get(this._url,"current");return this._ajax.json(t,e.GroupIOType)}getGroupMembers(t){const n=l.tM.get(this._url,t.toString(),"members");return this._ajax.json(n,e.GroupMembersIOType)}getGroupMemberUsers(t,n,r){const i=l.tM.get(this._url,t.toString(),"members/users").queryParam("offset",n.toString()).queryParam("limit",r.toString());return this._ajax.json(i,e.GroupUsersPageIOType)}getGroupMemberInvitees(t,n,r){const i=l.tM.get(this._url,t.toString(),"members/invitees").queryParam("offset",n.toString()).queryParam("limit",r.toString());return this._ajax.json(i,e.GroupInviteesPageIOType)}updateGroupMembers(t,n){const r=l.tM.post(this._url,t.toString(),"members").json(n);return this._ajax.json(r,e.GroupMembersResultsIOType)}deleteGroupMembers(t,n){const r=l.tM.del(this._url,t.toString(),"members").json(n);return this._ajax.json(r,e.GroupMembersResultsIOType)}enableAdminControlledGroup(t){const n=l.tM.patch(this._url,t.toString(),"enable-admin-controlled");return this._ajax.json(n,e.GroupIOType)}disableAdminControlledGroup(t){const n=l.tM.patch(this._url,t.toString(),"disable-admin-controlled");return this._ajax.json(n,e.GroupIOType)}batchEnableAdminControlledGroups(t){const n=l.tM.patch(this._url,"batch-enable-admin-controlled").json({groupIds:t});return this._ajax.json(n,i.YO(e.GroupIOType))}batchDisableAdminControlledGroups(t){const n=l.tM.patch(this._url,"batch-disable-admin-controlled").json({groupIds:t});return this._ajax.json(n,i.YO(e.GroupIOType))}};J.GroupMembersUserIOType=i.E$([i.NW({email:i.Yj,userId:i.ai}),i.OH({name:i.Yj})]),J.GroupIOType=i.E$([i.NW({name:i.Yj,createdAt:s.Type.date(),updatedAt:s.Type.date(),id:i.ai,institutionId:i.ai,membersCount:i.ai,isAdminControlled:i.zM}),i.OH({groupManagers:i.YO(J.GroupMembersUserIOType)})]),J.GroupsIOType=i.NW({groups:i.YO(J.GroupIOType)}),J.GroupMembersReasonIOType=s.Type.literalUnion("reason",s.n(["not_institution_member"])),J.GroupMembersResultIOType=i.E$([i.NW({email:i.Yj,success:i.zM}),i.OH({reason:J.GroupMembersReasonIOType})]),J.GroupMembersResultsIOType=i.NW({results:i.YO(J.GroupMembersResultIOType)}),J.GroupMembersInviteeIOType=i.E$([i.NW({email:i.Yj,inviteeId:i.ai}),i.OH({name:i.Yj})]),J.GroupUsersPageIOType=i.NW({data:i.YO(J.GroupMembersUserIOType),total:i.ai}),J.GroupInviteesPageIOType=i.NW({data:i.YO(J.GroupMembersInviteeIOType),total:i.ai}),J.GroupMembersIOType=i.NW({invitees:i.YO(J.GroupMembersInviteeIOType),users:i.YO(J.GroupMembersUserIOType)}),J.GroupCreateRequestIOType=i.NW({name:i.Yj}),J.GroupUpdateRequestIOType=i.NW({name:i.Yj}),J.GroupMembersUpdateRequestIOType=i.NW({emails:i.YO(i.Yj)}),J.GroupMembersDeleteRequestIOType=i.NW({emails:i.YO(i.Yj)}),u.K.Base;var $=n(16781),Z=(e=>(e.Active="ACTIVE",e.Suspended="SUSPENDED",e.PendingDelete="PENDING_DELETE",e))(Z||{});const X=class e extends u.K.Base{constructor(e,t,n){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({requestExtender:c.UV.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(e){return`https://goldengate${e}/institution/api/institution/admin`}getInstitutionInfo(){const t=l.tM.get(this._url,"institution_info");return this._ajax.json(t,e.IOType)}getInstitutionSsoInfo(){const t=l.tM.get(this._url,"sso_info");return this._ajax.json(t,e.SsoInfoType)}getInstitutionScimInfo(){const t=l.tM.get(this._url,"scim_info");return this._ajax.json(t,e.ScimInfoType)}updateInstitutionSettings(e){const t=l.tM.post(this._url,"update_settings").json(e);return this._ajax.empty(t)}updateRequestToJoinSettings(e){const t=l.tM.put(this._url,"settings/request_to_join").json(e);return this._ajax.empty(t)}updateName(e){const t=l.tM.post(this._url,"update_name").queryParam("name",e);return this._ajax.empty(t)}addMembers(t){const n=l.tM.post(this._url,"users/add").json(t);return this._ajax.json(n,e.AddMembersResponseIOType)}checkMembersExport(e){const t=l.tM.get(this._url,`export/requests/${e}/link`);return this._ajax.json(t)}uploadMembersFile(e,t){const n=l.tM.put(this._url,"upload/file/load").queryParam("action",t).multipartFormData("file",e);return this._ajax.json(n)}assignToGroupsUsingFile(e){const t=l.tM.post(this._url,`/upload/file/override/groups/${e}`);return this._ajax.empty(t)}downloadImportTemplate(){const e=l.tM.get(this._url,"/upload/file/template");return this._ajax.file(e)}getMembersFileStatistic(t){const n=l.tM.get(this._url,`/upload/file/load/result/${t}`);return this._ajax.json(n,e.MembersFileStatisticIOType)}removeMembersUsingFile(e){const t=l.tM.post(this._url,`/upload/file/remove/${e}`);return this._ajax.empty(t)}addMembersUsingFile(e){const t=l.tM.post(this._url,`/upload/file/add/${e}`);return this._ajax.empty(t)}overrideMembersUsingFile(e){const t=l.tM.post(this._url,`/upload/file/override/${e}`);return this._ajax.empty(t)}cancelEmailChangeRequest(e){const t=l.tM.post(this._url,"/email/change/cancel").json({email:e});return this._ajax.empty(t)}updateProvisioningSettings(e){const t=l.tM.post(this._url,"update_provisioning_settings").json({provisioningEnabled:e});return this._ajax.empty(t)}getUnprovisionedList(){const e=l.tM.get(this._url,"scim/unprovisioned/list");return this._ajax.file(e)}getUnprovisionedCount(){const e=l.tM.get(this._url,"scim/unprovisioned/count");return(0,r.pipe)(this._ajax.json(e),this._ajax.map((e=>e.count)))}getDomains(){const t=l.tM.get(this._url,"domains");return this._ajax.json(t,e.GetDomainsResponseIOType)}getJoinActivity(t,n){const r=l.tM.get(this._url,"join_activity").queryParam("start_date",t.toISOString()).queryParam("end_date",n.toISOString());return this._ajax.json(r,e.GetJoinActivityResponseIOType)}getSuggestedInvitees(t){const n=l.tM.get(this._url,"suggested_invitees").queryParam("prefix",t);return this._ajax.json(n,e.GetSuggestedInviteesResponseIOType)}};X.OnboardingType=$.KJ.PartialInstitutionInfo.onboardingTypeCodec,X.OrganizationType=$.KJ.PartialInstitutionInfo.organizationTypeCodec,X.InstitutionUserState=$.KJ.PartialInstitutionInfo.institutionUserStateCodec,X.IOType=i.E$([i.qO({id:i.ai,name:i.Yj,hideStudents:i.zM,msOutlookEnabled:i.zM,msWordEnabled:i.zM,seats:i.ai,enrolled:i.ai,expirationDate:s.Type.date(),business:i.zM,ssoEnabled:i.zM,ssoActivated:i.zM,ssoId:s.Type.option(i.Yj),k12:i.zM,newEmail:s.Type.option(i.Yj),changeStatus:s.Type.literalUnion("changeStatus",(0,s.n)(["admin_email_init","admin_email_approved","admin_transfer_init","none"])),userTypes:i.OH({Active:i.ai,Invited:i.ai,Admins:i.ai,Removed:i.ai,AdminsOnly:i.ai,totalPaid:i.ai}),brandTonesEnabled:i.zM,provisioningEnabled:i.zM,provisioningSelfServeEnabled:i.zM,groupsCount:i.ai,groupRolesEnabled:i.zM,inviteLinkActivated:i.zM,requestToJoinActivated:i.zM,requestToJoinBlocked:i.zM,isEligibleForAutojoin:i.zM}),i.OH({onboardingType:X.OnboardingType,organizationType:X.OrganizationType})]),X.ScimInfoType=i.qO({institutionId:i.ai,name:i.Yj,ssoEnabled:i.zM,ssoActivated:i.zM,provisioningEnabled:i.zM,provisioningSelfServeEnabled:i.zM,ssoId:s.Type.option(i.Yj),seats:i.ai}),X.SsoInfoType=i.qO({institutionId:i.ai,name:i.Yj,ssoEnabled:i.zM,ssoActivated:i.zM,ssoId:s.Type.option(i.Yj),seats:i.ai,enrolled:i.ai,totalPaid:i.ai}),X.AnalyticsDataItemType=i.qO({date:s.Type.date(),value:i.ai}),X.AnalyticsDataType=i.qO({total:i.ai,data:i.YO(X.AnalyticsDataItemType)}),X.MemberIOType=i.E$([i.qO({email:i.Yj,name:i.Yj,isAdmin:i.zM,stateDateTime:s.Type.date(),provisioningStatus:s.Type.option(s.Type.createStringEnum(Z,"provisioningStatus"))}),i.OH({group:i.qO({id:i.ai,name:i.Yj})}),i.KC([i.qO({state:i.eu("Success"),uid:i.ai,registrationDate:s.Type.date(),lastActivity:s.Type.option(s.Type.date()),role:s.Type.literalUnion("role",(0,s.n)([$.KJ.InstitutionRoleName.Admin,$.KJ.InstitutionRoleName.AccountManager,$.KJ.InstitutionRoleName.InstitutionUser]))}),i.qO({state:i.eu("Invited")}),i.qO({state:i.eu("Removed"),registrationDate:s.Type.option(s.Type.date()),lastActivity:s.Type.option(s.Type.date())}),i.qO({state:i.eu("Pending")}),i.qO({state:i.eu("Error")}),i.qO({state:i.eu("Removing")}),i.qO({state:i.eu("Active")})])]),X.MembersIOType=i.qO({total:i.ai,data:i.YO(X.MemberIOType)}),X.AddMembersResponseIOType=i.YO(i.Yj),X.MembersFileStatisticIOType=i.qO({alreadyAssigned:i.qO({total:i.ai,data:i.YO(i.Yj)}),left:i.qO({total:i.ai,data:i.YO(i.Yj)}),inner:i.qO({total:i.ai,data:i.YO(i.Yj)}),right:i.qO({total:i.ai,data:i.YO(i.Yj)}),groupsUpdates:i.YO(i.qO({addedExistingInstitutionMembersCount:i.ai,groupName:i.Yj,isNew:i.zM,newMembersCount:i.ai,removedMembersCount:i.ai}))}),X.InstitutionDomain=i.NW({domain:i.Yj,verified:i.zM,isAdminVerified:i.zM,isDomainCaptured:i.zM}),X.GetDomainsResponseIOType=i.NW({domains:i.YO(X.InstitutionDomain)}),X.GetJoinActivityResponseIOType=i.OH({ACCESS_CODE:i.ai,FORCED_MODE:i.ai,DOMAIN_CAPTURE:i.ai,INVITE_EMAIL:i.ai,INVITE_LINK:i.ai,SEMI_AUTOJOIN:i.ai,AUTOJOIN:i.ai,REQUEST_TO_JOIN:i.ai}),X.GetSuggestedInviteesResponseIOType=i.NW({suggestedInvitees:i.YO(i.NW({id:i.ai,email:i.Yj}))});const Q=class e extends u.K.Base{constructor(e,t,n){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({requestExtender:c.UV.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(e){return`https://goldengate${e}/institution/api/institution/members`}getMembers(t,n,r="email",i,o,a,s){const u=l.tM.get(this._url).queryParam("offset",t.toString()).queryParam("limit",n.toString()).queryParam("order",r).queryParam("order_type",i);return null!=s&&s&&u.queryParam("search",s),o&&o.forEach((e=>u.queryParam("memberStatus",e))),a&&a.forEach((e=>u.queryParam("groupId",e.toString()))),this._ajax.json(u,e.MembersIOType)}removeMembers(e){const t=l.tM.del(this._url).json({emails:e});return this._ajax.empty(t)}requestExportMembers(e,t="",n,r,i){const o=l.tM.post(this._url,"export/requests");return e.forEach((e=>o.queryParam("memberStatus",e))),t&&o.queryParam("search",t),n&&o.queryParam("order",n),r&&o.queryParam("order_type",r),i&&i.forEach((e=>{o.queryParam("groupId",e.toString())})),this._ajax.json(o)}};Q.UserRole=s.n([$.KJ.InstitutionRoleName.InstitutionUser,$.KJ.InstitutionRoleName.AccountManager,$.KJ.InstitutionRoleName.Admin,$.KJ.UserGroupRoleName.GroupManager]),Q.ResourceType=s.n([$.KJ.ResourceType.Institution,$.KJ.ResourceType.UserGroup]),Q.ResourceRoleIOType=i.qO({role:s.Type.literalUnion("role",Q.UserRole),resourceType:s.Type.literalUnion("resourceType",Q.ResourceType),resourceId:i.Yj,name:s.Type.option(i.Yj),roleId:s.Type.option(i.ai)}),Q.Role=s.Type.option(s.Type.literalUnion("role",s.n([$.KJ.InstitutionRoleName.Admin,$.KJ.InstitutionRoleName.AccountManager,$.KJ.InstitutionRoleName.InstitutionUser]))),Q.IOType=i.qO({userId:s.Type.option(i.ai),email:i.Yj,name:s.Type.option(i.Yj),registeredAt:s.Type.option(s.Type.date()),lastActivityAt:s.Type.option(s.Type.date()),updatedAt:s.Type.date(),group:s.Type.option(i.NW({id:i.ai,name:i.Yj,isAdminControlled:i.zM})),status:s.Type.literalUnion("status",s.n(["ACTIVE","INVITED","INVITE_EXPIRED","REMOVED"])),attributes:s.Type.set(i.NW({name:i.Yj,value:i.Yj})),role:Q.Role,roles:s.Type.option(i.YO(Q.ResourceRoleIOType)),provisioningStatus:s.Type.option(s.Type.literalUnion("provisioningStatus",s.n([Z.Active,Z.Suspended,Z.PendingDelete]))),costCenter:s.Type.option(i.Yj)}),Q.MembersIOType=i.qO({total:i.ai,data:i.YO(Q.IOType)}),u.K.Base;const ee=class e extends u.K.Base{constructor(e,t,n){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({requestExtender:c.UV.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(e){return`https://goldengate${e}/institution/api/vault`}getVaultItemsForKeys(t){const n=l.tM.get(this._url);return t.forEach((e=>n.queryParam("key",e))),this._ajax.json(n,e.VaultResponseType)}deleteVaultItem(e){const t=l.tM.del(this._url,e);return this._ajax.empty(t)}updateVaultItem(e){const t=l.tM.post(this._url).json(e);return this._ajax.empty(t)}};ee.VaultItemIOType=i.qO({key:i.Yj,value:i.Yj}),ee.VaultResponseType=i.qO({vault:i.YO(ee.VaultItemIOType)})},37560:(e,t,n)=>{"use strict";n.d(t,{t:()=>r});var r,i=n(96797),o=n(42291),a=n(22496),s=n(5574);(e=>{var t,n,r,u,c,l,d,p,h,f,g,m,_,v,y;(t=e.Feature||(e.Feature={})).AdminControlledGroups="admin_controlled_groups",t.BrandingSet="branding_set",t.BrandToneProfilesLimit="brand_tone_profiles_limit",t.BrandTones="brandtones",t.BYOK="byok",t.Cheetah="cheetah",t.ClientControls="clientcontrols",t.CompanyLanguage="companylanguage",t.CostCenters="costcenters",t.CustomRoles="customroles",t.DomainCapture="domain_capture",t.DomainVerification="domain_verification",t.Institution="institution",t.InviteCapture="invite_capture",t.KnowledgeHub="knowledgehub",t.ManagedMode="managedmode",t.MemberUsageAnalytics="member_usage_analytics",t.OrgDictionary="orgdictionary",t.SCIM="scim",t.Snippets="snippets",t.Sso="sso",t.Statistics="statistics",t.StyleGuideRuleSetsLimit="style_guide_rule_sets_limit",t.Subscription="subscription",t.UserGroupsLimit="user_groups_limit",t.Vox="vox",t.WritingStyle="writingstyle",(n=e.AdminControlledGroupsPermission||(e.AdminControlledGroupsPermission={})).AdminControlledGroupsCreate="admin-controlled-groups:create",n.AdminControlledGroupsDelete="admin-controlled-groups:delete",n.AdminControlledGroupsMembershipDelete="admin-controlled-groups:membership:delete",(r=e.BrandTonesPermission||(e.BrandTonesPermission={})).GlobalRead="global:read",r.GroupCreate="group:create",r.GroupDelete="group:delete",r.GlobalDelete="global:delete",r.GlobalCreate="global:create",(u=e.CheetahPermission||(e.CheetahPermission={})).ConfigurationRead="configuration:read",u.ConfigurationWrite="configuration:write",(c=e.ClientControlsPermission||(e.ClientControlsPermission={})).ClientControlsRead="clientcontrols:read",c.ClientControlsWrite="clientcontrols:write",(l=e.KnowledgeHubPermission||(e.KnowledgeHubPermission={})).GlobalRead="global:read",l.GlobalWrite="global:write",(d=e.InstitutionPermission||(e.InstitutionPermission={})).DomainRead="domain:read",d.DomainWrite="domain:write",d.GroupCreate="group:create",d.GroupDelete="group:delete",d.GroupMembershipManage="group:membership:manage",d.GroupRead="group:read",d.InstitutionGlobalRead="institution:global:read",d.InstitutionGlobalWrite="institution:global:write",d.LogoWrite="logo:write",d.MembershipCsv="membership:csv",d.MembershipRead="membership:read",d.MembershipCreate="membership:create",d.MembershipDelete="membership:delete",d.RequestToJoinManage="request-to-join:manage",d.RolesRead="roles:read",d.RolesWriteGroupManager="roles:write:group_contributor",d.RolesWriteInstitutionUser="roles:write:institution_user",d.RolesWriteAccountManager="roles:write:contributor",d.RolesWriteCustomRoles="roles:write:custom_roles",d.RolesWriteAdmin="roles:write:owner",d.SettingsDictionaryWrite="settings:dictionary:write",d.SettingsSuggestionManage="settings:suggestion:manage",d.TeamDiscoveryRead="teamdiscovery:read",d.TeamDiscoveryWrite="teamdiscovery:write",d.ToneWrite="tone:write",d.VaultPrivateManage="vault:private:manage",d.VaultProtectedManage="vault:protected:manage",d.VaultPublicManage="vault:public:manage",(p=e.CustomRolesPermission||(e.CustomRolesPermission={})).CustomRolesRead="custom-roles:read",p.CustomRolesWrite="custom-roles:write",(h=e.SnippetsPermission||(e.SnippetsPermission={})).SettingsRead="settings:read",h.SettingsToggleWrite="settings:toggle:write",h.SettingsWrite="settings:write",h.SnippetsGlobalRead="snippets:global:read",h.SnippetsGlobalCreate="snippets:global:create",h.SnippetsGlobalDelete="snippets:global:delete",h.SnippetsRead="snippets:read",h.SnippetsWrite="snippets:write",h.SnippetsGroupCreate="snippets:group:create",h.SnippetsGroupDelete="snippets:group:delete",(f=e.StatisticsPermission||(e.StatisticsPermission={})).GeneralRead="general:read",f.GeneralWrite="general:write",f.GroupRead="group:read",f.UsersRead="users:read",f.InstitutionSettingsRead="institution:settings:read",f.InstitutionSettingsWrite="institution:settings:write",f.ManagedModeRead="managed_mode:read",(g=e.SsoPermission||(e.SsoPermission={})).ScimRead="scim:read",g.ScimWrite="scim:write",g.SettingsRead="settings:read",g.SettingsWrite="settings:write",(e.SubscriptionPermission||(e.SubscriptionPermission={})).Write="subscription:write",(m=e.WritingStylePermission||(e.WritingStylePermission={})).ReadAll="read:all",m.CreateAll="create:all",m.DeleteAll="delete:all",m.CreateGroup="create:group",m.DeleteGroup="delete:group",(_=e.VoxPermission||(e.VoxPermission={})).GlobalRead="global:read",_.GlobalCreate="global:create",_.GlobalDelete="global:delete",_.GroupCreate="group:create",_.GroupDelete="group:delete",_.RulesRead="rules:read",(v=e.CompanyLanguagePermission||(e.CompanyLanguagePermission={})).ConfigurationWrite="configuration:write",v.ConfigurationRead="configuration:read",(y=e.OrgDictionaryPermission||(e.OrgDictionaryPermission={})).Read="read",y.Write="write";const b=i.OH({boolValue:i.zM,stringValue:i.Yj,numberValue:i.ai}),C=i.KC([i.eu("UNKNOWN_RESOURCE_TYPE"),i.eu("INSTITUTION_RESOURCE"),i.eu("USER_GROUP_RESOURCE")]),S=i.NW({resourceId:i.Yj,resourceType:C,permission:i.YO(i.Yj)}),E=i.KC([i.eu("brandtones"),i.eu("cheetah"),i.eu("clientcontrols"),i.eu("institution"),i.eu("knowledgehub"),i.eu("snippets"),i.eu("sso"),i.eu("statistics"),i.eu("subscription"),i.eu("vox"),i.eu("orgdictionary"),i.eu("writingstyle"),i.eu("companylanguage"),i.eu("brand_tone_profiles_limit"),i.eu("domain_capture"),i.eu("domain_verification"),i.eu("invite_capture"),i.eu("managedmode"),i.eu("member_usage_analytics"),i.eu("scim"),i.eu("style_guide_rule_sets_limit"),i.eu("user_groups_limit"),i.eu("byok"),i.eu("customroles"),i.eu("costcenters"),i.eu("admin_controlled_groups"),i.eu("branding_set")]),T=i.E$([i.NW({featureReference:E}),i.OH({entitlement:b,permission:i.YO(S)})]),O=i.OH({institutionId:i.Yj}),w=i.OH({institutionDetails:O,featureVisa:i.YO(T)}),I=i.tB(i.NW({passport:w}));class x extends o.K.Base{constructor(e,t,n){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({requestExtender:a.UV.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(e){return`https://goldengate${e}/passport/api/v1/passport`}getPassport(e){const t=s.tM.get(this._url);return e&&e.forEach((e=>t.queryParam("features",e))),this._ajax.json(t,I)}}e.PassportClient=x})(r||(r={}))},10821:(e,t,n)=>{"use strict";n.d(t,{c:()=>C});var r=n(47370),i=n(30040),o=n(63336),a=n(96797),s=n(86562),u=n(58889),c=n(44297),l=n(34717),d=n(23121),p=n(69063),h=n(12486),f=n(54708),g=n(22496),m=n(5574),_=n(16781),v=n(95074);const{Type:y}=f,b=class e{constructor(e,t,n,r="web"){this._doxUrl=e,this._ajaxFactory=t,this._fingerprints=n,this._clientType=r,this._headersAppender=(0,g.kS)({"X-API-Version":"1","X-Client-Type":()=>this._clientType}),this._ajax=this._ajaxFactory({requestExtender:m.tM.Extender.compose(g.UV.toHeaderAppender(this._fingerprints),this._headersAppender),errorMapper:v.hB.doxErrorMapper})}getOptions(t){const n=m.tM.get(this._doxUrl,`documents/${t}/proofit/turnaroundOptions`);return(0,o.pipe)(this._ajax.json(n,e.PlanOptionsSchema),this._ajax.filterOrElse((t=>t.status===e.PlanStatus.Success),(({status:e})=>new m.Hl({code:403,status:e}))))}createJob({docId:t,turnaround:n}){const r=e.PlanType[n],i=m.tM.post(this._doxUrl,`documents/${t}/proofit/job`).queryParam("turnaround",r);return(0,o.pipe)(this._ajax.json(i),this._ajax.map(e.parseCreateJobResult))}};b.targetTag="proofit";let C=b;(e=>{let t;var n,f;let g;var v;let b;var C,S;let E;var T;let O;var w;let I;var x;function P(e){return-1!==Object.values(t).indexOf(e)?e:"unknown"}(n=t=e.JobStatus||(e.JobStatus={})).newJob="New",n.building="Building",n.cancelled="Cancelled",n.completed="Completed",n.duplicate="duplicate",n.emptyDocument="emptyDocument",n.paymentError="paymentError",n.complexInternalStructure="complexInternalStructure",n.forbidden="Proofit is forbidden",n.unknown="unknown",(f=e.StatisticsStatus||(e.StatisticsStatus={})).Success="success",f.Forbidden="Proofit is forbidden",(v=g=e.PlanType||(e.PlanType={})).Instant="Instant",v.ThreeHours="ThreeHours",v.SixHours="SixHours",v.TwentyFourHours="TwentyFourHours",v.ThreeDays="ThreeDays",e.PlanTypeSchema=y.createStringEnum(g,"PlanType"),e.getPlanName=e=>{switch(e){case"Instant":return"30m";case"ThreeHours":return"3h";case"SixHours":return"6h";case"TwentyFourHours":return"24h";case"ThreeDays":return"3d";default:return(0,s.xb)(e)}},e.CreditsSchema=a.tB(a.NW({canBeUsed:a.zM,balance:a.ai,maxWordsPerCredit:a.ai})),(C=b=e.PlanTier||(e.PlanTier={})).Base="Base",C.Clarity="Clarity",e.PlanTierSchema=y.createStringEnum(b,"PlanTier"),e.PlanSchema=a.tB(a.NW({enabled:a.zM,label:a.Yj,minutesToProcess:y.option(a.ai),hoursToProcess:y.option(a.ai),perWord:a.ai,price:a.ai,turnaround:e.PlanTypeSchema,requirePaymentCheck:a.zM,tier:e.PlanTierSchema,credits:y.option(e.CreditsSchema)})),(e.Plan||(e.Plan={})).eq=r.OW({tier:r.kK,turnaround:r.kK}),(S=e.PlanStatus||(e.PlanStatus={})).Success="success",S.Forbidden="Proofit is forbidden",(T=E=e.Dialect||(e.Dialect={})).British="British",T.American="American",T.Canadian="Canadian",T.Australian="Australian",(w=O=e.QuotationType||(e.QuotationType={})).Single="Single",w.Double="Double",(x=I=e.SpaceType||(e.SpaceType={})).Single="Single",x.Double="Double",e.UserInputsSchema=a.tB(a.NW({nativeLanguage:y.option(y.createStringEnum(_.KJ.PrimaryLanguage,"User.PrimaryLanguage")),dialect:y.option(y.createStringEnum(E,"Dialect")),quotationType:y.option(y.createStringEnum(O,"QuotationType")),spaceType:y.option(y.createStringEnum(I,"SpaceType")),noteToEditor:y.option(a.Yj)})),(e.PriceOfferId||(e.PriceOfferId={})).create=e=>e,e.PlanOptionsSuccessSchema=a.tB(a.NW({status:a.eu("success"),turnaroundOptions:a.QZ(e.PlanSchema),clarityTurnaroundOptions:a.QZ(e.PlanSchema),words:a.ai,userInputs:e.UserInputsSchema,priceOfferId:y.opaque(a.ai)})),e.PlanOptionsForbiddenSchema=a.tB(a.NW({status:a.eu("Proofit is forbidden")})),e.PlanOptionsSchema=a.KC([e.PlanOptionsSuccessSchema,e.PlanOptionsForbiddenSchema]),e.processOptions=t=>{var n,r;const i={...t.data,turnaroundOptions:null==(n=t.data.turnaroundOptions)?void 0:n.map((e=>({tier:"Base",...e}))),clarityTurnaroundOptions:null==(r=t.data.clarityTurnaroundOptions)?void 0:r.map((e=>({tier:"Clarity",...e})))};return(0,o.pipe)(i,e.PlanOptionsSchema.decode,u.mapLeft((e=>new m.dj.ParseError("can not parse proofit options result",e))))},e.processStatistics=e=>{const t=p.Bx.Logging.getLogger("coreclients.remote",h.$.DEBUG),n=e.data;return"success"===n.status?{status:"success",lastCompletedJobDate:c.fromEither(l.Local.parseDate(n.lastCompletedJobDate))}:(t.debug("Proofit Statistics Status: "+n.status),{status:"Proofit is forbidden"})},e.stringToJobStatus=P,e.parseResult=function(e){return(0,o.pipe)([l.Local.parseDate(e.submitted),l.Local.parseDate(e.due)],d.fP(((t,n)=>({submitted:t,corrections:e.corrections?e.corrections:0,due:n,price:e.price?e.price:0,name:e.name?e.name:"",completed:c.fromEither(l.Local.parseDate(e.completed)),id:e.id?e.id:0,status:P(e.status),is_dox_applied:e.is_dox_applied}))))},e.fromRaw=(0,i.flow)(c.fromNullable,c.chain((0,i.flow)(e.parseResult,c.fromEither))),e.isErrorJobStatus=e=>-1!==["duplicate","emptyDocument","paymentError","complexInternalStructure","Proofit is forbidden","unknown"].indexOf(e),e.parseCreateJobResult=function(t){const n=t.data,r=P(n.status);return(0,e.isErrorJobStatus)(r)?{status:r}:{jobId:n.jobId,status:r,token:n.token}},e.isProofitEqual=function(e,t){if(e||t){if(!e&&t||e&&!t)return!1;{const n=e,r=t;return n.id===r.id&&n.status===r.status&&c.getEq(l.Local.Eq).equals(n.completed,r.completed)}}return!0};const R={corrections:null,price:null,submitted:"2018-08-09 12:06:29",due:"2018-08-10 12:06:29",name:"proofit-document-1474459282219.docx",completed:null,id:15696089,status:"New",is_dox_applied:!0};e.mockResult=function(e){return{...R,...e}}})(C||(C={}))},93113:(e,t,n)=>{"use strict";n.d(t,{v:()=>l});var r=n(30040),i=n(96797),o=n(44297),a=n(42291),s=n(22496),u=n(5574);const c=class extends a.K.Base{constructor(e,t,n){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({requestExtender:s.UV.toHeaderAppender(this._fingerprints)}),this._jsonOrEmpty=e=>(0,r.pipe)(this._ajax.text(e),this._ajax.map((e=>e?o.some(JSON.parse(e)):o.none)))}static getDefaultUrl(e){return`https://goldengate${e}/settings-registry/v1`}getSetting(e,t,n){const r=u.tM.get(this._url,`/settings/${n}/resource/${e}/${t}`);return this._jsonOrEmpty(r)}getSettings(e,t,n){const r=u.tM.post(this._url,`/settings/resource/${e}/${t}`).json(n);return this._jsonOrEmpty(r)}getMergedSettings(e){const t=u.tM.post(this._url,"/settings/merged").json(e);return this._jsonOrEmpty(t)}saveSetting(e,t,n,r){const i=u.tM.put(this._url,`/settings/${n}/resource/${e}/${t}`).json(r);return this._ajax.empty(i)}updateSetting(e,t,n,r){const i=u.tM.patch(this._url,`/settings/${n}/resource/${e}/${t}`).json(r);return this._ajax.empty(i)}deleteSetting(e,t,n){const r=u.tM.del(this._url,`/settings/${n}/resource/${e}/${t}`);return this._ajax.empty(r)}getBatchSettings(e){const t=u.tM.post(this._url,"/settings/batch-get").json(e);return this._ajax.json(t)}saveBatchSettings(e,t){const n=u.tM.put(this._url,`/settings/batch/${e}`).json(t);return this._ajax.json(n)}updateBatchSettings(e,t){const n=u.tM.patch(this._url,`/settings/batch/${e}`).json(t);return this._ajax.json(n)}deleteBatchSettings(e,t){const n=u.tM.post(this._url,`/settings/batch-delete/${e}`).json(t);return this._ajax.empty(n)}};c.targetTag="settingsRegistry",c.ResourceTypeIOType=i.KC([i.eu("INSTITUTION"),i.eu("USER"),i.eu("USER_GROUP")]),c.SettingValueIOType=i.g1(i.Yj,i.L5),c.GetSettingsRequestIOType=i.NW({settings:i.YO(i.Yj)}),c.GetBatchSettingsRequestIOType=i.YO(i.NW({resourceType:c.ResourceTypeIOType,resourceId:i.Yj,settingName:i.Yj})),c.GetBatchSettingsResponseIOType=i.YO(i.NW({resourceType:c.ResourceTypeIOType,resourceId:i.Yj,settingName:i.Yj,settingValue:c.SettingValueIOType})),c.SaveBatchSettingsRequestIOType=i.YO(i.NW({resourceType:c.ResourceTypeIOType,resourceId:i.Yj,settingValue:c.SettingValueIOType})),c.SaveBatchSettingsResponseIOType=i.YO(i.NW({resourceType:c.ResourceTypeIOType,resourceId:i.Yj,settingValue:c.SettingValueIOType})),c.SaveSettingRequestIOType=c.SettingValueIOType,c.UpdateSettingRequestIOType=c.SettingValueIOType,c.GetSettingResponseIOType=c.SettingValueIOType,c.GetSettingsResponseIOType=i.g1(i.Yj,c.SettingValueIOType),c.DeleteBatchSettingsRequestIOType=i.YO(i.NW({type:c.ResourceTypeIOType,id:i.Yj}));let l=c},81207:(e,t,n)=>{"use strict";n.d(t,{CJ:()=>m,DI:()=>N,Hu:()=>v,SK:()=>P,Tn:()=>s,_3:()=>C,g5:()=>u,lY:()=>b,v0:()=>r,yB:()=>a,zW:()=>E});var r,i,o,a,s,u,c=n(47370),l=n(96797),d=n(86562),p=n(5574),h=n(42291),f=n(22496),g=n(54708);(i=r||(r={})).codec=l.NW({currency:l.Yj,value:l.ai},"Money"),i.eq=c.OW({currency:c.kK,value:c.US}),(o||(o={})).codec=l.NW({price:l.ai,priceMoney:r.codec,fromSeats:l.ai,toSeats:l.ai},"PriceTier"),(a||(a={})).codec=l.E$([l.NW({id:l.ai,title:l.Yj,description:l.Yj,periodMonths:l.ai,price:l.ai,priceMoney:r.codec,regularPlanId:l.ai,regularPrice:l.ai,regularPriceMoney:r.codec}),l.OH({nextPaymentPrice:l.ai,numberOfSeats:l.ai,renewalPrice:l.ai,renewalPriceMoney:r.codec,hasTrial:l.zM,priceTiers:l.YO(o.codec),trialDays:l.ai,renewalPlanId:l.ai})],"PaymentPlan"),(s||(s={})).codec=l.NW({nextPayDate:l.Yj,plan:a.codec},"HardChangePaymentPlan"),(u||(u={})).codec=l.KC([l.eu("payPal"),l.eu("creditCard"),l.eu("stripe"),l.Vx],"PaymentMethod");var m,_,v,y,b,C,S,E,T,O=(e=>(e.mastercard="MasterCard",e.visa="Visa",e.americanExpress="American Express",e.jcb="JCB",e.maestro="Maestro",e.discover="Discover",e.dinersClub="Diners Club",e.unionPay="UnionPay",e.mir="Mir",e.elo="Elo",e.hiper="Hiper",e))(O||{});(m||(m={})).codec=l.KC([g.Type.createStringEnum(O,"KnownCardType"),l.Yj],"CreditCardType"),(_||(_={})).codec=l.KC([l.E$([l.NW({cardType:m.codec,expirationMonth:l.ai,expirationYear:l.ai}),l.OH({cardSuffix:l.Yj})]),l.Vx],"CreditCard"),(v||(v={})).codec=l.NW({id:l.Yj,description:l.Yj,discountPercent:l.ai,isLifelong:l.zM}),(y||(y={})).codec=l.KC([l.eu("INCLUSIVE"),l.eu("EXCLUSIVE")],"RenewalPriceType"),(b||(b={})).codec=l.E$([l.NW({discountSuppressed:l.zM}),l.OH({countryCode:l.Yj,renewalPriceType:y.codec})],"PricingOptions"),(C||(C={})).codec=l.NW({payPalDisabled:l.zM,americanExpressDisabled:l.zM,disabledCardTypes:l.YO(m.codec)},"PaymentMethodOptions"),(S||(S={})).codec=l.KC([l.eu("RENEWAL"),l.eu("SEAT_EXPANSION"),l.eu("INITIAL_CHARGE"),l.eu("UNKNOWN")],"InvoiceType"),(E||(E={})).codec=l.NW({amount:r.codec,numberOfSeats:l.ai,dueDate:l.Yj,hostedLink:l.Yj,chargeable:l.zM,invoiceType:S.codec},"StripeInvoiceInfo"),(T||(T={})).codec=l.OH({state:l.KC([l.eu("DEFAULT"),l.eu("FROZEN"),l.eu("TRIAL"),l.eu("BILLING_FLOW_MIGRATION_STARTED"),l.eu("BILLING_FLOW_MIGRATION_ENDED")]),paymentMethod:u.codec,creditCard:_.codec,billingFlowMigrationMethod:l.KC([l.eu("DEFAULT"),l.eu("INVOICING")]),usePaymentsApi:l.zM,isPremium:l.zM,nextPayDate:l.Yj,nextRenewalInvoiceDate:l.Yj,lastSubscribedDate:l.Yj,expirationDate:l.Yj,isAppleSubscription:l.zM,isGooglePlaySubscription:l.zM,isCancelled:l.zM,isDunning:l.zM,isPaymentMethodFailed:l.zM,isFree:l.zM,isFreebie:l.zM,isPremiumConversion:l.zM,isLegacyPayPal:l.zM,canCancelPlanSwitch:l.zM,hasInstitutionSubscription:l.zM,currentPlan:a.codec,queuedPlan:a.codec,plans:l.YO(a.codec),hardChangePlans:l.YO(s.codec),institutionDynamicPlans:l.YO(a.codec),institutionPlans:l.YO(a.codec),institutionEduPlans:l.YO(a.codec),proPlans:l.YO(a.codec),pricingOptions:b.codec,paymentMethodOptions:C.codec,payPalEmail:l.Yj,isOnTrial:l.zM,companyInfo:l.Yj,dunningEndDate:l.Yj,dunningDeactivationDate:l.Yj,campaign:v.codec,stripeInvoiceInfo:E.codec,countryCode:l.Yj,regionCode:l.Yj,isUngatedTrialDisabled:l.zM},"SubscriptionStatus");const w=l.KC([l.eu("NO_ACTIVE_SUBSCRIPTION"),l.eu("ON_TRIAL"),l.eu("RENEWAL_IN_PROGRESS"),l.eu("MOBILE_SUBSCRIPTION"),l.eu("NOT_MATURE_ENOUGH")],"ReferrerNotEligibleReason");var I,x,P;(I||(I={})).codec=l.NW({referralLink:l.E$([l.NW({notEligibleReason:w}),l.OH({key:l.ch})]),canReferUsersStatus:l.eu("NOT_ELIGIBLE")},"ReferralInfoNoLink"),(x||(x={})).codec=l.E$([l.NW({referralLink:l.NW({key:l.Yj}),referralRewardsLimit:l.ai,referralRewardsReceived:l.ai}),l.OH({canReferUsersStatus:l.KC([l.eu("OK"),l.eu("NOT_ELIGIBLE_FOR_REWARD")]),rewardNotEligibleReason:l.KC([l.ch,w,l.eu("REWARD_LIMIT_EXCEEDED")]),referralHistory:l.YO(l.NW({refereeName:l.Yj,createdAt:l.Yj}))})],"ReferralInfoHasLink"),(P||(P={})).codec=l.KC([I.codec,x.codec],"ReferralInfo");const R=class extends h.K.Base{constructor(e,t,n){super(),this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({requestExtender:f.UV.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(e){return`https://subscription${e}/api/v1`}getStatus(){const e=p.tM.get(this._url,"/subscription");return this._ajax.json(e)}getIndividualStatus(){const e=p.tM.get(this._url,"/individual-subscription");return this._ajax.json(e)}getFrozenProSubscriptionStatus(){const e=p.tM.get(this._url,"/subscriptions/frozen/grammarly-pro");return this._ajax.json(e)}getIndividualPlans(e){const t=p.tM.get(this._url,"/individual-plans").queryParam("billingCountryCode",e);return this._ajax.json(t)}cancelSubscription(){const e=p.tM.post(this._url,"/cancel");return this._ajax.empty(e)}renewSubscription(){const e=p.tM.post(this._url,"/renew");return this._ajax.empty(e)}ackPremiumConversion(){const e=p.tM.post(this._url,"/ack-premium-conversion");return this._ajax.empty(e)}generateClientToken(){const e=p.tM.post(this._url,"/token/generateClientToken");return this._ajax.json(e)}getAvailablePlans(){const e=p.tM.get(this._url,"/pricing");return this._ajax.json(e)}changePlan(e){const t=p.tM.post(this._url,"/set-plan").pathParam(e.toString());return this._ajax.empty(t)}changeCurrentPlan(e){const t=p.tM.post(this._url,"/hard-change-plan").pathParam(e.toString());return this._ajax.empty(t)}subscribe(e,t,n,r,i,o){const a=p.tM.post(this._url,"/subscribe").formParam("nonce",t).formParam("planId",e.toString()).formParam("sessionId",n);return r&&a.formParam("billingZip",r),i&&a.formParam("billingCountryCode",i),o&&a.formParam("billingRegionCode",o),this._ajax.empty(a)}getSetupStatus(e){const t=p.tM.get(this._url,`/setup/${e}`);return this._ajax.json(t)}subscribeCard(e,t,n,r){return this.subscribe(e,t,n,r)}subscribeCardSandbox(e="1"){const t=p.tM.post(this._url,"/subscribe").formParam("planId",e).formParam("nonce","fake-valid-nonce").formParam("sessionId","test-session").formParam("billingZip","12345");return this._ajax.empty(t)}updateCreditCard(e,t,n,r){const i=p.tM.post(this._url,"/update-card").formParam("nonce",e);return t&&i.formParam("billingZip",t),n&&i.formParam("billingCountryCode",n),r&&i.formParam("billingRegionCode",r),this._ajax.empty(i)}generateTokenPaypal({cancelUrl:e,returnUrl:t}){const n=p.tM.post(this._url,"/token/paypal").formParam("cancelUrl",e).formParam("returnUrl",t);return this._ajax.json(n)}downloadSingleReceipt(e){const t=p.tM.get(this._url,`/receipt/${e}`);return this._ajax.file(t)}downloadBillingReceipts(){const e=p.tM.get(this._url,"/receipt");return this._ajax.file(e)}downloadSingleProReceipt(e){const t=p.tM.get(this._url,`/grammarly-pro/receipt//${e}`);return this._ajax.file(t)}downloadProBillingReceipts(){const e=p.tM.get(this._url,"/grammarly-pro/receipt");return this._ajax.file(e)}setCompanyInfo(e){const t=p.tM.post(this._url,"/set-company-info").formParam("companyInfo",e);return this._ajax.empty(t)}setProCompanyInfo(e){const t=p.tM.post(this._url,"/grammarly-pro/set-company-info").formParam("companyInfo",e);return this._ajax.empty(t)}getProCompanyInfo(){const e=p.tM.get(this._url,"/grammarly-pro/company-info");return this._ajax.json(e)}subscribeNewInstitution(e){return this._subscribeNewInstitutionInternal(e)}sendInvoice(e){return this._subscribeNewInstitutionInternal({...e,stripeInvoice:!0})}subscribeNewInstitutionForNgo(e){return this._subscribeNewInstitutionInternal(e)}subscribeNewInstitutionUsingIndividualPremium(e){return this._subscribeNewInstitutionInternal(e)}isEligibleForBusinessTrial(){const e=p.tM.get(this._url,"/is-eligible-for-business-trial");return this._ajax.json(e)}getInstitutionPlans(){const e=p.tM.get(this._url,"/get-institution-plans");return this._ajax.json(e)}getInstitutionPlansForNgo(){const e=p.tM.get(this._url,"/get-institution-plans-for-ngo");return this._ajax.json(e)}isVoucherValid(e){const t=p.tM.get(this._url,"/voucher",e,"valid");return this._ajax.empty(t)}applyVoucher(e){const t=p.tM.post(this._url,"/voucher",e,"apply");return this._ajax.empty(t)}getPaymentHistory(){const e=p.tM.get(this._url,"/payment-history");return this._ajax.json(e)}updateInstitutionSeats({numberOfSeats:e}){const t=p.tM.post(this._url,"/set-number-of-seats").formParam("numberOfSeats",e.toString());return this._ajax.empty(t)}updateInstitutionPlan({numberOfSeats:e,plan:t}){const n=p.tM.post(this._url,"/change-institution-subscription");return e&&n.formParam("numberOfSeats",e.toString()),t&&n.formParam("plan",t.toString()),this._ajax.empty(n)}getAdjustedVolumePricing(e){const t=p.tM.get(this._url,"/volume-adjust-pricing").pathParam(e.toString());return this._ajax.json(t)}getInstitutionAdjustedPricing(e,t){const n=p.tM.get(this._url,"/institution-subscription-adjust-pricing").queryParam("numberOfSeats",e.toString()).queryParam("plan",t.toString());return this._ajax.json(n)}isPaymentMethodExpired(){const e=p.tM.get(this._url,"/isPaymentMethodExpired");return this._ajax.json(e)}getIndividualPaymentHistory(){const e=p.tM.get(this._url,"/individual/payment-history");return this._ajax.json(e)}getProPaymentHistory(){const e=p.tM.get(this._url,"/grammarly-pro/payment-history");return this._ajax.json(e)}requestRefund(){const e=p.tM.post(this._url,"/individual-subscription/refund");return this._ajax.empty(e)}requestFrozenProSubscriptionRefund(){const e=p.tM.post(this._url,"subscriptions/frozen/grammarly-pro/refund");return this._ajax.empty(e)}validateUSZipCode(e){const t=p.tM.post(this._url,"/zip-code/validate").json({zipCode:e});return this._ajax.json(t)}sendInvoiceDraft(e){const t=p.tM.post(this._url,"/submit-draft-invoice");return Object.entries(e).forEach((([e,n])=>t.formParam(e,n))),this._ajax.empty(t)}getInvoiceDraft(){const e=p.tM.get(this._url,"/get-draft-invoice");return this._ajax.json(e)}voidDraftInvoice(){const e=p.tM.post(this._url,"void-unpaid-invoice");return this._ajax.empty(e)}getCountriesConfiguration(){const e=p.tM.get(this._url,"/country-config");return this._ajax.json(e)}getTaxInformation(e,t,{billingPostalCode:n,billingRegionCode:r,numberOfSeats:i}={}){const o=p.tM.get(this._url,"/tax-info").queryParam("planId",e.toString()).queryParam("billingCountryCode",t);return n&&o.queryParam("billingZip",n),r&&o.queryParam("billingRegionCode",r),i&&o.queryParam("numberOfSeats",i.toString()),this._ajax.json(o)}getOrderStatus(e){const t=p.tM.get(this._url,`/order/${e}`);return this._ajax.json(t)}getReferralInfo(){const e=p.tM.post(this._url,"/referrals/info");return this._ajax.json(e)}createOrder(e,t,n,r){const i=p.tM.post(this._url,"/order/individual").formParam("planId",e.toString()).formParam("billingCountryCode",t);return void 0!==n&&i.formParam("billingZip",n),void 0!==r&&i.formParam("billingRegionCode",r),this._ajax.json(i)}createInstitutionalOrder({planId:e,volume:t,institutionName:n,countryCode:r,postalCode:i,regionCode:o}){const a=p.tM.post(this._url,"/order").formParam("planId",e.toString()).formParam("volume",t.toString()).formParam("institutionName",n).formParam("billingCountryCode",r);return void 0!==i&&a.formParam("billingZip",i),void 0!==o&&a.formParam("billingRegionCode",o),this._ajax.json(a)}updatePaymentMethod(e,t,n){const r=p.tM.post(this._url,"/setup/payment-methods").json({billingCountry:e,billingPostalCode:t,billingRegion:n});return this._ajax.json(r)}getPaymentMethodUpdateStatus(e){const t=p.tM.get(this._url,`/setup/update/payment-methods/${e}`);return this._ajax.json(t)}_subscribeNewInstitutionInternal(e){const t=p.tM.post(this._url,"/subscribe-new-institution").formParam("institutionName",e.institutionName).formParam("numberOfSeats",e.numberOfSeats.toString());return"sessionId"in e&&e.sessionId&&t.formParam("sessionId",e.sessionId),"billingCountryCode"in e&&e.billingCountryCode&&t.formParam("billingCountryCode",e.billingCountryCode),"billingRegionCode"in e&&e.billingRegionCode&&t.formParam("billingRegionCode",e.billingRegionCode),"billingZip"in e&&e.billingZip&&t.formParam("billingZip",e.billingZip),"nonce"in e&&e.nonce&&t.formParam("nonce",e.nonce),e.planId&&t.formParam("planId",e.planId.toString()),"voxEnabled"in e&&e.voxEnabled&&t.formParam("voxEnabled",e.voxEnabled.toString()),"stripeInvoice"in e&&e.stripeInvoice&&t.formParam("stripeInvoice",e.stripeInvoice.toString()),"brandTonesEnabled"in e&&e.brandTonesEnabled&&t.formParam("brandTonesEnabled",e.brandTonesEnabled.toString()),this._ajax.json(t)}};R.targetTag="subscription";let N=R;d.eo},3880:(e,t,n)=>{"use strict";n.d(t,{j:()=>T});const r=/%([0-9A-Fa-f]{2})/g,i=/[^\x20-\x7e\xa0-\xff]/g,o=/\\([\u0000-\u007f])/g,a=/;[\x09\x20]*([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*=[\x09\x20]*("(?:[\x20!\x23-\x5b\x5d-\x7e\x80-\xff]|\\[\x20-\x7e])*"|[!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*/g,s=/^([A-Za-z0-9!#$%&+\-^_`{}~]+)'(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}|[A-Za-z]{4,8}|)'((?:%[0-9A-Fa-f]{2}|[A-Za-z0-9!#$&+.^_`|~-])+)$/,u=/^([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*(?:$|;)/,c=e=>String(e).replace(i,"?");class l{constructor(e,t){this.type=e,this.parameters=t}}const d=(e,t)=>String.fromCharCode(parseInt(t,16));function p(e){const t=s.exec(e);if(!t)throw new TypeError("invalid extended field value");const n=t[1].toLowerCase(),i=t[2];let o;switch(n){case"iso-8859-1":o=c(i.replace(r,d));break;case"utf-8":try{o=decodeURIComponent(i)}catch{throw new TypeError("invalid encoded utf-8")}break;default:throw new TypeError("unsupported charset in extended field")}return o}function h(e){let t=u.exec(e);if(!t)throw new TypeError("invalid type format");let n=t[0].length;const r=t[1].toLowerCase();let i;const s=[],c={};let d;for(n=a.lastIndex=";"===t[0].slice(-1)?n-1:n;t=a.exec(e);){if(t.index!==n)throw new TypeError("invalid parameter format");if(n+=t[0].length,i=t[1].toLowerCase(),d=t[2],-1!==s.indexOf(i))throw new TypeError("invalid duplicate parameter");s.push(i),i.indexOf("*")+1!==i.length?"string"!=typeof c[i]&&('"'===d[0]&&(d=d.slice(1,d.length-1).replace(o,"$1")),c[i]=d):(i=i.slice(0,-1),d=p(d),c[i]=d)}if(-1!==n&&n!==e.length)throw new TypeError("invalid parameter format");return new l(r,c)}var f=n(83293),g=n(30040),m=n(63336),_=n(67947),v=n(29052),y=n(58193),b=n(91817),C=n(22835),S={URI:"Promise",map:function(e,t){return e.then(t)},of:Promise.resolve.bind(Promise),ap:function(e,t){return Promise.all([e,t]).then((function(e){var t=(0,b._)(e,2);return(0,t[0])(t[1])}))},chain:function(e,t){return e.then(t)},mapLeft:function(e,t){return e.catch((function(e){return Promise.reject(t(e))}))},bimap:function(e,t,n){return e.then(n,(function(e){return Promise.reject(t(e))}))},throwError:function(e){return Promise.reject(e)}};function E(e){return function(t){return t.catch(e)}}var T,O=C.h1(S,{ap:function(e,t){return e.then((function(e){return t.then(e)}))}}),w=(0,m.pipeable)(S),I=(w.ap,w.apFirst,w.apSecond,w.chain,w.chainFirst,w.map,n(77396)),x=n(58889),P=n(36840),R=n(5574),N=n(9890);(e=>{let t,n,r;var i;let o;e.create=function(e){return(0,m.pipe)(e,t.fromFetch,n.fromExecutor,_.Tj(r.forPromise))},e.createTE=function(e){return(0,m.pipe)(e,t.fromFetch,n.fromExecutor,_.Tj(r.forTaskEither))},(t||(t={})).fromFetch=e=>(t,n,r)=>i=>{return(0,m.pipe)(v.TX((()=>e(i.url,{body:y.y0(i.body),method:i.method,headers:i.headers,keepalive:i.keepalive,mode:t,credentials:n})),a("request failed on client side")),v.cy((o=i,s=r,e=>e.ok?v.pG(e):(0,m.pipe)((()=>e.text()),v.rT,v.qE((t=>s(t,e,o)))))));var o,s},(n||(n={})).fromExecutor=function(e){return _.zW((({credentials:t="include",errorMapper:n=R.dj.mapToHTTPError,requestExtender:r=R.tM.Extender.identity})=>i=>o=>(0,m.pipe)(i,R.tM.Extender.compose(r,o),f.map((e=>e.build())),v.M1,v.cy(e("cors",t,n)))))},(i=r||(r={})).forTaskEither=_.zW((e=>({...(0,m.pipeable)(v.bP),of:v.bP.of,throwError:v.bP.throwError,ApplicativePar:v.bP,ApplicativeSeq:v.yE,orElse:v.NW,retry:u,...o.forTaskEither(e)}))),i.forPromise=_.zW((e=>{const t=o.forTaskEither(e);return{...(0,m.pipeable)(S),of:S.of,throwError:S.throwError,ApplicativePar:S,ApplicativeSeq:O,orElse:E,retry:s,json:(0,g.flow)(t.json,I.hq),file:(0,g.flow)(t.file,I.hq),text:(0,g.flow)(t.text,I.hq),empty:(0,g.flow)(t.empty,I.hq),jsonWithHeaders:(0,g.flow)(t.jsonWithHeaders,I.hq),fileWithHeaders:(0,g.flow)(t.fileWithHeaders,I.hq),textWithHeaders:(0,g.flow)(t.textWithHeaders,I.hq),headers:(0,g.flow)(t.headers,I.hq)}})),(e=>{e.forTaskEither=function(e){function t(t,i){return(0,m.pipe)(t,e,n(R.dj.MimeType.json),r((e=>e.json())),I.h8(i?e=>(0,m.pipe)(i.decode(e.result),x.bimap((e=>new R.dj.ParseError("json parse error",e)),(t=>({headers:e.headers,result:t})))):x.right))}function i(t){return(0,m.pipe)(t,e,n(R.dj.MimeType.txt,R.dj.MimeType.stream,R.dj.MimeType.vnd,R.dj.MimeType.pdf,R.dj.MimeType.json,R.dj.MimeType.zip),r((e=>e.blob())),v.Tj((({headers:e,result:t})=>({headers:e,result:{title:h(e.get("Content-Disposition")||"downloadedDocument").parameters.filename,data:t}}))))}function o(t){return(0,m.pipe)(t,e,n(R.dj.MimeType.any),r((e=>e.text())))}function a(t){return(0,m.pipe)(t,e,n(R.dj.MimeType.any),v.Tj((e=>({headers:e.headers}))))}return{json:function(e,n){return(0,m.pipe)(t(e,n),v.Tj((({result:e})=>e)))},file:function(e){return(0,m.pipe)(e,i,v.Tj((({result:e})=>e)))},text:function(e){return(0,m.pipe)(e,o,v.Tj((({result:e})=>e)))},empty:function(e){return(0,m.pipe)(e,a,v.Tj(P.Yi))},jsonWithHeaders:t,fileWithHeaders:i,textWithHeaders:o,headers:a}};const t=e=>e.headers.get("Content-Type")||e.headers.get("content-type");function n(...e){const n=("Accept",r=e.join(","),e=>f.task.of(e.header("Accept",r)));var r;return r=>(0,m.pipe)(r(n),v.cy(function(...e){return v.aN((n=>{if(201===n.status||204===n.status)return!0;{const r=t(n)||R.dj.MimeType.any;return Boolean(r)&&e.some((e=>e===R.dj.MimeType.any||r.indexOf(e)>-1))}}),(n=>new R.Hl({code:-1,message:"Unexpected Content-Type",status:`Expected: ${e.join()}\nActual: ${t(n)}`})))}(...e)))}function r(e){return v.cy((t=>v.TX((()=>e(t).then((e=>({result:e,headers:t.headers})))),a("client parse error"))))}})(o||(o={}));const a=e=>t=>{if("string"==typeof t)return new R.GI(e,t);if(t instanceof Error||null!=(n=t).name||null!=n.code)return R.GI.fromError(e,t);{let n="";try{n=JSON.stringify(t)}catch(e){n=String(t)}return new R.GI(e,`unexpected result: ${n}`)}var n};function s(...e){return t=>(0,m.pipe)(v.TX(t,g.identity),(0,N.L5)(e),I.hq)}function u(...e){return t=>(0,m.pipe)(t(),(0,N.L5)(e))}})(T||(T={}))},42291:(e,t,n)=>{"use strict";var r;n.d(t,{K:()=>r}),(r||(r={})).Base=class{}},77890:(e,t,n)=>{"use strict";n.d(t,{F:()=>r});var r,i=n(3780);(r||(r={})).saveToFS=function(e){i.saveAs(e.data,e.title)}},9890:(e,t,n)=>{"use strict";n.d(t,{Xb:()=>g,L5:()=>m});var r=n(69082),i=n(63336),o=n(44297),a=n(98475),s=n(58413),u=r.getFunctionMonoid(o.getApplyMonoid({concat:(0,a.getJoinSemigroup)(s.ordNumber).concat,empty:0}))();o.none;var c=u,l=n(16799),d=n(86562),p=n(29052),h=n(58889),f=n(69063);d.eo,d.eo,d.eo;class g extends d.eo{constructor(e){super(e||"Not Connected to WS"),this.name="NotConnectedError"}static isNotConnectedError(e){return e instanceof g}}function m(e,t=(()=>!0)){const n=r.fold(c)(e);let a;return e=>(0,l.retrying)(n,(t=>(0,i.pipe)(t.previousDelay,o.fold((()=>e),(n=>(0,i.pipe)(_(t.iterNumber,n),p.g$(e),p.qE((e=>{var n;return null!==(n=e)&&"object"==typeof n&&"stack"in n&&void 0!==n.stack&&(1===t.iterNumber?a=e.stack:void 0!==a&&(e.stack=a)),e}))))))),(e=>h.isLeft(e)&&t(e.left)))}d.eo;const _=(e,t)=>p.BK((()=>f.Bx.Logging.root.getLogger("coreclients.utils").trace(`retryWithDelay: count ${e}, timeout: ${t}`)))},44988:(e,t,n)=>{"use strict";n.d(t,{_:()=>o,t:()=>o});var r=n(57635),i=n(24586);function o(e,t,n){return o=(0,r.E)()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&(0,i.Z)(o,n.prototype),o},o.apply(null,arguments)}},80120:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(79310);function i(e,t,n){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,r.r)(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n||e):o.value}},i(e,t,n||e)}}}]);